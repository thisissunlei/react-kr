'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reduxForm = require('redux-form');

var _Redux = require('kr/Redux');

var _fetch = require('kr/Redux/Utils/fetch');

var _fetch2 = _interopRequireDefault(_fetch);

var _krUi = require('kr-ui');

var _NewCreateForm = require('./NewCreateForm');

var _NewCreateForm2 = _interopRequireDefault(_NewCreateForm);

var _ConfirmFormDetail = require('./ConfirmFormDetail');

var _ConfirmFormDetail2 = _interopRequireDefault(_ConfirmFormDetail);

var _State = require('../../State');

var _State2 = _interopRequireDefault(_State);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var JoinCreate = function (_Component) {
	_inherits(JoinCreate, _Component);

	function JoinCreate(props, context) {
		_classCallCheck(this, JoinCreate);

		var _this2 = _possibleConstructorReturn(this, (JoinCreate.__proto__ || Object.getPrototypeOf(JoinCreate)).call(this, props, context));

		_this2.openConfirmCreateDialog = _this2.openConfirmCreateDialog.bind(_this2);
		_this2.onCreateSubmit = _this2.onCreateSubmit.bind(_this2);
		_this2.onCancel = _this2.onCancel.bind(_this2);
		_this2.onConfrimSubmit = _this2.onConfrimSubmit.bind(_this2);

		_this2.state = {
			stationVos: [],
			initialValues: {},
			optionValues: {},
			formValues: {},
			openConfirmCreate: false
		};

		_Redux.Store.dispatch((0, _reduxForm.reset)('admitCreateForm'));

		return _this2;
	}

	_createClass(JoinCreate, [{
		key: 'onCreateSubmit',
		value: function onCreateSubmit(formValues) {
			this.setState({
				formValues: formValues
			});

			var _this = this;

			setTimeout(function () {
				_this.onConfrimSubmit();
			}, 0);
			// this.openConfirmCreateDialog();
		}
	}, {
		key: 'onConfrimSubmit',
		value: function onConfrimSubmit() {
			console.log(this.props, this.props.params);

			var params = this.props.params;
			var formValues = this.state.formValues;


			_Redux.Store.dispatch(_Redux.Actions.callAPI('updateFinaContractIntentletter', {}, formValues)).then(function (response) {
				_krUi.Notify.show([{
					message: '更新成功',
					type: 'success'
				}]);
				_State2.default.ajaxListData({ cityName: '', communityName: '', createDateBegin: '', createDateEnd: '', createrName: '', customerName: '', page: '', pageSize: '', salerName: '' });
				_State2.default.openEditAgreement = false;

				// location.href = "./#/operation/customerManage/" + params.customerId + "/order/" + params.orderId + "/agreement/admit/" + response.contractId + "/detail";
			}).catch(function (err) {
				_krUi.Notify.show([{
					message: err.message,
					type: 'danger'
				}]);
			});

			this.openConfirmCreateDialog();
		}
	}, {
		key: 'onCancel',
		value: function onCancel() {
			var params = this.context.params;

			_State2.default.openEditAgreement = false;

			// window.location.href = `./#/operation/customerManage/${params.customerId}/order/${params.orderId}/detail`;
		}
	}, {
		key: 'openConfirmCreateDialog',
		value: function openConfirmCreateDialog() {
			this.setState({
				openConfirmCreate: !this.state.openConfirmCreate
			});
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {

			var _this = this;
			var params = this.props.params;

			var initialValues = {};
			var optionValues = {};
			var stationVos = [];

			_Redux.Store.dispatch(_Redux.Actions.callAPI('fina-contract-intention', {
				customerId: params.customerId,
				mainBillId: params.orderId
			})).then(function (response) {
				initialValues.contractstate = 'UNSTART';
				initialValues.mainbillid = params.orderId;

				initialValues.signdate = +new Date(new Date().getTime() - 24 * 60 * 60 * 1000);

				optionValues.communityAddress = response.customer.communityAddress;
				optionValues.leaseAddress = response.customer.customerAddress;
				//合同类别，枚举类型（1:意向书,2:入住协议,3:增租协议,4.续租协议,5:减租协议,6退租协议）
				initialValues.contracttype = 'INTENTION';

				optionValues.fnaCorporationList = response.fnaCorporation.map(function (item, index) {
					item.value = item.id;
					item.label = item.corporationName;
					return item;
				});
				optionValues.paymentList = response.payment.map(function (item, index) {
					item.value = item.id;
					item.label = item.dicName;
					return item;
				});
				optionValues.payTypeList = response.payType.map(function (item, index) {
					item.value = item.id;
					item.label = item.dicName;
					return item;
				});

				optionValues.floorList = response.customer.floor;
				optionValues.customerName = response.customer.customerName;
				optionValues.leaseAddress = response.customer.customerAddress;
				optionValues.communityName = response.customer.communityName;
				optionValues.communityId = response.customer.communityid;
				optionValues.mainbillCommunityId = response.mainbillCommunityId || 1;

				_Redux.Store.dispatch(_Redux.Actions.callAPI('showFinaContractIntentletter', {
					id: params.id
				})).then(function (response) {

					initialValues.id = response.id;
					initialValues.leaseId = response.leaseId;
					initialValues.contractcode = response.contractcode;
					initialValues.lessorContactid = response.lessorContactid;
					initialValues.templockday = response.templockday;
					optionValues.contractFileList = response.contractFileList;
					// initialValues.lessorContactid = response.lessorContactid;
					initialValues.leaseAddress = response.leaseAddress;
					initialValues.lessorContactName = response.lessorContactName;
					initialValues.leaseContact = response.leaseContact;
					initialValues.leaseContacttel = response.leaseContacttel;
					initialValues.contractVersionType = response.contractVersion;
					initialValues.signdate = response.signdate;
					if (response.payType) {
						initialValues.paytype = response.payType.id;
					}
					if (response.payment) {
						optionValues.payment = response.payment;
						initialValues.paymentId = response.payment.id;
					}
					if (response.boardroomnum) {
						initialValues.boardroomnum = response.boardroomnum;
					}
					initialValues.stationnum = response.stationnum;
					initialValues.wherefloor = response.wherefloor;
					initialValues.contractmark = response.contractmark || '';
					optionValues.lessorContactName = response.lessorContactName;
					initialValues.lessorContacttel = response.lessorContacttel;
					initialValues.totaldownpayment = response.totaldownpayment;

					//时间
					initialValues.leaseBegindate = new Date(response.leaseBegindate);
					initialValues.leaseEnddate = new Date(response.leaseEnddate);
					initialValues.stationVos = response.stationVos;

					//处理stationvos
					stationVos = response.stationVos;

					_this.setState({
						initialValues: initialValues,
						optionValues: optionValues,
						stationVos: stationVos
					});
				}).catch(function (err) {
					console.log(err);
					_krUi.Notify.show([{
						message: '后台出错请联系管理员',
						type: 'danger'
					}]);
				});
			}).catch(function (err) {
				_krUi.Notify.show([{
					message: '后台出错请联系管理员',
					type: 'danger'
				}]);
			});
		}
	}, {
		key: 'render',
		value: function render() {
			var _state = this.state,
			    initialValues = _state.initialValues,
			    optionValues = _state.optionValues,
			    stationVos = _state.stationVos;


			return _react2.default.createElement(
				'div',
				{ style: { marginLeft: 22 } },
				_react2.default.createElement(_krUi.Title, { value: '\u7F16\u8F91\u627F\u79DF\u610F\u5411\u4E66_\u8D22\u52A1\u7BA1\u7406' }),
				_react2.default.createElement(_krUi.BreadCrumbs, { children: ['系统运营', '客户管理', '承租协议'] }),
				_react2.default.createElement(
					'div',
					{ style: { marginTop: 10 } },
					_react2.default.createElement(_NewCreateForm2.default, { onSubmit: this.onCreateSubmit, initialValues: initialValues, onCancel: this.onCancel, optionValues: optionValues, stationVos: stationVos })
				)
			);
		}
	}]);

	return JoinCreate;
}(_react.Component);

JoinCreate.contextTypes = {
	params: _react2.default.PropTypes.object.isRequired
};
exports.default = JoinCreate;
;

var _temp = function () {
	if (typeof __REACT_HOT_LOADER__ === 'undefined') {
		return;
	}

	__REACT_HOT_LOADER__.register(JoinCreate, 'JoinCreate', '/Users/liuyihao/Code/kr-admin/src/Containers/Operation/CustomerManage/AgreementList/Admit/Edit/index.js');
}();

;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Db250YWluZXJzL09wZXJhdGlvbi9DdXN0b21lck1hbmFnZS9BZ3JlZW1lbnRMaXN0L0FkbWl0L0VkaXQvaW5kZXguanMiXSwibmFtZXMiOlsiSm9pbkNyZWF0ZSIsInByb3BzIiwiY29udGV4dCIsIm9wZW5Db25maXJtQ3JlYXRlRGlhbG9nIiwiYmluZCIsIm9uQ3JlYXRlU3VibWl0Iiwib25DYW5jZWwiLCJvbkNvbmZyaW1TdWJtaXQiLCJzdGF0ZSIsInN0YXRpb25Wb3MiLCJpbml0aWFsVmFsdWVzIiwib3B0aW9uVmFsdWVzIiwiZm9ybVZhbHVlcyIsIm9wZW5Db25maXJtQ3JlYXRlIiwiZGlzcGF0Y2giLCJzZXRTdGF0ZSIsIl90aGlzIiwic2V0VGltZW91dCIsImNvbnNvbGUiLCJsb2ciLCJwYXJhbXMiLCJjYWxsQVBJIiwidGhlbiIsInJlc3BvbnNlIiwic2hvdyIsIm1lc3NhZ2UiLCJ0eXBlIiwiYWpheExpc3REYXRhIiwiY2l0eU5hbWUiLCJjb21tdW5pdHlOYW1lIiwiY3JlYXRlRGF0ZUJlZ2luIiwiY3JlYXRlRGF0ZUVuZCIsImNyZWF0ZXJOYW1lIiwiY3VzdG9tZXJOYW1lIiwicGFnZSIsInBhZ2VTaXplIiwic2FsZXJOYW1lIiwib3BlbkVkaXRBZ3JlZW1lbnQiLCJjYXRjaCIsImVyciIsImN1c3RvbWVySWQiLCJtYWluQmlsbElkIiwib3JkZXJJZCIsImNvbnRyYWN0c3RhdGUiLCJtYWluYmlsbGlkIiwic2lnbmRhdGUiLCJEYXRlIiwiZ2V0VGltZSIsImNvbW11bml0eUFkZHJlc3MiLCJjdXN0b21lciIsImxlYXNlQWRkcmVzcyIsImN1c3RvbWVyQWRkcmVzcyIsImNvbnRyYWN0dHlwZSIsImZuYUNvcnBvcmF0aW9uTGlzdCIsImZuYUNvcnBvcmF0aW9uIiwibWFwIiwiaXRlbSIsImluZGV4IiwidmFsdWUiLCJpZCIsImxhYmVsIiwiY29ycG9yYXRpb25OYW1lIiwicGF5bWVudExpc3QiLCJwYXltZW50IiwiZGljTmFtZSIsInBheVR5cGVMaXN0IiwicGF5VHlwZSIsImZsb29yTGlzdCIsImZsb29yIiwiY29tbXVuaXR5SWQiLCJjb21tdW5pdHlpZCIsIm1haW5iaWxsQ29tbXVuaXR5SWQiLCJsZWFzZUlkIiwiY29udHJhY3Rjb2RlIiwibGVzc29yQ29udGFjdGlkIiwidGVtcGxvY2tkYXkiLCJjb250cmFjdEZpbGVMaXN0IiwibGVzc29yQ29udGFjdE5hbWUiLCJsZWFzZUNvbnRhY3QiLCJsZWFzZUNvbnRhY3R0ZWwiLCJjb250cmFjdFZlcnNpb25UeXBlIiwiY29udHJhY3RWZXJzaW9uIiwicGF5dHlwZSIsInBheW1lbnRJZCIsImJvYXJkcm9vbW51bSIsInN0YXRpb25udW0iLCJ3aGVyZWZsb29yIiwiY29udHJhY3RtYXJrIiwibGVzc29yQ29udGFjdHRlbCIsInRvdGFsZG93bnBheW1lbnQiLCJsZWFzZUJlZ2luZGF0ZSIsImxlYXNlRW5kZGF0ZSIsIm1hcmdpbkxlZnQiLCJtYXJnaW5Ub3AiLCJjb250ZXh0VHlwZXMiLCJQcm9wVHlwZXMiLCJvYmplY3QiLCJpc1JlcXVpcmVkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7OztBQUlBOztBQU1BOztBQUlBOzs7O0FBRUE7O0FBU0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7Ozs7Ozs7SUFJcUJBLFU7OztBQU1wQixxQkFBWUMsS0FBWixFQUFtQkMsT0FBbkIsRUFBNEI7QUFBQTs7QUFBQSx1SEFDckJELEtBRHFCLEVBQ2RDLE9BRGM7O0FBRzNCLFNBQUtDLHVCQUFMLEdBQStCLE9BQUtBLHVCQUFMLENBQTZCQyxJQUE3QixRQUEvQjtBQUNBLFNBQUtDLGNBQUwsR0FBc0IsT0FBS0EsY0FBTCxDQUFvQkQsSUFBcEIsUUFBdEI7QUFDQSxTQUFLRSxRQUFMLEdBQWdCLE9BQUtBLFFBQUwsQ0FBY0YsSUFBZCxRQUFoQjtBQUNBLFNBQUtHLGVBQUwsR0FBdUIsT0FBS0EsZUFBTCxDQUFxQkgsSUFBckIsUUFBdkI7O0FBRUEsU0FBS0ksS0FBTCxHQUFhO0FBQ1pDLGVBQVksRUFE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O0FBQUEsT0FHUEUsYUFITyxVQUdQQSxhQUhPO0FBQUEsT0FJUEMsWUFKTyxVQUlQQSxZQUpPO0FBQUEsT0FLUEYsVUFMTyxVQUtQQSxVQUxPOzs7QUFRUixVQUVDO0FBQUE7QUFBQSxNQUFLLE9BQU8sRUFBQ21GLFlBQVcsRUFBWixFQUFaO0FBQ0EsaURBQU8sT0FBTSxxRUFBYixHQURBO0FBRUMsdURBQWEsVUFBVSxDQUFDLE1BQUQsRUFBUSxNQUFSLEVBQWUsTUFBZixDQUF2QixHQUZEO0FBR0E7QUFBQTtBQUFBLE9BQUssT0FBTyxFQUFDQyxXQUFVLEVBQVgsRUFBWjtBQUNFLDhEQUFlLFVBQVUsS0FBS3hGLGNBQTlCLEVBQThDLGVBQWVLLGFBQTdELEVBQTRFLFVBQVUsS0FBS0osUUFBM0YsRUFBcUcsY0FBY0ssWUFBbkgsRUFBaUksWUFBWUYsVUFBN0k7QUFERjtBQUhBLElBRkQ7QUFtQkE7Ozs7OztBQWxPbUJULFUsQ0FFYjhGLFksR0FBZTtBQUNyQjFFLFNBQVEsZ0JBQU0yRSxTQUFOLENBQWdCQyxNQUFoQixDQUF1QkM7QUFEVixDO2tCQUZGakcsVTs7Ozs7Ozs7K0JBQUFBLFUiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2xpdXlpaGFvL0NvZGUva3ItYWRtaW4iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHtcblx0Q29tcG9uZW50LFxuXHRQcm9wVHlwZXNcbn0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtcblx0cmVkdXhGb3JtLFxuXHRzdWJtaXRGb3JtLFxuXHRjaGFuZ2UsXG5cdHJlc2V0XG59IGZyb20gJ3JlZHV4LWZvcm0nO1xuaW1wb3J0IHtcblx0QWN0aW9ucyxcblx0U3RvcmVcbn0gZnJvbSAna3IvUmVkdXgnO1xuaW1wb3J0IGh0dHAgZnJvbSAna3IvUmVkdXgvVXRpbHMvZmV0Y2gnO1xuXG5pbXBvcnQge1xuXHREaWFsb2csXG5cdFNlY3Rpb24sXG5cdEdyaWQsXG5cdE5vdGlmeSxcblx0QnJlYWRDcnVtYnMsXG5cdFRpdGxlLFxufSBmcm9tICdrci11aSc7XG5cbmltcG9ydCBOZXdDcmVhdGVGb3JtIGZyb20gJy4vTmV3Q3JlYXRlRm9ybSc7XG5pbXBvcnQgQ29uZmlybUZvcm1EZXRhaWwgZnJvbSAnLi9Db25maXJtRm9ybURldGFpbCc7XG5pbXBvcnQgYWxsU3RhdGUgZnJvbSBcIi4uLy4uL1N0YXRlXCI7XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBKb2luQ3JlYXRlIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuXHRzdGF0aWMgY29udGV4dFR5cGVzID0ge1xuXHRcdHBhcmFtczogUmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG5cdH1cblxuXHRjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xuXHRcdHN1cGVyKHByb3BzLCBjb250ZXh0KTtcblxuXHRcdHRoaXMub3BlbkNvbmZpcm1DcmVhdGVEaWFsb2cgPSB0aGlzLm9wZW5Db25maXJtQ3JlYXRlRGlhbG9nLmJpbmQodGhpcyk7XG5cdFx0dGhpcy5vbkNyZWF0ZVN1Ym1pdCA9IHRoaXMub25DcmVhdGVTdWJtaXQuYmluZCh0aGlzKTtcblx0XHR0aGlzLm9uQ2FuY2VsID0gdGhpcy5vbkNhbmNlbC5iaW5kKHRoaXMpO1xuXHRcdHRoaXMub25Db25mcmltU3VibWl0ID0gdGhpcy5vbkNvbmZyaW1TdWJtaXQuYmluZCh0aGlzKTtcblxuXHRcdHRoaXMuc3RhdGUgPSB7XG5cdFx0XHRzdGF0aW9uVm9zOiBbXSxcblx0XHRcdGluaXRpYWxWYWx1ZXM6IHt9LFxuXHRcdFx0b3B0aW9uVmFsdWVzOiB7fSxcblx0XHRcdGZvcm1WYWx1ZXM6IHt9LFxuXHRcdFx0b3BlbkNvbmZpcm1DcmVhdGU6IGZhbHNlXG5cdFx0fVxuXG5cdFx0U3RvcmUuZGlzcGF0Y2gocmVzZXQoJ2FkbWl0Q3JlYXRlRm9ybScpKTtcblxuXHR9XG5cblx0b25DcmVhdGVTdWJtaXQoZm9ybVZhbHVlcykge1xuXHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0Zm9ybVZhbHVlc1xuXHRcdH0pO1xuXG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRfdGhpcy5vbkNvbmZyaW1TdWJtaXQoKTtcblx0XHR9LCAwKTtcblx0XHQvLyB0aGlzLm9wZW5Db25maXJtQ3JlYXRlRGlhbG9nKCk7XG5cdH1cblxuXHRvbkNvbmZyaW1TdWJtaXQoKSB7XG5cdFx0Y29uc29sZS5sb2codGhpcy5wcm9wcywgdGhpcy5wcm9wcy5wYXJhbXMpO1xuXG5cdFx0bGV0IHBhcmFtcyA9IHRoaXMucHJvcHMucGFyYW1zO1xuXHRcdGxldCB7XG5cdFx0XHRmb3JtVmFsdWVzXG5cdFx0fSA9IHRoaXMuc3RhdGU7XG5cblx0XHRTdG9yZS5kaXNwYXRjaChBY3Rpb25zLmNhbGxBUEkoJ3VwZGF0ZUZpbmFDb250cmFjdEludGVudGxldHRlcicsIHt9LCBmb3JtVmFsdWVzKSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0Tm90aWZ5LnNob3coW3tcblx0XHRcdFx0bWVzc2FnZTogJ+abtOaWsOaIkOWKnycsXG5cdFx0XHRcdHR5cGU6ICdzdWNjZXNzJyxcblx0XHRcdH1dKTtcblx0XHRcdGFsbFN0YXRlLmFqYXhMaXN0RGF0YSh7Y2l0eU5hbWU6JycsY29tbXVuaXR5TmFtZTonJyxjcmVhdGVEYXRlQmVnaW46JycsY3JlYXRlRGF0ZUVuZDonJyxjcmVhdGVyTmFtZTonJyxjdXN0b21lck5hbWU6JycscGFnZTonJyxwYWdlU2l6ZTonJyxzYWxlck5hbWU6Jyd9KVxuXHRcdFx0YWxsU3RhdGUub3BlbkVkaXRBZ3JlZW1lbnQ9ZmFsc2U7XG5cdFx0XG5cblx0XHRcdC8vIGxvY2F0aW9uLmhyZWYgPSBcIi4vIy9vcGVyYXRpb24vY3VzdG9tZXJNYW5hZ2UvXCIgKyBwYXJhbXMuY3VzdG9tZXJJZCArIFwiL29yZGVyL1wiICsgcGFyYW1zLm9yZGVySWQgKyBcIi9hZ3JlZW1lbnQvYWRtaXQvXCIgKyByZXNwb25zZS5jb250cmFjdElkICsgXCIvZGV0YWlsXCI7XG5cblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcblx0XHRcdE5vdGlmeS5zaG93KFt7XG5cdFx0XHRcdG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuXHRcdFx0XHR0eXBlOiAnZGFuZ2VyJyxcblx0XHRcdH1dKTtcblx0XHR9KTtcblxuXHRcdHRoaXMub3BlbkNvbmZpcm1DcmVhdGVEaWFsb2coKTtcblx0fVxuXG5cdG9uQ2FuY2VsKCkge1xuXHRcdGxldCB7XG5cdFx0XHRwYXJhbXNcblx0XHR9ID0gdGhpcy5jb250ZXh0O1xuXHRcdGFsbFN0YXRlLm9wZW5FZGl0QWdyZWVtZW50PWZhbHNlO1xuXHRcdFxuXHRcdC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC4vIy9vcGVyYXRpb24vY3VzdG9tZXJNYW5hZ2UvJHtwYXJhbXMuY3VzdG9tZXJJZH0vb3JkZXIvJHtwYXJhbXMub3JkZXJJZH0vZGV0YWlsYDtcblx0fVxuXG5cdG9wZW5Db25maXJtQ3JlYXRlRGlhbG9nKCkge1xuXHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0b3BlbkNvbmZpcm1DcmVhdGU6ICF0aGlzLnN0YXRlLm9wZW5Db25maXJtQ3JlYXRlXG5cdFx0fSk7XG5cdH1cblxuXHRjb21wb25lbnREaWRNb3VudCgpIHtcblxuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0Y29uc3Qge1xuXHRcdFx0cGFyYW1zXG5cdFx0fSA9IHRoaXMucHJvcHNcblx0XHRsZXQgaW5pdGlhbFZhbHVlcyA9IHt9O1xuXHRcdGxldCBvcHRpb25WYWx1ZXMgPSB7fTtcblx0XHRsZXQgc3RhdGlvblZvcyA9IFtdO1xuXG5cdFx0U3RvcmUuZGlzcGF0Y2goQWN0aW9ucy5jYWxsQVBJKCdmaW5hLWNvbnRyYWN0LWludGVudGlvbicsIHtcblx0XHRcdGN1c3RvbWVySWQ6IHBhcmFtcy5jdXN0b21lcklkLFxuXHRcdFx0bWFpbkJpbGxJZDogcGFyYW1zLm9yZGVySWQsXG5cdFx0fSkpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdGluaXRpYWxWYWx1ZXMuY29udHJhY3RzdGF0ZSA9ICdVTlNUQVJUJztcblx0XHRcdGluaXRpYWxWYWx1ZXMubWFpbmJpbGxpZCA9IHBhcmFtcy5vcmRlcklkO1xuXG5cdFx0XHRpbml0aWFsVmFsdWVzLnNpZ25kYXRlID0gK25ldyBEYXRlKChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKTtcblxuXHRcdFx0b3B0aW9uVmFsdWVzLmNvbW11bml0eUFkZHJlc3MgPSByZXNwb25zZS5jdXN0b21lci5jb21tdW5pdHlBZGRyZXNzO1xuXHRcdFx0b3B0aW9uVmFsdWVzLmxlYXNlQWRkcmVzcyA9IHJlc3BvbnNlLmN1c3RvbWVyLmN1c3RvbWVyQWRkcmVzcztcblx0XHRcdC8v5ZCI5ZCM57G75Yir77yM5p6a5Li+57G75Z6L77yIMTrmhI/lkJHkuaYsMjrlhaXkvY/ljY/orq4sMzrlop7np5/ljY/orq4sNC7nu63np5/ljY/orq4sNTrlh4/np5/ljY/orq4sNumAgOenn+WNj+iuru+8iVxuXHRcdFx0aW5pdGlhbFZhbHVlcy5jb250cmFjdHR5cGUgPSAnSU5URU5USU9OJztcblxuXHRcdFx0b3B0aW9uVmFsdWVzLmZuYUNvcnBvcmF0aW9uTGlzdCA9IHJlc3BvbnNlLmZuYUNvcnBvcmF0aW9uLm1hcChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuXHRcdFx0XHRpdGVtLnZhbHVlID0gaXRlbS5pZDtcblx0XHRcdFx0aXRlbS5sYWJlbCA9IGl0ZW0uY29ycG9yYXRpb25OYW1lO1xuXHRcdFx0XHRyZXR1cm4gaXRlbTtcblx0XHRcdH0pO1xuXHRcdFx0b3B0aW9uVmFsdWVzLnBheW1lbnRMaXN0ID0gcmVzcG9uc2UucGF5bWVudC5tYXAoZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcblx0XHRcdFx0aXRlbS52YWx1ZSA9IGl0ZW0uaWQ7XG5cdFx0XHRcdGl0ZW0ubGFiZWwgPSBpdGVtLmRpY05hbWU7XG5cdFx0XHRcdHJldHVybiBpdGVtO1xuXHRcdFx0fSk7XG5cdFx0XHRvcHRpb25WYWx1ZXMucGF5VHlwZUxpc3QgPSByZXNwb25zZS5wYXlUeXBlLm1hcChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuXHRcdFx0XHRpdGVtLnZhbHVlID0gaXRlbS5pZDtcblx0XHRcdFx0aXRlbS5sYWJlbCA9IGl0ZW0uZGljTmFtZTtcblx0XHRcdFx0cmV0dXJuIGl0ZW07XG5cdFx0XHR9KTtcblxuXHRcdFx0b3B0aW9uVmFsdWVzLmZsb29yTGlzdCA9IHJlc3BvbnNlLmN1c3RvbWVyLmZsb29yO1xuXHRcdFx0b3B0aW9uVmFsdWVzLmN1c3RvbWVyTmFtZSA9IHJlc3BvbnNlLmN1c3RvbWVyLmN1c3RvbWVyTmFtZTtcblx0XHRcdG9wdGlvblZhbHVlcy5sZWFzZUFkZHJlc3MgPSByZXNwb25zZS5jdXN0b21lci5jdXN0b21lckFkZHJlc3M7XG5cdFx0XHRvcHRpb25WYWx1ZXMuY29tbXVuaXR5TmFtZSA9IHJlc3BvbnNlLmN1c3RvbWVyLmNvbW11bml0eU5hbWU7XG5cdFx0XHRvcHRpb25WYWx1ZXMuY29tbXVuaXR5SWQgPSByZXNwb25zZS5jdXN0b21lci5jb21tdW5pdHlpZDtcblx0XHRcdG9wdGlvblZhbHVlcy5tYWluYmlsbENvbW11bml0eUlkID0gcmVzcG9uc2UubWFpbmJpbGxDb21tdW5pdHlJZCB8fCAxO1xuXG5cdFx0XHRTdG9yZS5kaXNwYXRjaChBY3Rpb25zLmNhbGxBUEkoJ3Nob3dGaW5hQ29udHJhY3RJbnRlbnRsZXR0ZXInLCB7XG5cdFx0XHRcdGlkOiBwYXJhbXMuaWRcblx0XHRcdH0pKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cblx0XHRcdFx0aW5pdGlhbFZhbHVlcy5pZCA9IHJlc3BvbnNlLmlkO1xuXHRcdFx0XHRpbml0aWFsVmFsdWVzLmxlYXNlSWQgPSByZXNwb25zZS5sZWFzZUlkO1xuXHRcdFx0XHRpbml0aWFsVmFsdWVzLmNvbnRyYWN0Y29kZSA9IHJlc3BvbnNlLmNvbnRyYWN0Y29kZTtcblx0XHRcdFx0aW5pdGlhbFZhbHVlcy5sZXNzb3JDb250YWN0aWQgPSByZXNwb25zZS5sZXNzb3JDb250YWN0aWQ7XG5cdFx0XHRcdGluaXRpYWxWYWx1ZXMudGVtcGxvY2tkYXkgPSByZXNwb25zZS50ZW1wbG9ja2RheTtcblx0XHRcdFx0b3B0aW9uVmFsdWVzLmNvbnRyYWN0RmlsZUxpc3QgPSByZXNwb25zZS5jb250cmFjdEZpbGVMaXN0O1xuXHRcdFx0XHQvLyBpbml0aWFsVmFsdWVzLmxlc3NvckNvbnRhY3RpZCA9IHJlc3BvbnNlLmxlc3NvckNvbnRhY3RpZDtcblx0XHRcdFx0aW5pdGlhbFZhbHVlcy5sZWFzZUFkZHJlc3MgPSByZXNwb25zZS5sZWFzZUFkZHJlc3M7XG5cdFx0XHRcdGluaXRpYWxWYWx1ZXMubGVzc29yQ29udGFjdE5hbWUgPSByZXNwb25zZS5sZXNzb3JDb250YWN0TmFtZTtcblx0XHRcdFx0aW5pdGlhbFZhbHVlcy5sZWFzZUNvbnRhY3QgPSByZXNwb25zZS5sZWFzZUNvbnRhY3Q7XG5cdFx0XHRcdGluaXRpYWxWYWx1ZXMubGVhc2VDb250YWN0dGVsID0gcmVzcG9uc2UubGVhc2VDb250YWN0dGVsO1xuXHRcdFx0XHRpbml0aWFsVmFsdWVzLmNvbnRyYWN0VmVyc2lvblR5cGUgPSByZXNwb25zZS5jb250cmFjdFZlcnNpb247XG5cdFx0XHRcdGluaXRpYWxWYWx1ZXMuc2lnbmRhdGUgPSByZXNwb25zZS5zaWduZGF0ZTtcblx0XHRcdFx0aWYgKHJlc3BvbnNlLnBheVR5cGUpIHtcblx0XHRcdFx0XHRpbml0aWFsVmFsdWVzLnBheXR5cGUgPSByZXNwb25zZS5wYXlUeXBlLmlkO1xuXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHJlc3BvbnNlLnBheW1lbnQpIHtcblx0XHRcdFx0XHRvcHRpb25WYWx1ZXMucGF5bWVudCA9IHJlc3BvbnNlLnBheW1lbnQ7XG5cdFx0XHRcdFx0aW5pdGlhbFZhbHVlcy5wYXltZW50SWQgPSByZXNwb25zZS5wYXltZW50LmlkO1xuXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHJlc3BvbnNlLmJvYXJkcm9vbW51bSkge1xuXHRcdFx0XHRcdGluaXRpYWxWYWx1ZXMuYm9hcmRyb29tbnVtID0gcmVzcG9uc2UuYm9hcmRyb29tbnVtO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGluaXRpYWxWYWx1ZXMuc3RhdGlvbm51bSA9IHJlc3BvbnNlLnN0YXRpb25udW07XG5cdFx0XHRcdGluaXRpYWxWYWx1ZXMud2hlcmVmbG9vciA9IHJlc3BvbnNlLndoZXJlZmxvb3I7XG5cdFx0XHRcdGluaXRpYWxWYWx1ZXMuY29udHJhY3RtYXJrID0gcmVzcG9uc2UuY29udHJhY3RtYXJrIHx8ICcnO1xuXHRcdFx0XHRvcHRpb25WYWx1ZXMubGVzc29yQ29udGFjdE5hbWUgPSByZXNwb25zZS5sZXNzb3JDb250YWN0TmFtZTtcblx0XHRcdFx0aW5pdGlhbFZhbHVlcy5sZXNzb3JDb250YWN0dGVsID0gcmVzcG9uc2UubGVzc29yQ29udGFjdHRlbDtcblx0XHRcdFx0aW5pdGlhbFZhbHVlcy50b3RhbGRvd25wYXltZW50ID0gcmVzcG9uc2UudG90YWxkb3ducGF5bWVudDtcblxuXHRcdFx0XHQvL+aXtumXtFxuXHRcdFx0XHRpbml0aWFsVmFsdWVzLmxlYXNlQmVnaW5kYXRlID0gbmV3IERhdGUocmVzcG9uc2UubGVhc2VCZWdpbmRhdGUpO1xuXHRcdFx0XHRpbml0aWFsVmFsdWVzLmxlYXNlRW5kZGF0ZSA9IG5ldyBEYXRlKHJlc3BvbnNlLmxlYXNlRW5kZGF0ZSk7XG5cdFx0XHRcdGluaXRpYWxWYWx1ZXMuc3RhdGlvblZvcyA9IHJlc3BvbnNlLnN0YXRpb25Wb3M7XG5cblx0XHRcdFx0Ly/lpITnkIZzdGF0aW9udm9zXG5cdFx0XHRcdHN0YXRpb25Wb3MgPSByZXNwb25zZS5zdGF0aW9uVm9zO1xuXG5cdFx0XHRcdF90aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0XHRpbml0aWFsVmFsdWVzLFxuXHRcdFx0XHRcdG9wdGlvblZhbHVlcyxcblx0XHRcdFx0XHRzdGF0aW9uVm9zXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyKTtcblx0XHRcdFx0Tm90aWZ5LnNob3coW3tcblx0XHRcdFx0XHRtZXNzYWdlOiAn5ZCO5Y+w5Ye66ZSZ6K+36IGU57O7566h55CG5ZGYJyxcblx0XHRcdFx0XHR0eXBlOiAnZGFuZ2VyJyxcblx0XHRcdFx0fV0pO1xuXHRcdFx0fSk7XG5cblxuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuXHRcdFx0Tm90aWZ5LnNob3coW3tcblx0XHRcdFx0bWVzc2FnZTogJ+WQjuWPsOWHuumUmeivt+iBlOezu+euoeeQhuWRmCcsXG5cdFx0XHRcdHR5cGU6ICdkYW5nZXInLFxuXHRcdFx0fV0pO1xuXHRcdH0pO1xuXG5cdH1cblxuXG5cdHJlbmRlcigpIHtcblxuXHRcdGxldCB7XG5cdFx0XHRpbml0aWFsVmFsdWVzLFxuXHRcdFx0b3B0aW9uVmFsdWVzLFxuXHRcdFx0c3RhdGlvblZvc1xuXHRcdH0gPSB0aGlzLnN0YXRlO1xuXG5cdFx0cmV0dXJuIChcblxuXHRcdFx0PGRpdiBzdHlsZT17e21hcmdpbkxlZnQ6MjJ9fT5cblx0XHRcdDxUaXRsZSB2YWx1ZT1cIue8lui+keaJv+enn+aEj+WQkeS5pl/otKLliqHnrqHnkIZcIi8+XG5cdFx0IFx0PEJyZWFkQ3J1bWJzIGNoaWxkcmVuPXtbJ+ezu+e7n+i/kOiQpScsJ+WuouaIt+euoeeQhicsJ+aJv+enn+WNj+iuriddfS8+XG5cdFx0XHQ8ZGl2IHN0eWxlPXt7bWFyZ2luVG9wOjEwfX0+XG5cdFx0XHRcdFx0PE5ld0NyZWF0ZUZvcm0gb25TdWJtaXQ9e3RoaXMub25DcmVhdGVTdWJtaXR9IGluaXRpYWxWYWx1ZXM9e2luaXRpYWxWYWx1ZXN9IG9uQ2FuY2VsPXt0aGlzLm9uQ2FuY2VsfSBvcHRpb25WYWx1ZXM9e29wdGlvblZhbHVlc30gc3RhdGlvblZvcz17c3RhdGlvblZvc30vPlxuXHRcdFx0PC9kaXY+XG5cblx0XHRcdHsvKjxEaWFsb2dcblx0XHRcdFx0dGl0bGU9XCLnoa7lrprmlrDlu7pcIlxuXHRcdFx0XHRtb2RhbD17dHJ1ZX1cblx0XHRcdFx0YXV0b1Njcm9sbEJvZHlDb250ZW50PXt0cnVlfVxuXHRcdFx0XHRhdXRvRGV0ZWN0V2luZG93SGVpZ2h0PXt0cnVlfVxuXHRcdFx0XHRvcGVuPXt0aGlzLnN0YXRlLm9wZW5Db25maXJtQ3JlYXRlfSA+XG5cdFx0XHRcdFx0XHQ8Q29uZmlybUZvcm1EZXRhaWwgZGV0YWlsPXt0aGlzLnN0YXRlLmZvcm1WYWx1ZXN9IG9uU3VibWl0PXt0aGlzLm9uQ29uZnJpbVN1Ym1pdH0gb25DYW5jZWw9e3RoaXMub3BlbkNvbmZpcm1DcmVhdGVEaWFsb2d9IC8+XG5cdFx0XHQgIDwvRGlhbG9nPiovfVxuXHRcdDwvZGl2PlxuXHRcdCk7XG5cdH1cbn1cbiJdfQ==