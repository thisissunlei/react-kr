{"version":3,"sources":["src/Components/KrField/SearchCompanyName/index.js"],"names":["SearchPersonelComponent","props","onInputChange","onChange","bind","getOptions","input","item","value","company","Promise","resolve","reject","dispatch","callAPI","then","response","customerList","forEach","index","id","label","options","catch","err","type","meta","touched","error","placeholder","children","disabled","style","requireLabel","other","name","Component","defaultProps","PropTypes","string","inline","bool"],"mappings":";;;;;;;;;AAAA;;;;AAGA;;;;AAEA;;AAGA;;;;;;;;;;;;;;IAEsBA,uB;;;AAWrB,kCAAYC,KAAZ,EAAkB;AAAA;;AAAA,gJACXA,KADW;;AAAA,QAWlBC,aAXkB,GAWJ,YAAI,CAGjB,CAdiB;;AAGjB,QAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,OAAhB;AACA,QAAKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBD,IAAhB,OAAlB;AAJiB;AAKjB;;;;sCAEkB;AAAA,OACbE,KADa,GACJ,KAAKL,KADD,CACbK,KADa;AAElB;;;2BAOQC,I,EAAK;AAAA,gBACU,KAAKN,KADf;AAAA,OACRK,KADQ,UACRA,KADQ;AAAA,OACFH,QADE,UACFA,QADE;;AAEb,OAAIK,QAASD,QAAQA,KAAKC,KAAd,IAAwB,EAApC;AACAF,SAAMH,QAAN,CAAeK,KAAf;AACAL,eAAYA,SAASI,IAAT,CAAZ;AACA;;;6BAEUE,O,EAAQ;AAClB,UAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,iBAAMC,QAAN,CAAe,eAAQC,OAAR,CAAgB,iBAAhB,EAAkC,EAAEL,SAAQA,OAAV,EAAlC,CAAf,EAAuEM,IAAvE,CAA4E,UAASC,QAAT,EAAkB;AAC7FA,cAASC,YAAT,CAAsBC,OAAtB,CAA8B,UAASX,IAAT,EAAcY,KAAd,EAAoB;AACjDZ,WAAKC,KAAL,GAAaD,KAAKa,EAAlB;AACAb,WAAKc,KAAL,GAAad,KAAKE,OAAlB;AACA,MAHD;AAIAE,aAAQ,EAACW,SAAQN,SAASC,YAAlB,EAAR;AACA,KAND,EAMGM,KANH,CAMS,UAASC,GAAT,EAAa;AACrBZ,YAAOY,GAAP;AACA,KARD;AASA,IAVM,CAAP;AAWA;;;2BAEO;AAAA,iBAEyG,KAAKvB,KAF9G;AAAA,OAEDK,KAFC,WAEDA,KAFC;AAAA,OAEMe,KAFN,WAEMA,KAFN;AAAA,OAEaI,IAFb,WAEaA,IAFb;AAAA,8BAEmBC,IAFnB;AAAA,OAE2BC,OAF3B,gBAE2BA,OAF3B;AAAA,OAEoCC,KAFpC,gBAEoCA,KAFpC;AAAA,OAE4CC,WAF5C,WAE4CA,WAF5C;AAAA,OAEwDC,QAFxD,WAEwDA,QAFxD;AAAA,OAEiEC,QAFjE,WAEiEA,QAFjE;AAAA,OAE0EC,KAF1E,WAE0EA,KAF1E;AAAA,OAEgFC,YAFhF,WAEgFA,YAFhF;AAAA,OAEgGC,KAFhG;;AAIP,UACC;AAAA;AAAA,MAAe,OAAOb,KAAtB,EAA6B,WAAWW,KAAxC,EAA+C,cAAcC,YAA7D;AACE;AACA,WAAM3B,MAAM6B,IADZ;AAEA,YAAO7B,MAAME,KAFb;AAGA,kBAAa,KAAKH,UAHlB;AAIA,gBAAW,IAJX;AAKA,mBAAa,cALb;AAMA,eAAU,KAAKF,QANf;AAOA,oBAAe,KAAKD,aAPpB;AAQA,oBAAc,EARd;AASA,kBAAa2B,WATb,GADF;AAWCF,eAAWC,KAAX,IAAoB;AAAA;AAAA,OAAK,WAAU,YAAf;AAAA;AAA6B;AAAA;AAAA;AAAOA;AAAP,MAA7B;AAAA;AAAA;AAXrB,IADD;AAeA;;;;EAnEoD,gBAAMQ,S;;AAAtCpC,uB,CAEdqC,Y,GAAe;AACrBR,cAAY;AADS,C;AAFD7B,uB,CAMdsC,S,GAAY;AAClBT,cAAY,gBAAMS,SAAN,CAAgBC,MADV;AAElBC,SAAO,gBAAMF,SAAN,CAAgBG;AAFL,C;kBANEzC,uB;;;;;;;;+BAAAA,uB","file":"index.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import React from 'react';\n\n\nimport ReactSelectAsync from '../../Select/Async';\n\nimport {Actions,Store} from 'kr/Redux';\n\n\nimport WrapComponent from '../WrapComponent';\n\nexport default class  SearchPersonelComponent extends React.Component {\n\n\tstatic defaultProps = {\n\t\tplaceholder:'请输入...'\n\t}\n\n\tstatic PropTypes = {\n\t\tplaceholder:React.PropTypes.string,\n\t\tinline:React.PropTypes.bool\n\t}\n\n\tconstructor(props){\n\t\tsuper(props)\n\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.getOptions = this.getOptions.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tlet {input} = this.props;\n\t}\n\n\tonInputChange=()=>{\n\n\n\t}\n\n\tonChange(item){\n\t\tlet {input,onChange} = this.props;\n\t\tvar value = (item && item.value) || '';\n\t\tinput.onChange(value);\n\t\tonChange && onChange(item);\n\t}\n\n\tgetOptions(company){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tStore.dispatch(Actions.callAPI('customers-names',{ company:company })).then(function(response){\n\t\t\t\tresponse.customerList.forEach(function(item,index){\n\t\t\t\t\titem.value = item.id;\n\t\t\t\t\titem.label = item.company;\n\t\t\t\t});\n\t\t\t\tresolve({options:response.customerList});\n\t\t\t}).catch(function(err){\n\t\t\t\treject(err);\n\t\t\t});\n\t\t});\n\t}\n\n\trender(){\n\n\t\tlet { input, label, type, meta: { touched, error },placeholder,children,disabled,style,requireLabel,...other} = this.props;\n\n\t\treturn (\n\t\t\t<WrapComponent label={label} wrapStyle={style} requireLabel={requireLabel}>\n\t\t\t\t\t<ReactSelectAsync\n\t\t\t\t\tname={input.name}\n\t\t\t\t\tvalue={input.value}\n\t\t\t\t\tloadOptions={this.getOptions}\n\t\t\t\t\tclearable={true}\n\t\t\t\t\tclearAllText=\"清除\"\n\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\tonInputChange={this.onInputChange}\n\t\t\t\t\tnoResultsText=\"\"\n\t\t\t\t\tplaceholder={placeholder}/>\n\t\t\t{touched && error && <div className=\"error-wrap\"> <span>{error}</span> </div>}\n\t\t</WrapComponent>\n\t\t);\n\t}\n}\n"]}