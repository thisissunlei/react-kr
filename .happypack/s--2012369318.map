{"version":3,"sources":["src/Containers/Operation/CustomerManage/CustomerList/NewIndent/index.js"],"names":["NewIndent","props","onSubmit","values","cityid","listId","_this","mainbilldesc","ChangeSubmitState","customerid","mainbillname","orderName","dispatch","callAPI","then","response","orderList","onCancel","setTimeout","ChangeCanSubmitState","catch","err","error","message","hasOfficeClick","params","value","showMatureTime","noShowMatureTime","communityChange","community","orderReady","communityCity","i","length","communityName","label","cityId","cityLableChange","cityName","mainbilltypeChange","customerName","orderCount","selectDatas","communityBaselist","customerSourceList","giveupList","levelList","roundList","stationTypeList","visitTypeList","nextProps","isInit","handleSubmit","pristine","reset","companyName","isOpenIndent","city","cityLable","paddingLeft","marginTop","width","marginLeft","orderFound","height","marginRight","submitState","PropTypes","func","validate","errors","mainbilltype","communityid","form"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;AAEA;;AAEA;;AAGA;;AAWA;;;;AACA;;;;AAEA;;;;;;;;;;IAEOA,S;;;AASN,oBAAYC,KAAZ,EAAkB;AAAA;;AAAA,qHACXA,KADW;;AAAA,SAalBC,QAbkB,GAaP,UAACC,MAAD,EAAY;AACtB,UAAOA,OAAOC,MAAd;AACA,OAAIC,SAAO,OAAKJ,KAAL,CAAWI,MAAtB;AACA,OAAIC,cAAJ;AACA,OAAG,CAACH,OAAOI,YAAX,EAAwB;AACvBJ,WAAOI,YAAP,GAAoB,EAApB;AACA;AACD,mBAAMC,iBAAN;AACAL,UAAOM,UAAP,GAAkBJ,MAAlB;AACAF,UAAOO,YAAP,GAAoB,gBAAMC,SAA1B;AACA,gBAAMC,QAAN,CAAe,eAAQC,OAAR,CAAgB,aAAhB,EAA8B,EAA9B,EAAiCV,MAAjC,CAAf,EAAyDW,IAAzD,CAA8D,UAASC,QAAT,EAAmB;AAChF,oBAAUC,SAAV,CAAoBV,MAAML,KAAN,CAAYI,MAAhC;AACOC,UAAMW,QAAN;AACAC,eAAW,YAAU;AACpB,qBAAMC,oBAAN;AACA,KAFD,EAEE,IAFF;AAGP,IAND,EAMGC,KANH,CAMS,UAASC,GAAT,EAAc;AACtB,kBAAQC,KAAR,CAAcD,IAAIE,OAAlB;AACA,IARD;AASA,GAhCiB;;AAAA,SAkClBN,QAlCkB,GAkCP,YAAM;AAAA,OACTA,QADS,GACG,OAAKhB,KADR,CACTgB,QADS;;AAEhBA,eAAYA,UAAZ;AACA,GArCiB;;AAAA,SAuClBO,cAvCkB,GAuCD,UAACC,MAAD,EAAW;AAC3B,OAAGA,OAAOC,KAAP,IAAc,KAAjB,EAAuB;AACtB,oBAAMC,cAAN;AACA,IAFD,MAEM,IAAGF,OAAOC,KAAP,IAAc,OAAjB,EAAyB;AAC9B,oBAAME,gBAAN;AAEA;AACD,GA9CiB;;AAAA,SAyDlBC,eAzDkB,GAyDF,UAACH,KAAD,EAAS;AACxB,OAAG,CAACA,KAAJ,EAAU;AACT;AACA;AACD,OAAII,YAAU,gBAAMC,UAAN,CAAiBC,aAA/B;AACA,QAAI,IAAIC,IAAE,CAAV,EAAYA,IAAEH,UAAUI,MAAxB,EAA+BD,GAA/B,EAAmC;AAClC,QAAGH,UAAUG,CAAV,EAAaE,aAAb,IAA4BT,MAAMU,KAArC,EAA2C;AAC1C,kBAAMxB,QAAN,CAAe,uBAAO,WAAP,EAAmB,QAAnB,EAA4BkB,UAAUG,CAAV,EAAaI,MAAzC,CAAf;AACA,qBAAMC,eAAN,CAAsBR,UAAUG,CAAV,EAAaM,QAAnC;AACA;AAED;AACD,GArEiB;;AAAA,SAsElBC,kBAtEkB,GAsEC,UAACd,KAAD,EAAS;AAC3B,mBAAMf,SAAN,GAAgB,OAAKV,KAAL,CAAWwC,YAAX,GAAwBf,MAAMU,KAA9B,GAAoC,OAAKnC,KAAL,CAAWyC,UAA/D;AAEA,GAzEiB;;AAEjB,MAAIC,cAAY;AACfC,sBAAkB,EADH;AAEfC,uBAAmB,EAFJ;AAGfC,eAAW,EAHI;AAIfC,cAAU,EAJK;AAKfC,cAAU,EALK;AAMfC,oBAAgB,EAND;AAOfC,kBAAc;AAPC,GAAhB;;AAFiB;AAYjB;;;;4CAmCyBC,S,EAAU;;AAElC,OAAG,OAAOA,UAAUpB,UAAjB,IAA8B,UAAjC,EAA4C;AAC3C;AACA;AACD,OAAG,gBAAMqB,MAAT,EAAgB;AACf;AACA;AACD,mBAAMrB,UAAN,CAAiBoB,UAAUpB,UAA3B;AACD;;;2BAoBO;AAAA,gBAC0F,KAAK9B,KAD/F;AAAA,OACCqB,KADD,UACCA,KADD;AAAA,OACQ+B,YADR,UACQA,YADR;AAAA,OACsBC,QADtB,UACsBA,QADtB;AAAA,OACgCC,KADhC,UACgCA,KADhC;AAAA,OACsCC,WADtC,UACsCA,WADtC;AAAA,OACkDC,YADlD,UACkDA,YADlD;AAAA,OAC+DhB,YAD/D,UAC+DA,YAD/D;AAAA,OAC4EC,UAD5E,UAC4EA,UAD5E;;;AAGP,OAAIgB,OAAK,gBAAMC,SAAf;AACCD,UAAK,CAACA,IAAD,GAAM,GAAN,GAAUA,IAAf;AACD;AACA;AACA;AACA,UAEC;AAAA;AAAA,MAAM,WAAU,gBAAhB,EAAiC,UAAUL,aAAa,KAAKnD,QAAlB,CAA3C,EAAwE,OAAO,EAAC0D,aAAY,CAAb,EAA/E;AACC;AAAA;AAAA,OAAK,WAAU,OAAf;AACE;AAAA;AAAA;AAAK,8CAAM,WAAU,gBAAhB,GAAL;AAA6C;AAAA;AAAA,SAAO,WAAU,YAAjB;AAA+BJ;AAA/B;AAA7C,MADF;AAEE,4CAAK,WAAU,aAAf,EAA6B,SAAS,KAAKvC,QAA3C;AAFF,KADD;AAMC;AAAA;AAAA,OAAK,WAAU,IAAf,EAAoB,OAAO,EAAC4C,WAAU,EAAX,EAAcD,aAAY,EAA1B,EAA3B;AACC,oDAAS,MAAM,IAAE,CAAjB,EAAoB,OAAM,0BAA1B,EAAiC,MAAK,cAAtC,EAAqD,OAAO,EAACE,OAAM,GAAP,EAAWC,YAAW,EAAtB,EAA5D,EAAuF,WAAU,QAAjG;AACE,eAAS,gBAAMC,UADjB;AAEE,oBAAc,IAFhB;AAGE,gBAAU,KAAKxB;AAHjB,OADD;AAMC,oDAAS,MAAM,IAAE,CAAjB,EAAoB,OAAM,0BAA1B,EAAiC,MAAK,aAAtC,EAAoD,WAAU,QAA9D,EAAuE,OAAO,EAACsB,OAAM,GAAP,EAAWC,YAAW,EAAtB,EAA9E;AACE,eAAS,gBAAMjC,SADjB;AAEE,oBAAc,IAFhB;AAGE,gBAAU,KAAKD;AAHjB,OAND;AAYC,oDAAS,MAAM,IAAE,CAAjB,EAAoB,OAAM,0BAA1B,EAAiC,MAAK,QAAtC,EAA+C,WAAU,WAAzD,EAAqE,OAAO,EAACiC,OAAM,GAAP,EAAWC,YAAW,EAAtB,EAA5E,EAAuG,OAAOL,IAA9G,EAAoH,QAAQ,KAA5H,GAZD;AAaC,oDAAS,MAAM,IAAE,CAAjB,EAAoB,OAAM,0BAA1B,EAAiC,MAAK,cAAtC,EAAqD,OAAO,EAACI,OAAM,GAAP,EAAWC,YAAW,EAAtB,EAA5D,EAAuF,WAAU,WAAjG,EAA6G,OAAO,gBAAMpD,SAAN,GAAgB,gBAAMA,SAAtB,GAAgC8B,eAAaC,UAAjK,EAA6K,cAAc,IAA3L,EAAiM,QAAQ,KAAzM,GAbD;AAcC,oDAAS,MAAM,IAAE,CAAjB,EAAoB,OAAM,0BAA1B,EAAiC,MAAK,cAAtC,EAAqD,OAAO,EAACoB,OAAM,GAAP,EAAWC,YAAW,EAAtB,EAAyBF,WAAU,CAAC,CAApC,EAA5D,EAAoG,aAAa,EAACI,QAAO,MAAR,EAAjH,EAAmI,WAAU,UAA7I,EAAyJ,SAAS,GAAlK,EAAuK,cAAc,KAArL;AAdD,KAND;AAsBC;AAAA;AAAA,OAAM,OAAO,EAACJ,WAAU,CAAX,EAAaK,aAAY,EAAzB,EAAb;AACC;AAAA;AAAA;AACC;AAAA;AAAA,SAAK,IAAI,EAAT,EAAa,OAAM,QAAnB;AACC;AAAA;AAAA;AACE,wBAAMC,WAAN,GAAkB;AAAA;AAAA,WAAM,WAAU,eAAhB;AAAgC,uDAAS,OAAM,cAAf,EAAoB,MAAK,QAAzB;AAAhC,SAAlB,GAA6F;AAAA;AAAA,WAAM,WAAU,eAAhB;AAAgC,uDAAS,OAAM,cAAf,EAAoB,MAAK,QAAzB;AAAhC,SAD/F;AAEC,sDAAS,OAAM,cAAf,EAAoB,MAAK,QAAzB,EAAkC,QAAQ,IAA1C,EAAgD,YAAY,KAAKlD,QAAjE;AAFD;AADD;AADD;AADD;AAtBD,IAFD;AAsCA;;;;;;AAnIKjB,S,CAICoE,S,GAAY;AAClBlE,WAAS,gBAAMkE,SAAN,CAAgBC,IADP;AAElBpD,WAAS,gBAAMmD,SAAN,CAAgBC;AAFP,C;;AAiIpB,IAAMC,WAAW,SAAXA,QAAW,SAAS;;AAExB,KAAMC,SAAS,EAAf;;AAEA,KAAG,CAACpE,OAAOqE,YAAX,EAAwB;AACvBD,SAAOC,YAAP,GAAsB,SAAtB;AACA;AACD,KAAG,CAACrE,OAAOsE,WAAX,EAAuB;AACtBF,SAAOE,WAAP,GAAqB,SAArB;AACA;;AAID,QAAOF,MAAP;AACA,CAdF;;eAee,0BAAU,EAAEG,MAAM,WAAR,EAAoBJ,kBAApB,EAAV,EAAyCtE,SAAzC,C;;;;;;;;;;+BApJRA,S;;+BAqIDsE,Q","file":"index.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["import React, {Component, PropTypes} from 'react';\nimport {connect} from 'kr/Redux';\n\nimport {reduxForm,formValueSelector,initialize,change} from 'redux-form';\nimport {Actions,Store} from 'kr/Redux';\nimport {\n\tobserver\n} from 'mobx-react';\nimport {\n\tKrField,\n\tGrid,\n\tRow,\n\tCol,\n\tButton,\n\tNotify,\n\tButtonGroup,\n    Message\n\n} from 'kr-ui';\nimport State from './State';\nimport flushData from \"../LookCustomerList/State\";\n\nimport './index.less'\n@observer\n class NewIndent extends Component{\n\n\t\t\n\n\tstatic PropTypes = {\n\t\tonSubmit:React.PropTypes.func,\n\t\tonCancel:React.PropTypes.func,\n\t}\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tlet selectDatas={\n\t\t\tcommunityBaselist:[],\n\t\t\tcustomerSourceList:[],\n\t\t\tgiveupList:[],\n\t\t\tlevelList:[],\n\t\t\troundList:[],\n\t\t\tstationTypeList:[],\n\t\t\tvisitTypeList:[]\n\t\t};\n\t\t\n\t}\n\tonSubmit = (values) => {\n\t\tdelete values.cityid;\n\t\tlet listId=this.props.listId;\n\t\tlet _this=this;\n\t\tif(!values.mainbilldesc){\n\t\t\tvalues.mainbilldesc=\"\";\n\t\t}\n\t\tState.ChangeSubmitState();\n\t\tvalues.customerid=listId;\n\t\tvalues.mainbillname=State.orderName;\n\t\tStore.dispatch(Actions.callAPI('enter-order',{},values)).then(function(response) {\n\t\t\tflushData.orderList(_this.props.listId);\n         \t_this.onCancel();\n         \tsetTimeout(function(){\n         \t\tState.ChangeCanSubmitState();\n         \t},1000)\n\t\t}).catch(function(err) {\n\t\t\tMessage.error(err.message);\n\t\t});\n\t}\n\n\tonCancel = () => {\n\t\tconst {onCancel} = this.props;\n\t\tonCancel && onCancel();\n\t}\n\n\thasOfficeClick = (params) =>{\n\t\tif(params.value==\"HAS\"){\n\t\t\tState.showMatureTime();\n\t\t}else if(params.value==\"NOHAS\"){\n\t\t\tState.noShowMatureTime();\n\n\t\t}\n\t}\n\tcomponentWillReceiveProps(nextProps){\n\t\t\n\t\t\tif(typeof(nextProps.orderReady)==\"function\"){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(State.isInit){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tState.orderReady(nextProps.orderReady)\n\t}\n\tcommunityChange=(value)=>{ \n\t\tif(!value){\n\t\t\treturn;\n\t\t}\n\t\tvar community=State.orderReady.communityCity\n\t\tfor(var i=0;i<community.length;i++){\n\t\t\tif(community[i].communityName==value.label){\n\t\t\t\tStore.dispatch(change('NewIndent','cityid',community[i].cityId));\n\t\t\t\tState.cityLableChange(community[i].cityName)\n\t\t\t}\n\n\t\t}\n\t}\n\tmainbilltypeChange=(value)=>{\n\t\tState.orderName=this.props.customerName+value.label+this.props.orderCount;\n\n\t}\n\n\n\trender(){\n\t\tconst { error, handleSubmit, pristine, reset,companyName,isOpenIndent,customerName,orderCount} = this.props;\n\t\t\n\t\tlet city=State.cityLable;\n\t\t\tcity=!city?\"无\":city;\n\t\t// if(!isOpenIndent){\n\t\t// \tcity=\"无\"\n\t\t// }\n\t\treturn (\n\n\t\t\t<form className=\"m-newMerchants\" onSubmit={handleSubmit(this.onSubmit)} style={{paddingLeft:7}}>\n\t\t\t\t<div className=\"title\">\n\t\t\t\t\t\t<div><span className=\"order-new-icon\"></span><label className=\"title-text\">{companyName}</label></div>\n\t\t\t\t\t\t<div className=\"order-close\" onClick={this.onCancel}></div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div className=\"kk\" style={{marginTop:30,paddingLeft:20}}>\t\t\n\t\t\t\t\t<KrField grid={1/2} label=\"订单类型\" name=\"mainbilltype\" style={{width:262,marginLeft:15}} component=\"select\" \n\t\t\t\t\t\t\toptions={State.orderFound}\n\t\t\t\t\t\t\trequireLabel={true}\n\t\t\t\t\t\t\tonChange={this.mainbilltypeChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<KrField grid={1/2} label=\"所在社区\" name=\"communityid\" component=\"select\" style={{width:262,marginLeft:30}} \n\t\t\t\t\t\t\toptions={State.community}\n\t\t\t\t\t\t\trequireLabel={true}\n\t\t\t\t\t\t\tonChange={this.communityChange}\n\t\t\t\t\t/>\n\t\t\t\t\t\n\t\t\t\t\t<KrField grid={1/2} label=\"所在城市\" name=\"cityid\" component=\"labelText\" style={{width:262,marginLeft:15}} value={city} inline={false}/>\n\t\t\t\t\t<KrField grid={1/2} label=\"订单名称\" name=\"mainbillname\" style={{width:262,marginLeft:30}} component=\"labelText\" value={State.orderName?State.orderName:customerName+orderCount} requireLabel={true} inline={false}/>\n\t\t\t\t\t<KrField grid={1/2} label=\"订单描述\" name=\"mainbilldesc\" style={{width:555,marginLeft:15,marginTop:-5}} heightStyle={{height:\"80px\"}}  component=\"textarea\"  maxSize={100} requireLabel={false} />\n\t\t\t\t</div>\t\t\n\t\t\t\t<Grid style={{marginTop:0,marginRight:40}}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col md={12} align=\"center\">\n\t\t\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t\t\t{State.submitState?<div  className='ui-btn-center'><Button  label=\"确定\" type=\"submit\" /></div>:<div  className='ui-btn-center'><Button  label=\"确定\" type=\"button\" /></div>}\n\t\t\t\t\t\t\t\t<Button  label=\"取消\" type=\"button\" cancle={true} onTouchTap={this.onCancel} />\n\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Grid>\n\t\t\t\t\t\t\n\t\t\t\t\t\t    \n\t\t\t\t</form>\n\t\t);\n\t}\n}\nconst validate = values =>{\n\n\t\tconst errors = {};\n\n\t\tif(!values.mainbilltype){\n\t\t\terrors.mainbilltype = '请选择订单类型';\n\t\t}\n\t\tif(!values.communityid){\n\t\t\terrors.communityid = '请选择所在社区';\n\t\t}\n\t\t\n\n\t\t\n\t\treturn errors\n\t}\nexport default reduxForm({ form: 'NewIndent',validate})(NewIndent);\n"]}