{"version":3,"sources":["src/Containers/Finance/Manage/OrderBill/OrderBillDetail/ShiftBtnForm.js"],"names":["actionCreators","ShiftBtnForm","props","context","moneyShiftCheck","value","isNaN","error","renderShiftData","shiftData","map","item","index","marginBottom","marginLeft","propname","id","onCancel","bind","onSubmit","state","initialValues","flowId","initialValuesId","preCode","dispatch","values","heightStyle","width","height","handleSubmit","pristine","reset","marginTop","fiMoney","display","PropTypes","arr","object","validate","errors","operatedate","form","enableReinitialize","keepDirtyOnReinitialize"],"mappings":"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","file":"ShiftBtnForm.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import React,{Component} from 'react';\nimport { connect } from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {Actions,Store} from 'kr/Redux';\nimport * as actionCreators from 'kr-ui/../Redux/Actions';\nimport {reduxForm,formValueSelector,initialize,registerField} from 'redux-form';\nimport {\n\tTable,\n \tTableBody,\n\tTableHeader,\n\tTableHeaderColumn, \n\tTableRow,\n\tTableRowColumn,\n\tTableFooter,\n\tButton,\n\tSection,\n\tGrid,\n\tRow,\n\tCol,\n\tNotify,\n\tList,\n \tListItem,\n\tLabelText,\n\tDialog,\n\tKrField,\n\tMessage,\n\tButtonGroup\n} from 'kr-ui';\n\n\n\n\nclass ShiftBtnForm extends Component{\n\n\tstatic PropTypes = {\n\t\tshiftData:React.PropTypes.arr,\n\t\tinitialValuesId:React.PropTypes.object,\n    }\n\n\tconstructor(props,context){\n\t\tsuper(props, context);\n        this.onCancel = this.onCancel.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n\t\t  this.state = {\n\t\t\t\n\t     }\n   }\n\n\tcomponentDidMount() {\n       let initialValues={\n       \tflowId:this.props.initialValuesId.id, \n       \tpreCode:'1'\n       }\n\t   Store.dispatch(initialize('shiftBtnForm',initialValues));\n\t\t\n\t}\n    \n   \n    onSubmit(values){\n\t\t const {onSubmit} = this.props;\n\t\t onSubmit && onSubmit(values);\n\n\t }\n\n\t onCancel(){\n\t\t const {onCancel} = this.props;\t\n\t\t onCancel && onCancel();\t\t \n\t }\n\t\n    \n\t moneyShiftCheck=(value)=>{\n\t\tif(value&&isNaN(value)){\n          Message.error('金额只能为数字');\n          return ;\n\t\t}\n\t\tif(value&&value<=0){\n\t\t  Message.error('金额只能为正数');\n          return ;\t\n\t\t}\n\t} \n\n    renderShiftData=()=>{\n\n    \tlet {shiftData}=this.props;\n         return   shiftData.map((item,index)=>{\n\n\t\t\t\t    if(index%2==0){\n\t\t\t\t\t\t\treturn <KrField key={index} style={{marginBottom:5}}  grid={1/2}  right={43}  style={{marginLeft:'-14px'}} label={item.propname} component=\"input\" name={'fix'+item.id} type=\"text\" onBlur={this.moneyShiftCheck}/>\n\t\t\t\t\t\t      \t}else{\n\t\t\t\t\t\t      \t\treturn <KrField key={index} style={{marginBottom:5}}  grid={1/2}  right={43}  label={item.propname}  component=\"input\" name={'fix'+item.id} type=\"text\" onBlur={this.moneyShiftCheck}/>\n\t\t\t\t\t\t      \t}\n\n\t\t\t\t\t\t      }\n              )\n\n    }\n\n\trender(){\n\n\n\t\tlet heightStyle={\n       \t width:'546',\n       \t height:'72'\n       }\n       \n        const { error, handleSubmit, pristine, reset,initialValuesId,shiftData} = this.props;\n\t\t\n\n       \n\t\treturn(\n          <div style={{marginTop:'35px'}}>\n                 \n\t\t\t\t\t    <form onSubmit={handleSubmit(this.onSubmit)} style={{marginLeft:'30px'}}>\n \n\t\t\t\t\t\t    <KrField name=\"flowId\" type=\"hidden\"/>\n\t\t\t\t\t\t    <KrField grid={1/2} label=\"可操作金额\"  component=\"labelText\" value={initialValuesId.fiMoney} inline={false} defaultValue=\"0\"/>\n                            <KrField name=\"preCode\" grid={1/2} left={30} component=\"group\"   label=\"金额正负\" style={{marginLeft:'-45px'}} requireLabel={true}>\n\t\t\t\t                <KrField name=\"preCode\" grid={1/2} right={30} label=\"正\" component=\"radio\" type=\"radio\" value=\"0\" style={{marginTop:'4px',width:'auto',display:'inline-block'}}/>\n\t\t\t\t                <KrField name=\"preCode\"  grid={1/2} left={30}label=\"负\" component=\"radio\" type=\"radio\" value=\"1\"/>\n\t\t\t                </KrField>\n\t\t\t                <KrField type=\"date\" grid={1/2} label=\"转移日期\" right={45} name=\"operatedate\" requireLabel={true}/> \n                             \n                             {this.renderShiftData()}\n\n                             <KrField label=\"上传附件\" grid={1/2} name=\"fileids\" style={{marginLeft:-15}} component=\"file\" defaultValue={[]}/>\n                          \n                             <div style={{marginTop:-15}}><KrField label=\"备注\" grid={1}  heightStyle={heightStyle} name=\"finaflowdesc\" component=\"textarea\" type=\"text\" placeholder='请输入备注，输入字数不能超过100字' maxSize={100} lengthClass='ui-length-text'/></div>\n                           \n\n\t\t\t\t\n\t\t\t\t\t\t   <Grid style={{marginTop:0,marginBottom:5,marginLeft:-30}}>\n\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t<Col md={12} align=\"center\">\n\t\t\t\t\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t\t\t\t\t<div  className='ui-btn-center'><Button  label=\"确定\" type=\"submit\" joinEditForm/></div>\n\t\t\t\t\t\t\t\t\t\t<Button  label=\"取消\" type=\"button\" cancle={true} onTouchTap={this.onCancel} />\n\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t   \n                    </form>\n\t\t\t   </div>\n\t\t\t   \n\t\t);\n\n\t}\n\n}\n\nconst validate = values =>{\n\n\n\t\tconst errors = {}\n\t\tif(!values.operatedate){\n\t\t\terrors.operatedate = '请填写转移日期';\n\t\t}\n\t\treturn errors\n\t}\n\n\nexport default reduxForm({form:'shiftBtnForm',validate,enableReinitialize:true,keepDirtyOnReinitialize:true})(ShiftBtnForm);\n\n\n\n\n"]}