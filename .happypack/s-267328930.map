{"version":3,"sources":["src/Containers/Operation/CustomerManage/CustomerList/index.js"],"names":["CustomerList","onSetCommunity","communityId","state","props","context","allDataReady","_this","dispatch","callAPI","then","response","dataReady","catch","err","Message","error","message","allOrderReady","orderReady","searchPerson","searchParams","searchSign","searchSignParams","setState","merchants","tab","initSearch","personal","signedClient","switchSidebarNav","activeTab","color","borderBottom","fontSize","commenTab","merchantsStyle","personalStyle","signedClientStyle","inkBarStyle","background","minHeight","childContextTypes","PropTypes","func","isRequired","string"],"mappings":"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","file":"index.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["import React, {\n\tComponent,\n\tPropTypes\n} from 'react';\nimport {\n\tconnect\n} from 'kr/Redux';\nimport {\n\treduxForm,\n\tsubmitForm,\n\tchange,\n\treset\n} from 'redux-form';\nimport {\n\tobserver\n} from 'mobx-react';\nimport {\n\tActions,\n\tStore\n} from 'kr/Redux';\nimport http from 'kr/Redux/Utils/fetch';\n\nimport {\n\tTabs,\n\tTab,\n\tDialog,\n\tSection,\n\tGrid,\n\tNotify,\n\tButton,\n\tKrField,\n\tForm,\n\tLoading,\n\tBreadCrumbs,\n\tTitle\n} from 'kr-ui';\nimport './index.less'\nimport State from './State';\n//招商线索\nimport Merchants from './Merchants';\n//个人客户\nimport Personal from './Personal';\n//签约客户\nimport SignedClient from './SignedClient';\n@observer\nclass CustomerList extends Component {\n\tstatic childContextTypes = {\n\t\tonSetCommunity: React.PropTypes.func.isRequired,\n\t\tcommunityId: React.PropTypes.string.isRequired,\n\t}\n\n\tgetChildContext() {\n\t\treturn {\n\t\t\tonSetCommunity: this.onSetCommunity,\n\t\t\tcommunityId: this.state.communityId\n\t\t};\n\t}\n\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\ttab: 'table',\n\t\t\tcommunityId: '',\n\t\t\tinitSearch:''\n\t\t}\n\t\tthis.allDataReady();\n\t\tthis.allOrderReady();\n\t\tthis.searchPerson();\n\t\tthis.searchSign();\n\t}\n\n\tcomponentDidMount() {\n\t\tStore.dispatch(Actions.switchSidebarNav(true));\n\t}\n    //新建编辑的数据准备\n\tallDataReady=()=>{\n\t\tvar _this=this;\n\t    Store.dispatch(Actions.callAPI('customerDataAddList')).then(function(response) {\n         State.dataReady=response;\n\t\t}).catch(function(err) {\n\t\t\tMessage.error(err.message);\n\t\t});\n\t}\n   //订单新建编辑的数据准备\n\tallOrderReady=()=>{\n\t\tvar _this=this;\n\t    Store.dispatch(Actions.callAPI('community-city-selected')).then(function(response) {\n         State.orderReady=response;\n\t\t}).catch(function(err) {\n\t\t\tMessage.error(err.message);\n\t\t});\n\t}\n    //招商和个人的高级查询的数据准备\n\tsearchPerson=()=>{\n\t\tvar _this=this;\n       Store.dispatch(Actions.callAPI('search-conditions')).then(function(response) {\n\t\t     State.searchParams=response;\t\n\t\t\t }).catch(function(err){\n\t\t\t\t Message.error(err.message);\n\t\t\t});\n\t}\n   //签约的高级查询的数据准备\n\tsearchSign=()=>{\n\t\tvar _this=this;\n       Store.dispatch(Actions.callAPI('sign-search-conditions')).then(function(response) {\n\t\t      State.searchSignParams=response;\t\n\t\t\t }).catch(function(err){\n\t\t\t\t Message.error(err.message);\n\t\t\t});\n\t}\n\n\tonSetCommunity = (communityId) => {\n\t\tthis.setState({\n\t\t\tcommunityId\n\t\t});\n\t}\n\n\tmerchants = () => {     \n\t\tlet {\n\t\t\ttab,\n\t\t\tinitSearch\n\t\t} = this.state;\n\t\ttab = 'merchants';\n\t\tinitSearch='m';\n\t\tthis.setState({\n\t\t\ttab,\n\t\t\tinitSearch\n\t\t});\n\t}\n\n\tpersonal = () => {\n\t\tlet {\n\t\t\ttab,\n\t\t\tinitSearch\n\t\t} = this.state;\n\t\ttab = 'personal';\n\t\tinitSearch='p';\n\t\tthis.setState({\n\t\t\ttab,\n\t\t\tinitSearch\n\t\t});\n\t}\n\tsignedClient = () => {\n\t\tlet {\n\t\t\ttab,\n\t\t\tinitSearch\n\t\t} = this.state;\n\t\ttab = 'signedClient';\n\t\tinitSearch='s';\n\t\tthis.setState({\n\t\t\ttab,\n\t\t\tinitSearch\n\t\t});\n\t}\n\n\n\trender() {\n\t\tlet {\n\t\t\ttab,\n\t\t\tinitSearch\n\t\t} = this.state;\n\n\t\t\n\t\tconst activeTab = {\n\t\t\tcolor: '#2b8dcd',\n\t\t\tborderBottom: \"1px solid #eee\",\n\t\t\tfontSize:'16px'\n\t\t}\n\t\tconst commenTab = {\n\t\t\tcolor: '#666',\n\t\t\tborderBottom: \"1px solid #eee\",\n            fontSize:'16px'\n\t\t}\n\t\t\n\n\t\tlet merchantsStyle = (tab == 'merchants'||tab=='table') ? activeTab : commenTab;\n\t\tlet personalStyle = (tab == 'personal') ? activeTab : commenTab;\n\t\tlet signedClientStyle=(tab == 'signedClient')? activeTab : commenTab;\n\t\t\n\t\tconst inkBarStyle = {\n\t\t\tbackground: '-moz-linear-gradient(right, #03ec56, #499df1)',\n\t\t\tbackground: '-webkit-linear-gradient(right, #03ec56, #499df1)',\n\t\t\tbackground: '-ms-linear-gradient(right, #03ec56, #499df1)',\n\t\t\tposition: 'absolute',\n\t\t\ttop: 0,\n\t\t}\n\n\t\treturn (\n\n\t\t\t<div className=\"tab-container\" style={{minHeight:910,background:'#fff'}}>\n\t\t\t<Title value=\"客户列表\"/>\n\t\t \t\n\t\t\t<Tabs className=\"tabs\">\n\t\t\t\t\t<Tab label=\"招商线索\" onActive={this.merchants} style={merchantsStyle}>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Merchants \n\t\t\t\t\t\t\t\tdataReady={State.dataReady} \n\t\t\t\t\t\t\t\tsearchParams={State.searchParams}\n\t\t\t\t\t\t\t\tinitSearch={initSearch}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t</Tab>\n\t\t\t\t\t<Tab label=\"个人客户\"  onActive={this.personal} style={personalStyle}>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Personal \n\t\t\t\t\t\t\t\tdataReady={State.dataReady}\n\t\t\t\t\t\t\t\tsearchParams={State.searchParams}\n\t\t\t\t\t\t\t\torderReady={State.orderReady}\n\t\t\t\t\t\t\t\tinitSearch={initSearch}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t</Tab>\n\t\t\t\t\t<Tab label=\"签约客户\"  onActive={this.signedClient} style={signedClientStyle}>\n\t\t\t\t\t\t\t<SignedClient \n\t\t\t\t\t\t\t\t\tdataReady={State.dataReady}\n\t\t\t\t\t\t\t\t\tsearchSignParams={State.searchSignParams}\n\t\t\t\t\t\t\t\t\torderReady={State.orderReady}\n\t\t\t\t\t\t\t\t\tinitSearch={initSearch}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t</Tab>\n\t\t\t</Tabs>\n\n\n\t\t</div>\n\t\t);\n\t}\n}\nexport default CustomerList;\n"]}