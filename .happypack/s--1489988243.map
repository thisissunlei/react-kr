{"version":3,"sources":["src/Containers/Member/MemberManage/List/NewCreateForm.js"],"names":["NewCreateForm","props","onSubmit","values","EmailonBlur","email","foreignCodeBlur","foreignCode","state","onsubmit","onSubmitCode","onCancel","getBasicData","_this","params","communityId","companyId","dispatch","callAPI","then","response","jobList","forEach","item","index","value","id","label","jobName","setState","selectOption","catch","err","reject","onBlur","phone","open","isEmptyObject","sendMsg","warn","phoneSame","code","codes","undefined","communityText","companyText","jobId","name","community","company","error","handleSubmit","pristine","reset","marginTop","marginLeft","display","width","textAlign","height","marginBottom","onChangeSearchCommunity","requiredValue","marginRight","onChangeSearchCompany","padding","paddingRight","paddingLeft","validate","errors","test","selector","form"],"mappings":"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","file":"NewCreateForm.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["\nimport React, {Component, PropTypes} from 'react';\nimport {connect} from 'kr/Redux';\nimport {reduxForm,formValueSelector,change,initialize,arrayPush,arrayInsert,FieldArray,reset} from 'redux-form';\nimport {Actions,Store} from 'kr/Redux';\nimport {\n\tKrField,\n\tGrid,\n\tRow,\n\tCol,\n\tButton,\n\tButtonGroup,\n\tMessage,\n\tSnackTip,\n\tListGroup,\n\tListGroupItem\n} from 'kr-ui';\nimport $ from 'jquery'\nimport imgLine from './images/line.png'\n class NewCreateForm extends Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state={\n\t\t\tcommunityText:'',\n\t\t\tcompanyText:'',\n\t\t\tphoneSame:false,\n\t\t\temail:'',\n\t\t\tonsubmit:true,\n\t\t\tonSubmitCode:true,\n\t\t\tcode:'',\n\t\t}\n\t\tthis.getBasicData();\n\t\tthis.params = this.props.params;\n\t}\n\tcomponentWillMount() {\n\t\tthis.params = this.props.params;\n\t\tlet response = {\n\t\t\tphone:'',\n\t\t\tcommunityId:'',\n\t\t\tcompanyId:'',\n\t\t\temail:'',\n\t\t\tjobId:'',\n\t\t\tname:'',\n\t\t\tforeignCode:'',\n\t\t\tsendMsg:'1',\n\t\t\tforeignCode:''\n\t\t}\n\t\tStore.dispatch(initialize('NewCreateForm',response));\n\t}\n\t// 点确定提交时候如果有错误提示返回，否则提交,,如果邮箱存在有错误提示，不能提交\n\t onSubmit=(values)=>{\n\t \tthis.EmailonBlur(values.email);\n\t \tthis.foreignCodeBlur(values.foreignCode);\n\t \tlet {onsubmit,onSubmitCode} = this.state;\n\t \tif(onsubmit && onSubmitCode){\n\t\t\t// \tconsole.log('values',values);\n\t \t\tconst {onSubmit} = this.props;\n\t\t \tonSubmit && onSubmit(values);\n\t \t}\n\t }\n\t onCancel=()=>{\n\t\t const {onCancel} = this.props;\n\t\t onCancel && onCancel();\n\t }\n\t getBasicData=()=>{\n\t//  新增会员准备职位数据\n\t\t let _this =this;\n\t\tlet params = {\n\t\t\tcommunityId:'',\n\t\t\tcompanyId:'',\n\t\t}\n\t\t Store.dispatch(Actions.callAPI('getMemberBasicData',params)).then(function(response){\n\t\t\t response.jobList.forEach(function(item,index){\n\t\t\t\t item.value = item.id;\n\t\t\t\t item.label = item.jobName;\n\t\t\t });\n\t\t\t//  let memberInfoVO = {\n\t\t\t// \tcommunityId:_this.params.communityId,\n\t\t\t// \tcompanyId:_this.params.companyId\n\t\t\t// }\n\t\t\t// Store.dispatch(initialize('NewCreateForm', memberInfoVO));\n\t\t\t _this.setState({\n\t\t\t\tselectOption:response.jobList\n\t\t\t})\n\t\t }).catch(function(err){\n\t\t\t reject(err);\n\t\t });\n\t }\n\t//  输入手机号查看该手机号是否绑定\n\t onBlur=(phone)=>{\n\t\t let params = {\n\t\t\t phone :phone\n\t\t }\n\t\t this.setState({\n\t \t\topen:true,\n\t\t\tphone\n\t \t})\n\t\t let _this = this;\n\t\t Store.dispatch(Actions.callAPI('isPhoneRegistered',params)).then(function(response){\n\t\t\t//  检验response是不是空对象\n\t\t\t\tif(!$.isEmptyObject(response)){\n\t\t\t\t\tresponse.sendMsg = '1';\n\t\t\t\t\tStore.dispatch(initialize('NewCreateForm',response));\n\t\t\t\t\t// 此处要有提示\n\t\t\t\t\tMessage.warn('该手机号码已被注册！','error');\n\t\t\t\t\t_this.setState({\n\t\t\t\t\t\tphoneSame:true,\n\t\t\t\t\t\temail:response.email,\n\t\t\t\t\t\tcode:response.foreignCode\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t }).catch(function(err){\n\t\t \tlet {phoneSame} = _this.state;\n\t\t \tlet response = {\n\t\t \t\tphone:phone,\n\t\t \t\tcommunityId:'',\n\t\t\t\tcompanyId:'',\n\t\t\t\tsendMsg:'1'\n\t\t \t}\n\t\t \tif(phoneSame){\n\t\t\t\tStore.dispatch(initialize('NewCreateForm',response));\n\t\t\t\t_this.setState({\n\t\t\t\t\tphoneSame:false,\n\t\t\t\t\temail:''\n\t\t\t\t})\n\t\t \t}\n\t\t });\n\t }\n\t EmailonBlur=(phone)=>{\n\t\t let params = {\n\t\t\t email :phone\n\t\t }\n\t\t let {email,phoneSame} = this.state;\n\t\t this.setState({\n\t \t\topen:true\n\t \t})\n\t\t let _this = this;\n\t\t if(phoneSame && email == params.email){\n\t\t \t_this.setState({\n\t\t\t\tonsubmit:true\n\t\t\t})\n\t\t \treturn;\n\t\t }else{\n\t\t \tStore.dispatch(Actions.callAPI('isEmailRegistered',params)).then(function(response){\n\t\t\t\t//邮箱已注册\n\t\t\t\tMessage.warn('该邮箱已被绑定','error');\n\t\t\t\t_this.setState({\n\t\t\t\t\tonsubmit:false\n\t\t\t\t})\n\t\t\t }).catch(function(err){\n\t\t\t \t//邮箱未注册\n\t\t\t \t_this.setState({\n\t\t\t\t\tonsubmit:true\n\t\t\t\t})\n\t\t\t });\n\t\t }\n\t }\n\t foreignCodeBlur=(codes)=>{\n\t\t let params = {\n\t\t\t code :codes\n\t\t }\n\t\t let {code,phoneSame,phone} = this.state;\n\t\t let _this = this;\n\t\t this.setState({\n\t \t\topen:true\n\t \t})\n\t\t if(phoneSame && code == params.code){\n\t\t \t_this.setState({\n\t\t\t\tonSubmitCode:true\n\t\t\t})\n\t\t \treturn;\n\t\t }\n\n\t\t if(params.code !== undefined){\n\t\t\t Store.dispatch(Actions.callAPI('membersByForeignCode',params)).then(function(response){\n\t\t\t\t\t //会员卡号已注册\n\t \t\t\t\tif(response.phone !='-1'){\n\t \t\t\t\t\tMessage.warn('该会员卡号已被绑定','error');\n\t \t\t\t\t}else{\n\t \t\t\t\t\tMessage.warn('该会员卡号未录入','error');\n\t \t\t\t\t}\n\t \t\t\t\t_this.setState({\n\t \t\t\t\t\tonSubmitCode:false\n\t \t\t\t\t})\n\t\t\t }).catch(function(err){\n\t\t\t \t//会员卡号未注册\n\t\t\t \t_this.setState({\n\t\t\t\t\tonSubmitCode:true\n\t\t\t\t})\n\t\t\t });\n\t\t }\n\n\t }\n\t onChangeSearchCommunity(community) {\n\t\tlet communityId=\"\";\n\t\tif(community!==null){\n\t\t\tcommunityId = community.id;\n\t\t}\n\t\tStore.dispatch(change('NewCreateForm', 'communityId', communityId));\n\t}\n\tonChangeSearchCompany(company) {\n\t\tlet companyId=\"\";\n\t\tif(company!==null){\n\t\t\tcompanyId = company.id;\n\t\t}\n\t\tStore.dispatch(change('NewCreateForm', 'companyId', companyId));\n\t}\n\trender(){\n\t\tconst { error, handleSubmit, pristine, reset} = this.props;\n\t\tlet communityText = '';\n\t\tlet {selectOption} =this.state;\n\t\treturn (\n\t\t\t<div>\n\t\t\t<form onSubmit={handleSubmit(this.onSubmit)} style={{marginTop:20,marginLeft:'40px'}}>\n\t\t\t\t<KrField grid={1/2} name=\"phone\" type=\"text\" onBlur={this.onBlur} label=\"手机号\" requireLabel={true} style={{display:'block',width:'252px'}}/>\n\t\t\t\t<div style={{width:'100%',textAlign:'center',height:25,marginBottom:8,marginLeft:'-30px'}}>\n\t\t\t\t\t\t<img src={imgLine}/>\n\t\t\t\t</div>\n\t\t\t\t<KrField grid={1/2} name=\"communityId\" component=\"searchCommunity\" label=\"社区\" onChange={this.onChangeSearchCommunity} requireLabel={true} requiredValue={true} errors={{requiredValue:'社区为必填项'}} style={{width:'252px',marginRight:'30'}}/>\n        <KrField grid={1/2} name=\"email\" type=\"text\" label=\"邮箱\" requireLabel={true} onBlur={this.EmailonBlur} style={{width:'252px'}}/>\n\t\t\t\t<KrField grid={1/2} name=\"companyId\" component=\"searchCompany\" label=\"公司\" onChange={this.onChangeSearchCompany} requireLabel={true} requiredValue={true} errors={{requiredValue:'公司为必填项'}} style={{width:'252px',marginRight:'30'}}/>\n        <KrField name=\"jobId\"  grid={1/2} component=\"select\" label=\"职位\" options={selectOption} style={{width:'252px'}}/>\n\t\t\t\t<KrField grid={1/2} name=\"name\" type=\"text\" label=\"姓名\" requireLabel={true} requiredValue={true} errors={{requiredValue:'姓名为必填项'}} style={{width:'252px',marginRight:'30'}}/>\n\t\t\t\t<KrField grid={1/2} name=\"sendMsg\" component=\"group\" label=\"发送验证短信\"  style={{width:'252px'}} requireLabel={true} >\n\t\t\t\t\t\t<KrField name=\"sendMsg\" grid={1/2} label=\"是\" type=\"radio\" value=\"1\" style={{marginRight:'50'}}/>\n\t\t\t\t\t\t<KrField name=\"sendMsg\" grid={1/2} label=\"否\" type=\"radio\" value=\"0\" />\n              </KrField>\n        <KrField grid={1/2} name=\"foreignCode\" type=\"text\" label=\"会员卡号\" onBlur={this.foreignCodeBlur} style={{width:'252px'}} />\n\n\t\t\t\t<Grid style={{marginTop:19,marginBottom:'4px'}}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t\t<ListGroupItem style={{width:'269px',textAlign:'right',padding:0,paddingRight:15}}><Button  label=\"确定\" type=\"submit\"/></ListGroupItem>\n\t\t\t\t\t\t\t\t<ListGroupItem style={{width:'254px',textAlign:'left',padding:0,paddingLeft:15}}><Button  label=\"取消\" type=\"button\"  cancle={true} onTouchTap={this.onCancel} /></ListGroupItem>\n\t\t\t\t\t\t\t</ListGroup>\t\t\t\t\t</Row>\n\t\t\t\t</Grid>\n\t\t  </form>\n\t\t  </div>\n\t\t);\n\t}\n}\nconst validate = values => {\n\tconst errors = {}\n\tlet code = /^\\d{10}$/;\n\tlet phone = /(^((\\+86)|(86))?[1][3456789][0-9]{9}$)|(^(0\\d{2,3}-\\d{7,8})(-\\d{1,4})?$)/;\n\tlet email = /^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;\n\tif (!values.phone) {\n\t\terrors.phone = '请输入电话号码';\n\t}\n\tif (!values.communityId) {\n\t\terrors.communityId = '请输入社区名称';\n\t}\n\tif (!values.email) {\n\t\terrors.email = '请输入邮箱';\n\t}\n\tif (!values.companyId) {\n\t\terrors.companyId = '请输入公司';\n\t}\n\tif (!values.name || /^\\s+$/.test(values.name)) {\n\t\terrors.name = '请输入姓名';\n\t}\n\tif (values.email && !email.test(values.email) ) {\n      errors.email = '请输入正确邮箱';\n  }\n  if (values.phone && !phone.test(values.phone) ) {\n      errors.phone = '请输入正确电话号';\n  }\n    // if (!code.test(values.foreignCode) ) {\n    //     errors.foreignCode = '会员卡号为10位纯数字';\n    // }\n  if (!values.sendMsg ) {\n    errors.sendMsg = '请选择是否发送验证短信';\n  }\n  // if (!values.foreignCode) {\n  //     errors.foreignCode = '请输入会员卡号';\n  // }\n\tif(values.foreignCode && !code.test(values.foreignCode)){\n\t\terrors.foreignCode = '请填写10位纯数字会员卡号';\n\t}\n\treturn errors\n}\nconst selector = formValueSelector('NewCreateForm');\nexport default NewCreateForm = reduxForm({\n\tform: 'NewCreateForm',\n\tvalidate,\n})(NewCreateForm);\n"]}