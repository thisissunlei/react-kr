{"version":3,"sources":["src/Containers/Operation/CustomerManage/AgreementList/OneNewAgreement/State.js"],"names":["State","detail","ordersNames","orderList","customerName","orderCount","orderNameInit","value","_this","data","customerId","dispatch","callAPI","then","response","catch","err","Message","error","message","ordersListData","id","label","i","length","order","mainbillname","push","noContract","unshift","Notify","show","type","module","exports"],"mappings":";;AAAA;;;;AAQA;;;;AAIA,IAAIA,QAAQ,sBAAW;AACrBC,SAAO,EADc;AAErBC,cAAY,EAFS;AAGrBC,YAAU,EAHW;AAIrBC,eAAa,EAJQ;AAKrBC,aAAW;;AALU,CAAX,CAAZ;AAQA;AACAL,MAAMM,aAAN,GAAqB,kBAAO,UAASC,KAAT,EAAgB;AAC3C,KAAIC,QAAM,IAAV;AACA,KAAIC,OAAK,EAAT;AACAA,MAAKC,UAAL,GAAgBH,KAAhB;;AAEA,cAAMI,QAAN,CAAe,eAAQC,OAAR,CAAgB,0BAAhB,EAA2CH,IAA3C,CAAf,EAAiEI,IAAjE,CAAsE,UAASC,QAAT,EAAmB;AACxFN,QAAMJ,YAAN,GAAmBU,SAASV,YAA5B;AACAI,QAAMH,UAAN,GAAiBS,SAAST,UAA1B;AAEA,EAJD,EAIGU,KAJH,CAIS,UAASC,GAAT,EAAc;AACrBC,UAAQC,KAAR,CAAcF,IAAIG,OAAlB;AACD,EAND;AAOA,CAZoB,CAArB;;AAcA;AACAnB,MAAMoB,cAAN,GAAqB,kBAAO,UAASV,UAAT,EAAoBW,EAApB,EAAuB;;AAE9C,KAAIb,QAAQ,IAAZ;AACA;AACH,cAAMG,QAAN,CAAe,eAAQC,OAAR,CAAgB,cAAhB,EAAgCF,UAAhC,CAAf,EAA4DG,IAA5D,CAAiE,UAASC,QAAT,EAAmB;AACnF,MAAIQ,QAAM,EAAV;AAAA,MAAaf,QAAM,EAAnB;AACA,MAAIJ,YAAU,EAAd;AACA,OAAI,IAAIoB,IAAE,CAAV,EAAYA,IAAET,SAASX,SAAT,CAAmBqB,MAAjC,EAAwCD,GAAxC,EAA4C;AACxC,OAAIE,QAAM,EAAV;AACHA,SAAMlB,KAAN,GAAYO,SAASX,SAAT,CAAmBoB,CAAnB,EAAsBF,EAAlC;AACAI,SAAMH,KAAN,GAAYR,SAASX,SAAT,CAAmBoB,CAAnB,EAAsBG,YAAlC;AACAvB,aAAUwB,IAAV,CAAeF,KAAf;AACA;AACD,MAAIG,aAAa;AAChB,YAAS,IADO;AAEhB,YAAS;AAFO,GAAjB;AAIAzB,YAAU0B,OAAV,CAAkBD,UAAlB;AACA,8BAAiBpB,KAAjB,EAAuB,EAACL,oBAAD,EAAvB;AAGA,EAjBD,EAiBGY,KAjBH,CAiBS,UAASC,GAAT,EAAc;;AAEtBc,SAAOC,IAAP,CAAY,CAAC;AACZZ,YAASH,IAAIG,OADD;AAEZa,SAAM;AAFM,GAAD,CAAZ;AAKA,EAxBD;AAyBD,CA7BoB,CAArB;AA8BAC,OAAOC,OAAP,GAAiBlC,KAAjB;;;;;;;;+BAtDIA,K","file":"State.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import mobx, {\n\tobservable,\n\taction,\n\tasMap,\n\tcomputed,\n\textendObservable,\n\ttoJS\n} from 'mobx';\nimport {\n\tActions,\n\tStore\n} from 'kr/Redux';\nlet State = observable({\n\t\tdetail:[],\n\t\tordersNames:[],\n\t\torderList:[],\n\t\tcustomerName:\"\",\n\t\torderCount:'',\n\n});\n//获取订单名称\nState.orderNameInit= action(function(value) {\n\tvar _this=this;\n\tlet data={};\n\tdata.customerId=value;\n\n\tStore.dispatch(Actions.callAPI('get-customName-orderName',data)).then(function(response) {\n\t\t_this.customerName=response.customerName;\n\t\t_this.orderCount=response.orderCount;\n\n\t}).catch(function(err) {\n\t\t Message.error(err.message);\n\t});\t\t\n});\n\n//客户名称下拉\nState.ordersListData=action(function(customerId,id){\n\t\n\t    var _this = this;\n\t    // _this.orderList.clear();\n\t\tStore.dispatch(Actions.callAPI('orders-names', customerId)).then(function(response) {\n\t\t\tlet label=\"\",value='';\n\t\t\tlet orderList=[];\n\t\t\tfor(let i=0;i<response.orderList.length;i++){\n\t\t\t    let order={}; \n\t\t\t\torder.value=response.orderList[i].id;\n\t\t\t\torder.label=response.orderList[i].mainbillname;\n\t\t\t\torderList.push(order);\n\t\t\t}\n\t\t\tvar noContract = {\n\t\t\t\t'value': '-1',\n\t\t\t\t'label': '新建订单'\n\t\t\t}\n\t\t\torderList.unshift(noContract);\n\t\t\textendObservable(_this,{orderList});\n\t\t\t\n\n\t\t}).catch(function(err) {\n\n\t\t\tNotify.show([{\n\t\t\t\tmessage: err.message,\n\t\t\t\ttype: 'danger',\n\t\t\t}]);\n\n\t\t});\n})\nmodule.exports = State;\n"]}