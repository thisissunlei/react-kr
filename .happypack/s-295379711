'use strict';

//工位
//======================
var Station = function Station(x, y, width, height, basic, index) {

  this.index = Number(index);
  this.x = Number(x);
  this.y = Number(y);
  this.width = Number(width);
  this.height = Number(height);
  this.strokeStyle = 'red';
  this.fillStyle = '#28C288';
  this.defaultFillStyle = 'transparent';
  this.textStyle = '#499DF1';
  this.checked = false;

  //工位信息
  this.basic = basic;
  this.default = {
    x: Number(x),
    y: Number(y)
  };

  //dom
  this.dialog = {
    open: false,
    ele: null
  };
};

Station.prototype.getIndex = function () {
  return this.index;
};

Station.prototype.position = function (x, y) {

  if (arguments.length === 2) {
    this.x = Number(x) - Number(this.width / 2);
    this.y = Number(y) - Number(this.height / 2);
  }

  var position = {
    x: this.x,
    y: this.y
  };

  return position;
};

Station.prototype.reset = function (context) {
  context.clearRect(this.x, this.y, this.width, this.height);
};

Station.prototype.create = function (context) {
  this.reset(context);
  this.stroke(context);
  this.fillText(context);
};

Station.prototype.getChecked = function () {
  return this.checked;
};

Station.prototype.setChecked = function (value) {
  this.checked = value;
};

//拖拽创建
Station.prototype.dragCreate = function (context) {};

Station.prototype.stroke = function (context) {

  context.moveTo(this.x, this.y);
  context.beginPath();
  context.rect(this.x, this.y, this.width, this.height);
  //context.closePath();

  context.strokeStyle = this.strokeStyle;
  //context.stroke();

  this.fillStyle = this.defaultFillStyle;
  if (this.checked) {
    this.fillStyle = 'red';
  }

  this.fill(context);
};

//中心点
Station.prototype.centerPoint = function (context) {
  context.beginPath();
  context.arc(this.x + this.width / 2, this.y + this.height / 2, 2, 0, 2 * Math.PI);
  context.stroke();
};

Station.prototype.fillText = function (context) {
  var basic = this.basic;
  var text = basic.name;
  var measureText = context.measureText(text);

  //this.centerPoint(context);

  context.beginPath();
  context.font = "12px Verdana";
  context.fillStyle = this.textStyle;
  context.textBaseline = "middle";
  context.fillText(text, this.x + this.width / 2 - measureText.width / 2, this.y + this.height / 2);
  context.closePath();
};

//填充颜色
Station.prototype.fill = function (context) {
  context.fillStyle = this.fillStyle;
  context.fillRect(Number(this.x), Number(this.y), this.width, this.height);
};

Station.prototype.getBasicInfo = function () {
  var basic = this.basic;
  return basic;
};

Station.prototype.closeDialog = function () {
  var ele = this.dialog.ele;
  if (ele === null) {
    return;
  }
  ele.style.display = 'none';
};

Station.prototype.openDialog = function () {
  var ele = this.dialog.ele;
  if (ele === null) {
    ele = this.createDialog();
  }
  this.renderDialog();
  ele.style.display = 'block';
};

Station.prototype.renderDialog = function () {
  var basic = this.basic;
  var stationEle = this.dialog.ele;
  stationEle.innerHTML = basic.name + (this.checked ? '选中' : '未选中');
};

//工位信息
Station.prototype.createDialog = function () {

  var basic = this.getBasicInfo();

  var stationEle = document.createElement('div');
  stationEle.style.width = '200px';
  stationEle.style.height = '200px';
  stationEle.style.border = '1px solid #ddd';
  stationEle.style.borderRadius = '4px';
  stationEle.style.position = 'fixed';
  stationEle.style.top = this.y + 'px';
  stationEle.style.left = this.x + 'px';
  stationEle.style.background = '#fff';

  stationEle.innerHTML = basic.name + (this.checked ? '选中' : '未选中');

  this.dialog.ele = stationEle;

  document.body.appendChild(stationEle);

  return stationEle;
};

module.exports = Station;
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(Station, 'Station', '/Users/tmac_zc/Code/kr-admin/src/Components/PlanMap/Lib/Station.js');
}();

;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Db21wb25lbnRzL1BsYW5NYXAvTGliL1N0YXRpb24uanMiXSwibmFtZXMiOlsiU3RhdGlvbiIsIngiLCJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJiYXNpYyIsImluZGV4IiwiTnVtYmVyIiwic3Ryb2tlU3R5bGUiLCJmaWxsU3R5bGUiLCJkZWZhdWx0RmlsbFN0eWxlIiwidGV4dFN0eWxlIiwiY2hlY2tlZCIsImRlZmF1bHQiLCJkaWFsb2ciLCJvcGVuIiwiZWxlIiwicHJvdG90eXBlIiwiZ2V0SW5kZXgiLCJwb3NpdGlvbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInJlc2V0IiwiY29udGV4dCIsImNsZWFyUmVjdCIsImNyZWF0ZSIsInN0cm9rZSIsImZpbGxUZXh0IiwiZ2V0Q2hlY2tlZCIsInNldENoZWNrZWQiLCJ2YWx1ZSIsImRyYWdDcmVhdGUiLCJtb3ZlVG8iLCJiZWdpblBhdGgiLCJyZWN0IiwiZmlsbCIsImNlbnRlclBvaW50IiwiYXJjIiwiTWF0aCIsIlBJIiwidGV4dCIsIm5hbWUiLCJtZWFzdXJlVGV4dCIsImZvbnQiLCJ0ZXh0QmFzZWxpbmUiLCJjbG9zZVBhdGgiLCJmaWxsUmVjdCIsImdldEJhc2ljSW5mbyIsImNsb3NlRGlhbG9nIiwic3R5bGUiLCJkaXNwbGF5Iiwib3BlbkRpYWxvZyIsImNyZWF0ZURpYWxvZyIsInJlbmRlckRpYWxvZyIsInN0YXRpb25FbGUiLCJpbm5lckhUTUwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJib3JkZXIiLCJib3JkZXJSYWRpdXMiLCJ0b3AiLCJsZWZ0IiwiYmFja2dyb3VuZCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQ0E7QUFDQTtBQUNBLElBQUlBLFVBQVUsU0FBVkEsT0FBVSxDQUFTQyxDQUFULEVBQVdDLENBQVgsRUFBYUMsS0FBYixFQUFtQkMsTUFBbkIsRUFBMEJDLEtBQTFCLEVBQWdDQyxLQUFoQyxFQUFzQzs7QUFH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QUFJL0MsUUFBUSxLQUFLMEMsWUFBTCxFQUFaOztBQUVBLE1BQUlPLGFBQWFFLFNBQVNDLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBakI7QUFDQUgsYUFBV0wsS0FBWCxDQUFpQjlDLEtBQWpCLEdBQXlCLE9BQXpCO0FBQ0FtRCxhQUFXTCxLQUFYLENBQWlCN0MsTUFBakIsR0FBMEIsT0FBMUI7QUFDQWtELGFBQVdMLEtBQVgsQ0FBaUJTLE1BQWpCLEdBQTBCLGdCQUExQjtBQUNBSixhQUFXTCxLQUFYLENBQWlCVSxZQUFqQixHQUFnQyxLQUFoQztBQUNBTCxhQUFXTCxLQUFYLENBQWlCOUIsUUFBakIsR0FBNEIsT0FBNUI7QUFDQW1DLGFBQVdMLEtBQVgsQ0FBaUJXLEdBQWpCLEdBQXVCLEtBQUsxRCxDQUFMLEdBQU8sSUFBOUI7QUFDQW9ELGFBQVdMLEtBQVgsQ0FBaUJZLElBQWpCLEdBQXdCLEtBQUs1RCxDQUFMLEdBQU8sSUFBL0I7QUFDQXFELGFBQVdMLEtBQVgsQ0FBaUJhLFVBQWpCLEdBQThCLE1BQTlCOztBQUVBUixhQUFXQyxTQUFYLEdBQXVCbEQsTUFBTW9DLElBQU4sSUFBYyxLQUFLN0IsT0FBTCxHQUFhLElBQWIsR0FBa0IsS0FBaEMsQ0FBdkI7O0FBRUEsT0FBS0UsTUFBTCxDQUFZRSxHQUFaLEdBQWtCc0MsVUFBbEI7O0FBRUFFLFdBQVNPLElBQVQsQ0FBY0MsV0FBZCxDQUEwQlYsVUFBMUI7O0FBRUEsU0FBT0EsVUFBUDtBQUVELENBdEJEOztBQXdCQVcsT0FBT0MsT0FBUCxHQUFpQmxFLE9BQWpCOzs7Ozs7OztnQ0E1S0lBLE8iLCJmaWxlIjoiU3RhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdG1hY196Yy9Db2RlL2tyLWFkbWluIiwic291cmNlc0NvbnRlbnQiOlsiXG4vL+W3peS9jVxuLy89PT09PT09PT09PT09PT09PT09PT09XG52YXIgU3RhdGlvbiA9IGZ1bmN0aW9uKHgseSx3aWR0aCxoZWlnaHQsYmFzaWMsaW5kZXgpe1xuXG5cbiAgdGhpcy5pbmRleCA9IE51bWJlcihpbmRleCk7XG4gIHRoaXMueCA9IE51bWJlcih4KTtcbiAgdGhpcy55ID0gTnVtYmVyKHkpO1xuICB0aGlzLndpZHRoID0gTnVtYmVyKHdpZHRoKTtcbiAgdGhpcy5oZWlnaHQgPSBOdW1iZXIoaGVpZ2h0KTtcbiAgdGhpcy5zdHJva2VTdHlsZSA9ICdyZWQnO1xuICB0aGlzLmZpbGxTdHlsZSA9ICcjMjhDMjg4JztcbiAgdGhpcy5kZWZhdWx0RmlsbFN0eWxlID0gJ3RyYW5zcGFyZW50JztcbiAgdGhpcy50ZXh0U3R5bGUgPSAnIzQ5OURGMSc7XG4gIHRoaXMuY2hlY2tlZCA9IGZhbHNlO1xuXG4gIC8v5bel5L2N5L+h5oGvXG4gIHRoaXMuYmFzaWMgPSBiYXNpYztcbiAgdGhpcy5kZWZhdWx0ID0ge1xuICAgICAgeDpOdW1iZXIoeCksXG4gICAgICB5Ok51bWJlcih5KVxuICB9O1xuXG4gIC8vZG9tXG4gIHRoaXMuZGlhbG9nID0ge1xuICAgIG9wZW46ZmFsc2UsXG4gICAgZWxlOm51bGxcbiAgfTtcblxufVxuXG5TdGF0aW9uLnByb3RvdHlwZS5nZXRJbmRleCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmluZGV4O1xufVxuXG5TdGF0aW9uLnByb3RvdHlwZS5wb3NpdGlvbiA9IGZ1bmN0aW9uKHgseSl7XG5cbiAgaWYoYXJndW1lbnRzLmxlbmd0aCA9PT0gMil7XG4gICAgICB0aGlzLnggPSBOdW1iZXIoeCktTnVtYmVyKHRoaXMud2lkdGgvMik7XG4gICAgICB0aGlzLnkgPSBOdW1iZXIoeSktTnVtYmVyKHRoaXMuaGVpZ2h0LzIpO1xuICB9XG5cbiAgdmFyIHBvc2l0aW9uID0ge1xuICAgIHg6dGhpcy54LFxuICAgIHk6dGhpcy55XG4gIH07XG5cbiAgcmV0dXJuIHBvc2l0aW9uO1xufVxuXG5TdGF0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKGNvbnRleHQpe1xuICBjb250ZXh0LmNsZWFyUmVjdCh0aGlzLngsdGhpcy55LHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpO1xufVxuXG5TdGF0aW9uLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbihjb250ZXh0KXtcbiAgdGhpcy5yZXNldChjb250ZXh0KTtcbiAgdGhpcy5zdHJva2UoY29udGV4dCk7XG4gIHRoaXMuZmlsbFRleHQoY29udGV4dCk7XG59XG5cblN0YXRpb24ucHJvdG90eXBlLmdldENoZWNrZWQgPSBmdW5jdGlvbigpe1xuXHRyZXR1cm4gdGhpcy5jaGVja2VkO1xufVxuXG5TdGF0aW9uLnByb3RvdHlwZS5zZXRDaGVja2VkID0gZnVuY3Rpb24odmFsdWUpe1xuXHRcdHRoaXMuY2hlY2tlZCA9IHZhbHVlO1xufVxuXG4vL+aLluaLveWIm+W7ulxuU3RhdGlvbi5wcm90b3R5cGUuZHJhZ0NyZWF0ZSA9IGZ1bmN0aW9uKGNvbnRleHQpe1xuXG59XG5cblN0YXRpb24ucHJvdG90eXBlLnN0cm9rZSA9IGZ1bmN0aW9uKGNvbnRleHQpe1xuXG4gIGNvbnRleHQubW92ZVRvKHRoaXMueCx0aGlzLnkpO1xuICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICBjb250ZXh0LnJlY3QodGhpcy54LHRoaXMueSx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KTtcbiAgLy9jb250ZXh0LmNsb3NlUGF0aCgpO1xuXG4gIGNvbnRleHQuc3Ryb2tlU3R5bGU9dGhpcy5zdHJva2VTdHlsZTtcbiAgLy9jb250ZXh0LnN0cm9rZSgpO1xuXG4gIHRoaXMuZmlsbFN0eWxlID0gdGhpcy5kZWZhdWx0RmlsbFN0eWxlO1xuICBpZih0aGlzLmNoZWNrZWQpe1xuICAgIHRoaXMuZmlsbFN0eWxlPSdyZWQnO1xuICB9XG5cbiAgdGhpcy5maWxsKGNvbnRleHQpO1xuXG59XG5cbi8v5Lit5b+D54K5XG5TdGF0aW9uLnByb3RvdHlwZS5jZW50ZXJQb2ludCA9IGZ1bmN0aW9uKGNvbnRleHQpe1xuICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICBjb250ZXh0LmFyYyh0aGlzLngrdGhpcy53aWR0aC8yLHRoaXMueSt0aGlzLmhlaWdodC8yLDIsMCwyKk1hdGguUEkpO1xuICBjb250ZXh0LnN0cm9rZSgpO1xufVxuXG5TdGF0aW9uLnByb3RvdHlwZS5maWxsVGV4dCA9IGZ1bmN0aW9uKGNvbnRleHQpe1xuICB2YXIgYmFzaWMgPSB0aGlzLmJhc2ljO1xuICB2YXIgdGV4dCA9IGJhc2ljLm5hbWU7XG4gIHZhciBtZWFzdXJlVGV4dCA9IGNvbnRleHQubWVhc3VyZVRleHQodGV4dCk7XG5cblxuICAvL3RoaXMuY2VudGVyUG9pbnQoY29udGV4dCk7XG5cbiAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgY29udGV4dC5mb250PVwiMTJweCBWZXJkYW5hXCI7XG4gIGNvbnRleHQuZmlsbFN0eWxlID0gdGhpcy50ZXh0U3R5bGU7XG4gIGNvbnRleHQudGV4dEJhc2VsaW5lPVwibWlkZGxlXCI7XG4gIGNvbnRleHQuZmlsbFRleHQodGV4dCx0aGlzLngrdGhpcy53aWR0aC8yLW1lYXN1cmVUZXh0LndpZHRoLzIsdGhpcy55K3RoaXMuaGVpZ2h0LzIpO1xuICBjb250ZXh0LmNsb3NlUGF0aCgpO1xufVxuXG4vL+Whq+WFheminOiJslxuU3RhdGlvbi5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uKGNvbnRleHQpe1xuICBjb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuZmlsbFN0eWxlO1xuICBjb250ZXh0LmZpbGxSZWN0KE51bWJlcih0aGlzLngpLE51bWJlcih0aGlzLnkpLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpO1xufVxuXG5TdGF0aW9uLnByb3RvdHlwZS5nZXRCYXNpY0luZm8gPSBmdW5jdGlvbigpe1xuICB2YXIgYmFzaWMgPSB0aGlzLmJhc2ljO1xuICByZXR1cm4gYmFzaWM7XG59XG5cblN0YXRpb24ucHJvdG90eXBlLmNsb3NlRGlhbG9nID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgZWxlID0gdGhpcy5kaWFsb2cuZWxlO1xuICAgIGlmKGVsZSA9PT0gbnVsbCl7XG4gICAgICByZXR1cm4gO1xuICAgIH1cbiAgICBlbGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbn1cblxuU3RhdGlvbi5wcm90b3R5cGUub3BlbkRpYWxvZyA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGVsZSA9IHRoaXMuZGlhbG9nLmVsZTtcbiAgICBpZihlbGUgPT09IG51bGwpe1xuICAgICAgIGVsZSAgPSB0aGlzLmNyZWF0ZURpYWxvZygpO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlckRpYWxvZygpO1xuICAgIGVsZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbn1cblxuU3RhdGlvbi5wcm90b3R5cGUucmVuZGVyRGlhbG9nID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgYmFzaWMgPSB0aGlzLmJhc2ljO1xuICAgIHZhciBzdGF0aW9uRWxlID0gIHRoaXMuZGlhbG9nLmVsZTtcbiAgICBzdGF0aW9uRWxlLmlubmVySFRNTCA9IGJhc2ljLm5hbWUgKyAodGhpcy5jaGVja2VkPyfpgInkuK0nOifmnKrpgInkuK0nKTtcbn1cblxuLy/lt6XkvY3kv6Hmga9cblN0YXRpb24ucHJvdG90eXBlLmNyZWF0ZURpYWxvZyA9IGZ1bmN0aW9uKCl7XG5cbiAgdmFyIGJhc2ljID0gdGhpcy5nZXRCYXNpY0luZm8oKTtcblxuICB2YXIgc3RhdGlvbkVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBzdGF0aW9uRWxlLnN0eWxlLndpZHRoID0gJzIwMHB4JztcbiAgc3RhdGlvbkVsZS5zdHlsZS5oZWlnaHQgPSAnMjAwcHgnO1xuICBzdGF0aW9uRWxlLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgI2RkZCc7XG4gIHN0YXRpb25FbGUuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gIHN0YXRpb25FbGUuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICBzdGF0aW9uRWxlLnN0eWxlLnRvcCA9IHRoaXMueSsncHgnO1xuICBzdGF0aW9uRWxlLnN0eWxlLmxlZnQgPSB0aGlzLngrJ3B4JztcbiAgc3RhdGlvbkVsZS5zdHlsZS5iYWNrZ3JvdW5kID0gJyNmZmYnO1xuXG4gIHN0YXRpb25FbGUuaW5uZXJIVE1MID0gYmFzaWMubmFtZSArICh0aGlzLmNoZWNrZWQ/J+mAieS4rSc6J+acqumAieS4rScpO1xuXG4gIHRoaXMuZGlhbG9nLmVsZSA9IHN0YXRpb25FbGU7XG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdGF0aW9uRWxlKTtcblxuICByZXR1cm4gc3RhdGlvbkVsZTtcblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YXRpb247XG4iXX0=