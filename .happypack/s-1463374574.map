{"version":3,"sources":["src/Components/KrField/SearchCompanyComponent/index.js"],"names":["SearchCompanyComponent","props","onChange","bind","getOptions","input","item","value","companyText","Promise","resolve","reject","dispatch","callAPI","then","response","forEach","index","id","label","customercompany","options","catch","err","type","meta","touched","error","placeholder","children","disabled","style","requireLabel","other","name","Component","defaultProps","PropTypes","string","inline","bool"],"mappings":";;;;;;;;;AAAA;;;;AAGA;;;;AAEA;;AAGA;;;;;;;;;;;;;;IAEsBA,sB;;;AAWrB,iCAAYC,KAAZ,EAAkB;AAAA;;AAAA,8IACXA,KADW;;AAGjB,QAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,OAAhB;AACA,QAAKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBD,IAAhB,OAAlB;AAJiB;AAKjB;;;;sCAEkB;AAAA,OACbE,KADa,GACJ,KAAKJ,KADD,CACbI,KADa;AAElB;;;2BAEQC,I,EAAK;AAAA,gBACU,KAAKL,KADf;AAAA,OACRI,KADQ,UACRA,KADQ;AAAA,OACFH,QADE,UACFA,QADE;;AAEb,OAAIK,QAASD,QAAQA,KAAKC,KAAd,IAAwB,EAApC;AACAF,SAAMH,QAAN,CAAeK,KAAf;AACAL,eAAYA,SAASI,IAAT,CAAZ;AACA;;;6BACUE,W,EAAY;AACtB,UAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,iBAAMC,QAAN,CAAe,eAAQC,OAAR,CAAgB,yBAAhB,EAA0C,EAAEL,aAAYA,WAAd,EAA1C,CAAf,EAAuFM,IAAvF,CAA4F,UAASC,QAAT,EAAkB;AAC7GA,cAASC,OAAT,CAAiB,UAASV,IAAT,EAAcW,KAAd,EAAoB;AACpCX,WAAKC,KAAL,GAAaD,KAAKY,EAAlB;AACAZ,WAAKa,KAAL,GAAab,KAAKc,eAAlB;AACA,MAHD;AAIAV,aAAQ,EAACW,SAAQN,QAAT,EAAR;AACA,KAND,EAMGO,KANH,CAMS,UAASC,GAAT,EAAa;AACrBZ,YAAOY,GAAP;AACA,KARD;AASA,IAVM,CAAP;AAWA;;;2BACO;AAAA,iBACyG,KAAKtB,KAD9G;AAAA,OACDI,KADC,WACDA,KADC;AAAA,OACMc,KADN,WACMA,KADN;AAAA,OACaK,IADb,WACaA,IADb;AAAA,8BACmBC,IADnB;AAAA,OAC2BC,OAD3B,gBAC2BA,OAD3B;AAAA,OACoCC,KADpC,gBACoCA,KADpC;AAAA,OAC4CC,WAD5C,WAC4CA,WAD5C;AAAA,OACwDC,QADxD,WACwDA,QADxD;AAAA,OACiEC,QADjE,WACiEA,QADjE;AAAA,OAC0EC,KAD1E,WAC0EA,KAD1E;AAAA,OACgFC,YADhF,WACgFA,YADhF;AAAA,OACgGC,KADhG;;AAEP,UACC;AAAA;AAAA,MAAe,OAAOd,KAAtB,EAA6B,WAAWY,KAAxC,EAA+C,cAAcC,YAA7D;AACE;AACA,WAAM3B,MAAM6B,IADZ;AAEA,YAAO7B,MAAME,KAFb;AAGA,kBAAa,KAAKH,UAHlB;AAIA,gBAAW,IAJX;AAKA,mBAAa,cALb;AAMA,eAAU,KAAKF,QANf;AAOA,oBAAc,EAPd;AAQA,kBAAa0B,WARb,GADF;AAUCF,eAAWC,KAAX,IAAoB;AAAA;AAAA,OAAK,WAAU,YAAf;AAAA;AAA6B;AAAA;AAAA;AAAOA;AAAP,MAA7B;AAAA;AAAA;AAVrB,IADD;AAcA;;;;EAzDmD,gBAAMQ,S;;AAArCnC,sB,CAEdoC,Y,GAAe;AACrBR,cAAY;AADS,C;AAFD5B,sB,CAMdqC,S,GAAY;AAClBT,cAAY,gBAAMS,SAAN,CAAgBC,MADV;AAElBC,SAAO,gBAAMF,SAAN,CAAgBG;AAFL,C;kBANExC,sB;;;;;;;;+BAAAA,sB","file":"index.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["import React from 'react';\n\n\nimport ReactSelectAsync from '../../Select/Async';\n\nimport {Actions,Store} from 'kr/Redux';\n\n\nimport WrapComponent from '../WrapComponent';\n\nexport default class  SearchCompanyComponent extends React.Component {\n\n\tstatic defaultProps = {\n\t\tplaceholder:'请输入公司名称'\n\t}\n\n\tstatic PropTypes = {\n\t\tplaceholder:React.PropTypes.string,\n\t\tinline:React.PropTypes.bool\n\t}\n\n\tconstructor(props){\n\t\tsuper(props)\n\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.getOptions = this.getOptions.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tlet {input} = this.props;\n\t}\n\n\tonChange(item){\n\t\tlet {input,onChange} = this.props;\n\t\tvar value = (item && item.value) || '';\n\t\tinput.onChange(value);\n\t\tonChange && onChange(item);\n\t}\n\tgetOptions(companyText){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tStore.dispatch(Actions.callAPI('getCompanyByCompanyText',{ companyText:companyText })).then(function(response){\n\t\t\t\tresponse.forEach(function(item,index){\n\t\t\t\t\titem.value = item.id;\n\t\t\t\t\titem.label = item.customercompany;\n\t\t\t\t});\n\t\t\t\tresolve({options:response});\n\t\t\t}).catch(function(err){\n\t\t\t\treject(err);\n\t\t\t});\n\t\t});\n\t}\n\trender(){\n\t\tlet { input, label, type, meta: { touched, error },placeholder,children,disabled,style,requireLabel,...other} = this.props;\n\t\treturn (\n\t\t\t<WrapComponent label={label} wrapStyle={style} requireLabel={requireLabel}>\n\t\t\t\t\t<ReactSelectAsync\n\t\t\t\t\tname={input.name}\n\t\t\t\t\tvalue={input.value}\n\t\t\t\t\tloadOptions={this.getOptions}\n\t\t\t\t\tclearable={true}\n\t\t\t\t\tclearAllText=\"清除\"\n\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\tnoResultsText=\"\"\n\t\t\t\t\tplaceholder={placeholder}/>\n\t\t\t{touched && error && <div className=\"error-wrap\"> <span>{error}</span> </div>}\n\t\t</WrapComponent>\n\t\t);\n\t}\n}\n"]}