{"version":3,"sources":["src/Components/KrField/DoorCardComponent/index.js"],"names":["InputComponent","onChange","props","context","selectedCommunitys","sendValues","i","length","j","children","hardwareId","substring","input","componentDidMount","_this","setState","options","chooseAllCommunity","newArrayAllCommunitys","state","chooseCommunityZero","selectCommunityByCity","thisCity","nowSelectedCommunitys","map","item","index","push","addCommunity","detailCommunityInfo","reduceCommunity","reducedCommunity","location","indexOf","splice","defaultValue","Component","propTypes","PropTypes","array","string","selected","childContextTypes","func","isRequired"],"mappings":"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","file":"index.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import React from 'react';\nimport {\n\tField,\n\treduxForm\n} from 'redux-form';\nimport WrapComponent from '../WrapComponent';\nimport {stopSubmit,submit,blur,stopAsyncValidation,touch} from 'redux-form';\nimport './index.less';\nimport Left from './Left';\nimport Right from './Right';\nexport default class InputComponent extends React.Component{\n\tstatic propTypes = {\n\t\toptions:React.PropTypes.array,\n\t\tdefaultValue:React.PropTypes.string,\n\t\tselected:React.PropTypes.array\n\t}\n\tstatic childContextTypes =  {\n        onChange: React.PropTypes.func.isRequired,\n  \t}\n\tgetChildContext() {\n\t\treturn {\n\t\t\tonChange:this.onChange,\n\t\t};\n\t}\n\tconstructor(props,context){\n\t\tsuper(props,context)\n\t\tthis.state={\n\t\t\toptions:[],\n\t\t\tselectedCommunitys:[]\n\t\t}\n\t}\n\tonChange=(selectedCommunitys)=>{\n\t\tlet sendValues = \"\";\n\t\tfor(var i=0;i<selectedCommunitys.length;i++){\n\t\t\tfor(var j=0;j<selectedCommunitys[i].children.length;j++){\n\t\t\t\tsendValues = sendValues + \",\"+selectedCommunitys[i].children[j].hardwareId\n\t\t\t}\n\t\t}\n\t\tsendValues = sendValues.substring(1);\n\t\tconst {input}=this.props;\n\t\tinput.onChange(sendValues);\n\t}\n\tcomponentDidMount=()=>{\n\t\tlet _this = this;\n\t\tthis.setState({\n\t\t\toptions:_this.props.options\n\t\t})\n\t}\n\t// 添加全部社区\n\tchooseAllCommunity=(newArrayAllCommunitys)=>{\n\t\tthis.setState({\n\t\t\tselectedCommunitys :newArrayAllCommunitys\n\t\t},function(){\n\t\t\tthis.onChange(this.state.selectedCommunitys);\n\t\t})\n\t}\n\t// 去除全部社区\n\tchooseCommunityZero=()=>{\n\t\tthis.setState({\n\t\t\tselectedCommunitys:[]\n\t\t},function(){\n\t\t\tthis.onChange(this.state.selectedCommunitys);\n\t\t})\n\t}\n\t// 通过城市添加社区\n\tselectCommunityByCity=(thisCity)=>{\n\t\tlet nowSelectedCommunitys =this.state.selectedCommunitys;\n\t\tthisCity.children.map(function(item,index){\n\t\t\tfor(var i=0;i<nowSelectedCommunitys.length;i++){\n\t\t\t\tif(item == nowSelectedCommunitys[i]){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tnowSelectedCommunitys.push(item);\n\t\t})\n\t\tthis.setState({\n\t\t\tselectedCommunitys:nowSelectedCommunitys\n\t\t},function(){\n\t\t\tthis.onChange(this.state.selectedCommunitys);\n\t\t})\n\t}\n\t//点击单个社区添加\n\taddCommunity=(detailCommunityInfo)=>{\n\t\tlet nowSelectedCommunitys =this.state.selectedCommunitys;\n\t\tlet sendValues=\"\";\n\t\tfor(var i=0;i<nowSelectedCommunitys.length;i++){\n\t\t\tif(detailCommunityInfo == nowSelectedCommunitys[i]){\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tnowSelectedCommunitys.push(detailCommunityInfo);\n\t\tthis.setState({\n\t\t\tselectedCommunitys:nowSelectedCommunitys\n\t\t},function(){\n\t\t\tthis.onChange(this.state.selectedCommunitys);\n\t\t});\n\t}\n\t// 点击单个社区减少\n\treduceCommunity=(reducedCommunity)=>{\n\t\tlet nowSelectedCommunitys =this.state.selectedCommunitys;\n\t\tlet location = nowSelectedCommunitys.indexOf(reducedCommunity);\n\t\tnowSelectedCommunitys.splice(location, 1);\n\t\tthis.setState({\n\t\t\tselectedCommunitys:nowSelectedCommunitys\n\t\t},function(){\n\t\t\tthis.onChange(this.state.selectedCommunitys);\n\t\t})\n\t}\n\n\trender(){\n\t\tconst {options,defaultValue} = this.props;\n\t\tlet selectedCommunitys = this.state\n\t\treturn (\n\t\t\t\t<div className=\"ui-door-card\" value={selectedCommunitys}>\n\t\t\t\t\t<Left communitys={options} \n\t\t\t\t\t\tchooseAllCommunity={this.chooseAllCommunity} \n\t\t\t\t\t\tselectedCommunitys={this.state.selectedCommunitys}\n\t\t\t\t\t\tselectCommunityByCity={this.selectCommunityByCity}\n\t\t\t\t\t\taddCommunity={this.addCommunity}/>\n\t\t\t\t\t<Right \n\t\t\t\t\t\tselectedCommunitys={this.state.selectedCommunitys} \n\t\t\t\t\t\tchooseCommunityZero={this.chooseCommunityZero} \n\t\t\t\t\t\treduceCommunity ={this.reduceCommunity}\n\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t}\n}\n"]}