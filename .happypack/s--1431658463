'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactEventListener = require('react-event-listener');

var _reactEventListener2 = _interopRequireDefault(_reactEventListener);

var _keycode = require('keycode');

var _keycode2 = _interopRequireDefault(_keycode);

var _transitions = require('../styles/transitions');

var _transitions2 = _interopRequireDefault(_transitions);

var _CalendarActionButtons = require('./CalendarActionButtons');

var _CalendarActionButtons2 = _interopRequireDefault(_CalendarActionButtons);

var _CalendarMonth = require('./CalendarMonth');

var _CalendarMonth2 = _interopRequireDefault(_CalendarMonth);

var _CalendarYear = require('./CalendarYear');

var _CalendarYear2 = _interopRequireDefault(_CalendarYear);

var _CalendarToolbar = require('./CalendarToolbar');

var _CalendarToolbar2 = _interopRequireDefault(_CalendarToolbar);

var _DateDisplay = require('./DateDisplay');

var _DateDisplay2 = _interopRequireDefault(_DateDisplay);

var _SlideIn = require('../internal/SlideIn');

var _SlideIn2 = _interopRequireDefault(_SlideIn);

var _dateUtils = require('./dateUtils');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var daysArray = [].concat(_toConsumableArray(Array(7)));

var Calendar = function (_Component) {
  _inherits(Calendar, _Component);

  function Calendar() {
    var _ref;

    var _temp, _this, _ret;

    _classCallCheck(this, Calendar);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Calendar.__proto__ || Object.getPrototypeOf(Calendar)).call.apply(_ref, [this].concat(args))), _this), _this.state = {
      displayDate: undefined,
      displayMonthDay: true,
      selectedDate: undefined,
      transitionDirection: 'left',
      transitionEnter: true
    }, _this.handleTouchTapDay = function (event, date) {
      _this.setSelectedDate(date);
      if (_this.props.onTouchTapDay) _this.props.onTouchTapDay(event, date);
    }, _this.handleMonthChange = function (months) {
      _this.setState({
        transitionDirection: months >= 0 ? 'left' : 'right',
        displayDate: (0, _dateUtils.addMonths)(_this.state.displayDate, months)
      });
    }, _this.handleTouchTapYear = function (event, year) {
      var date = (0, _dateUtils.cloneDate)(_this.state.selectedDate);
      date.setFullYear(year);
      _this.setSelectedDate(date, event);

      console.log('----->>>');

      _this.handleTouchTapDateDisplayYear();
    }, _this.handleTouchTapDateDisplayMonthDay = function () {
      _this.setState({
        displayMonthDay: true
      });
    }, _this.handleTouchTapDateDisplayYear = function () {

      _this.setState({
        //  displayMonthDay: false,
        displayMonthDay: !_this.state.displayMonthDay
      });
    }, _this.handleWindowKeyDown = function (event) {
      if (_this.props.open) {
        switch ((0, _keycode2.default)(event)) {
          case 'up':
            if (event.altKey && event.shiftKey) {
              _this.addSelectedYears(-1);
            } else if (event.shiftKey) {
              _this.addSelectedMonths(-1);
            } else {
              _this.addSelectedDays(-7);
            }
            break;

          case 'down':
            if (event.altKey && event.shiftKey) {
              _this.addSelectedYears(1);
            } else if (event.shiftKey) {
              _this.addSelectedMonths(1);
            } else {
              _this.addSelectedDays(7);
            }
            break;

          case 'right':
            if (event.altKey && event.shiftKey) {
              _this.addSelectedYears(1);
            } else if (event.shiftKey) {
              _this.addSelectedMonths(1);
            } else {
              _this.addSelectedDays(1);
            }
            break;

          case 'left':
            if (event.altKey && event.shiftKey) {
              _this.addSelectedYears(-1);
            } else if (event.shiftKey) {
              _this.addSelectedMonths(-1);
            } else {
              _this.addSelectedDays(-1);
            }
            break;
        }
      }
    }, _temp), _possibleConstructorReturn(_this, _ret);
  }

  _createClass(Calendar, [{
    key: 'componentWillMount',
    value: function componentWillMount() {
      this.setState({
        displayDate: (0, _dateUtils.getFirstDayOfMonth)(this.props.initialDate),
        selectedDate: this.props.initialDate
      });
    }
  }, {
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      if (nextProps.initialDate !== this.props.initialDate) {
        var date = nextProps.initialDate || new Date();
        this.setState({
          displayDate: (0, _dateUtils.getFirstDayOfMonth)(date),
          selectedDate: date
        });
      }
    }
  }, {
    key: 'getSelectedDate',
    value: function getSelectedDate() {
      return this.state.selectedDate;
    }
  }, {
    key: 'isSelectedDateDisabled',
    value: function isSelectedDateDisabled() {
      if (!this.state.displayMonthDay) {
        return false;
      }

      return this.refs.calendar.isSelectedDateDisabled();
    }
  }, {
    key: 'addSelectedDays',
    value: function addSelectedDays(days) {
      this.setSelectedDate((0, _dateUtils.addDays)(this.state.selectedDate, days));
    }
  }, {
    key: 'addSelectedMonths',
    value: function addSelectedMonths(months) {
      this.setSelectedDate((0, _dateUtils.addMonths)(this.state.selectedDate, months));
    }
  }, {
    key: 'addSelectedYears',
    value: function addSelectedYears(years) {
      this.setSelectedDate((0, _dateUtils.addYears)(this.state.selectedDate, years));
    }
  }, {
    key: 'setDisplayDate',
    value: function setDisplayDate(date, newSelectedDate) {
      var newDisplayDate = (0, _dateUtils.getFirstDayOfMonth)(date);
      var direction = newDisplayDate > this.state.displayDate ? 'left' : 'right';

      if (newDisplayDate !== this.state.displayDate) {
        this.setState({
          displayDate: newDisplayDate,
          transitionDirection: direction,
          selectedDate: newSelectedDate || this.state.selectedDate
        });
      }
    }
  }, {
    key: 'setSelectedDate',
    value: function setSelectedDate(date) {
      var adjustedDate = date;
      if ((0, _dateUtils.isBeforeDate)(date, this.props.minDate)) {
        adjustedDate = this.props.minDate;
      } else if ((0, _dateUtils.isAfterDate)(date, this.props.maxDate)) {
        adjustedDate = this.props.maxDate;
      }

      var newDisplayDate = (0, _dateUtils.getFirstDayOfMonth)(adjustedDate);
      if (newDisplayDate !== this.state.displayDate) {
        this.setDisplayDate(newDisplayDate, adjustedDate);
      } else {
        this.setState({
          selectedDate: adjustedDate
        });
      }
    }
  }, {
    key: 'getToolbarInteractions',
    value: function getToolbarInteractions() {
      return {
        prevMonth: (0, _dateUtils.monthDiff)(this.state.displayDate, this.props.minDate) > 0,
        nextMonth: (0, _dateUtils.monthDiff)(this.state.displayDate, this.props.maxDate) < 0
      };
    }
  }, {
    key: 'yearSelector',
    value: function yearSelector() {
      if (!this.props.disableYearSelection) {
        return _react2.default.createElement(_CalendarYear2.default, {
          key: 'years',
          DateTimeFormat: this.props.DateTimeFormat,
          locale: this.props.locale,
          onTouchTapYear: this.handleTouchTapYear,
          selectedDate: this.state.selectedDate,
          minDate: this.props.minDate,
          maxDate: this.props.maxDate
        });
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var prepareStyles = this.context.muiTheme.prepareStyles;

      var toolbarInteractions = this.getToolbarInteractions();
      var isLandscape = this.props.mode === 'landscape';
      var calendarTextColor = this.context.muiTheme.datePicker.calendarTextColor;


      var styles = {
        root: {
          color: calendarTextColor,
          userSelect: 'none',
          width: isLandscape ? 479 : 310
        },
        calendar: {
          display: 'flex',
          flexDirection: 'column'
        },
        calendarContainer: {
          display: 'flex',
          alignContent: 'space-between',
          justifyContent: 'space-between',
          flexDirection: 'column',
          fontSize: 12,
          fontWeight: 400,
          padding: '0px 8px',
          transition: _transitions2.default.easeOut()
        },
        yearContainer: {
          display: 'flex',
          justifyContent: 'space-between',
          flexDirection: 'column',
          height: 272,
          marginTop: 10,
          overflow: 'hidden',
          width: 310
        },
        weekTitle: {
          display: 'flex',
          flexDirection: 'row',
          justifyContent: 'space-between',
          fontWeight: '500',
          height: 20,
          lineHeight: '15px',
          opacity: '0.5',
          textAlign: 'center'
        },
        weekTitleDay: {
          width: 42
        },
        transitionSlide: {
          height: 214
        }
      };

      var weekTitleDayStyle = prepareStyles(styles.weekTitleDay);

      var _props = this.props,
          minDate = _props.minDate,
          maxDate = _props.maxDate,
          cancelLabel = _props.cancelLabel,
          DateTimeFormat = _props.DateTimeFormat,
          firstDayOfWeek = _props.firstDayOfWeek,
          locale = _props.locale,
          okLabel = _props.okLabel,
          onTouchTapCancel = _props.onTouchTapCancel,
          onTouchTapOk = _props.onTouchTapOk;


      return _react2.default.createElement(
        'div',
        { style: prepareStyles(styles.root) },
        _react2.default.createElement(_reactEventListener2.default, {
          target: 'window',
          onKeyDown: this.handleWindowKeyDown
        }),
        _react2.default.createElement(
          'div',
          { style: prepareStyles(styles.calendar) },
          this.state.displayMonthDay && _react2.default.createElement(
            'div',
            { style: prepareStyles(styles.calendarContainer) },
            _react2.default.createElement(_CalendarToolbar2.default, {
              DateTimeFormat: DateTimeFormat,
              locale: locale,
              displayDate: this.state.displayDate,
              onMonthChange: this.handleMonthChange,
              prevMonth: toolbarInteractions.prevMonth,
              nextMonth: toolbarInteractions.nextMonth,
              onTouchTapYear: this.handleTouchTapDateDisplayYear
            }),
            _react2.default.createElement(
              'div',
              { style: prepareStyles(styles.weekTitle) },
              daysArray.map(function (event, i) {
                return _react2.default.createElement(
                  'span',
                  { key: i, style: weekTitleDayStyle },
                  (0, _dateUtils.localizedWeekday)(DateTimeFormat, locale, i, firstDayOfWeek)
                );
              })
            ),
            _react2.default.createElement(
              _SlideIn2.default,
              { direction: this.state.transitionDirection, style: styles.transitionSlide },
              _react2.default.createElement(_CalendarMonth2.default, {
                DateTimeFormat: DateTimeFormat,
                locale: locale,
                displayDate: this.state.displayDate,
                firstDayOfWeek: this.props.firstDayOfWeek,
                key: this.state.displayDate.toDateString(),
                minDate: minDate,
                maxDate: maxDate,
                onTouchTapDay: this.handleTouchTapDay,
                ref: 'calendar',
                selectedDate: this.state.selectedDate,
                shouldDisableDate: this.props.shouldDisableDate
              })
            )
          ),
          !this.state.displayMonthDay && _react2.default.createElement(
            'div',
            { style: prepareStyles(styles.yearContainer) },
            this.yearSelector()
          )
        )
      );
    }
  }]);

  return Calendar;
}(_react.Component);

Calendar.propTypes = {
  DateTimeFormat: _react.PropTypes.func.isRequired,
  autoOk: _react.PropTypes.bool,
  cancelLabel: _react.PropTypes.node,
  disableYearSelection: _react.PropTypes.bool,
  firstDayOfWeek: _react.PropTypes.number,
  initialDate: _react.PropTypes.object,
  locale: _react.PropTypes.string.isRequired,
  maxDate: _react.PropTypes.object,
  minDate: _react.PropTypes.object,
  mode: _react.PropTypes.oneOf(['portrait', 'landscape']),
  okLabel: _react.PropTypes.node,
  onTouchTapCancel: _react.PropTypes.func,
  onTouchTapDay: _react.PropTypes.func,
  onTouchTapOk: _react.PropTypes.func,
  open: _react.PropTypes.bool,
  shouldDisableDate: _react.PropTypes.func
};
Calendar.defaultProps = {
  DateTimeFormat: _dateUtils.dateTimeFormat,
  disableYearSelection: false,
  initialDate: new Date(),
  locale: 'en-US',
  minDate: (0, _dateUtils.addYears)(new Date(), -100),
  maxDate: (0, _dateUtils.addYears)(new Date(), 100)
};
Calendar.contextTypes = {
  muiTheme: _react.PropTypes.object.isRequired
};
var _default = Calendar;
exports.default = _default;
;

var _temp2 = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(daysArray, 'daysArray', '/Users/liuyihao/Code/kr-admin/src/Components/DatePicker/DatePicker/Calendar.js');

  __REACT_HOT_LOADER__.register(Calendar, 'Calendar', '/Users/liuyihao/Code/kr-admin/src/Components/DatePicker/DatePicker/Calendar.js');

  __REACT_HOT_LOADER__.register(_default, 'default', '/Users/liuyihao/Code/kr-admin/src/Components/DatePicker/DatePicker/Calendar.js');
}();

;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Db21wb25lbnRzL0RhdGVQaWNrZXIvRGF0ZVBpY2tlci9DYWxlbmRhci5qcyJdLCJuYW1lcyI6WyJkYXlzQXJyYXkiLCJBcnJheSIsIkNhbGVuZGFyIiwic3RhdGUiLCJkaXNwbGF5RGF0ZSIsInVuZGVmaW5lZCIsImRpc3BsYXlNb250aERheSIsInNlbGVjdGVkRGF0ZSIsInRyYW5zaXRpb25EaXJlY3Rpb24iLCJ0cmFuc2l0aW9uRW50ZXIiLCJoYW5kbGVUb3VjaFRhcERheSIsImV2ZW50IiwiZGF0ZSIsInNldFNlbGVjdGVkRGF0ZSIsInByb3BzIiwib25Ub3VjaFRhcERheSIsImhhbmRsZU1vbnRoQ2hhbmdlIiwibW9udGhzIiwic2V0U3RhdGUiLCJoYW5kbGVUb3VjaFRhcFllYXIiLCJ5ZWFyIiwic2V0RnVsbFllYXIiLCJjb25zb2xlIiwibG9nIiwiaGFuZGxlVG91Y2hUYXBEYXRlRGlzcGxheVllYXIiLCJoYW5kbGVUb3VjaFRhcERhdGVEaXNwbGF5TW9udGhEYXkiLCJoYW5kbGVXaW5kb3dLZXlEb3duIiwib3BlbiIsImFsdEtleSIsInNoaWZ0S2V5IiwiYWRkU2VsZWN0ZWRZZWFycyIsImFkZFNlbGVjdGVkTW9udGhzIiwiYWRkU2VsZWN0ZWREYXlzIiwiaW5pdGlhbERhdGUiLCJuZXh0UHJvcHMiLCJEYXRlIiwicmVmcyIsImNhbGVuZGFyIiwiaXNTZWxlY3RlZERhdGVEaXNhYmxlZCIsImRheXMiLCJ5ZWFycyIsIm5ld1NlbGVjdGVkRGF0ZSIsIm5ld0Rpc3BsYXlEYXRlIiwiZGlyZWN0aW9uIiwiYWRqdXN0ZWREYXRlIiwibWluRGF0ZSIsIm1heERhdGUiLCJzZXREaXNwbGF5RGF0ZSIsInByZXZNb250aCIsIm5leHRNb250aCIsImRpc2FibGVZZWFyU2VsZWN0aW9uIiwiRGF0ZVRpbWVGb3JtYXQiLCJsb2NhbGUiLCJwcmVwYXJlU3R5bGVzIiwiY29udGV4dCIsIm11aVRoZW1lIiwidG9vbGJhckludGVyYWN0aW9ucyIsImdldFRvb2xiYXJJbnRlcmFjdGlvbnMiLCJpc0xhbmRzY2FwZSIsIm1vZGUiLCJjYWxlbmRhclRleHRDb2xvciIsImRhdGVQaWNrZXIiLCJzdHlsZXMiLCJyb290IiwiY29sb3IiLCJ1c2VyU2VsZWN0Iiwid2lkdGgiLCJkaXNwbGF5IiwiZmxleERpcmVjdGlvbiIsImNhbGVuZGFyQ29udGFpbmVyIiwiYWxpZ25Db250ZW50IiwianVzdGlmeUNvbnRlbnQiLCJmb250U2l6ZSIsImZvbnRXZWlnaHQiLCJwYWRkaW5nIiwidHJhbnNpdGlvbiIsImVhc2VPdXQiLCJ5ZWFyQ29udGFpbmVyIiwiaGVpZ2h0IiwibWFyZ2luVG9wIiwib3ZlcmZsb3ciLCJ3ZWVrVGl0bGUiLCJsaW5lSGVpZ2h0Iiwib3BhY2l0eSIsInRleHRBbGlnbiIsIndlZWtUaXRsZURheSIsInRyYW5zaXRpb25TbGlkZSIsIndlZWtUaXRsZURheVN0eWxlIiwiY2FuY2VsTGFiZWwiLCJmaXJzdERheU9mV2VlayIsIm9rTGFiZWwiLCJvblRvdWNoVGFwQ2FuY2VsIiwib25Ub3VjaFRhcE9rIiwibWFwIiwiaSIsInRvRGF0ZVN0cmluZyIsInNob3VsZERpc2FibGVEYXRlIiwieWVhclNlbGVjdG9yIiwicHJvcFR5cGVzIiwiZnVuYyIsImlzUmVxdWlyZWQiLCJhdXRvT2siLCJib29sIiwibm9kZSIsIm51bWJlciIsIm9iamVjdCIsInN0cmluZyIsIm9uZU9mIiwiZGVmYXVsdFByb3BzIiwiY29udGV4dFR5cGVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUE7Ozs7Ozs7Ozs7OztBQWFBLElBQU1BLHlDQUFnQkMsTUFBTSxDQUFOLENBQWhCLEVBQU47O0lBRU1DLFE7Ozs7Ozs7Ozs7Ozs7OzBMQWlDSkMsSyxHQUFRO0FBQ05DLG1CQUFhQyxTQURQO0FBRU5DLHVCQUFpQixJQUZYO0FBR05DLG9CQUFjRixT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LFE7Ozs7Ozs7OztnQ0F6WFRGLFM7O2dDQUVBRSxRIiwiZmlsZSI6IkNhbGVuZGFyLmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9saXV5aWhhby9Db2RlL2tyLWFkbWluIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50LCBQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBFdmVudExpc3RlbmVyIGZyb20gJ3JlYWN0LWV2ZW50LWxpc3RlbmVyJztcbmltcG9ydCBrZXljb2RlIGZyb20gJ2tleWNvZGUnO1xuaW1wb3J0IHRyYW5zaXRpb25zIGZyb20gJy4uL3N0eWxlcy90cmFuc2l0aW9ucyc7XG5pbXBvcnQgQ2FsZW5kYXJBY3Rpb25CdXR0b25zIGZyb20gJy4vQ2FsZW5kYXJBY3Rpb25CdXR0b25zJztcbmltcG9ydCBDYWxlbmRhck1vbnRoIGZyb20gJy4vQ2FsZW5kYXJNb250aCc7XG5pbXBvcnQgQ2FsZW5kYXJZZWFyIGZyb20gJy4vQ2FsZW5kYXJZZWFyJztcbmltcG9ydCBDYWxlbmRhclRvb2xiYXIgZnJvbSAnLi9DYWxlbmRhclRvb2xiYXInO1xuaW1wb3J0IERhdGVEaXNwbGF5IGZyb20gJy4vRGF0ZURpc3BsYXknO1xuaW1wb3J0IFNsaWRlSW5UcmFuc2l0aW9uR3JvdXAgZnJvbSAnLi4vaW50ZXJuYWwvU2xpZGVJbic7XG5cbmltcG9ydCB7XG4gIGFkZERheXMsXG4gIGFkZE1vbnRocyxcbiAgYWRkWWVhcnMsXG4gIGNsb25lRGF0ZSxcbiAgZGF0ZVRpbWVGb3JtYXQsXG4gIGlzQWZ0ZXJEYXRlLFxuICBpc0JlZm9yZURhdGUsXG4gIGdldEZpcnN0RGF5T2ZNb250aCxcbiAgbG9jYWxpemVkV2Vla2RheSxcbiAgbW9udGhEaWZmLFxufSBmcm9tICcuL2RhdGVVdGlscyc7XG5cbmNvbnN0IGRheXNBcnJheSA9IFsuLi5BcnJheSg3KV07XG5cbmNsYXNzIENhbGVuZGFyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBEYXRlVGltZUZvcm1hdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBhdXRvT2s6IFByb3BUeXBlcy5ib29sLFxuICAgIGNhbmNlbExhYmVsOiBQcm9wVHlwZXMubm9kZSxcbiAgICBkaXNhYmxlWWVhclNlbGVjdGlvbjogUHJvcFR5cGVzLmJvb2wsXG4gICAgZmlyc3REYXlPZldlZWs6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgaW5pdGlhbERhdGU6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgbG9jYWxlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgbWF4RGF0ZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICBtaW5EYXRlOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIG1vZGU6IFByb3BUeXBlcy5vbmVPZihbJ3BvcnRyYWl0JywgJ2xhbmRzY2FwZSddKSxcbiAgICBva0xhYmVsOiBQcm9wVHlwZXMubm9kZSxcbiAgICBvblRvdWNoVGFwQ2FuY2VsOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblRvdWNoVGFwRGF5OiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblRvdWNoVGFwT2s6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9wZW46IFByb3BUeXBlcy5ib29sLFxuICAgIHNob3VsZERpc2FibGVEYXRlOiBQcm9wVHlwZXMuZnVuYyxcbiAgfTtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIERhdGVUaW1lRm9ybWF0OiBkYXRlVGltZUZvcm1hdCxcbiAgICBkaXNhYmxlWWVhclNlbGVjdGlvbjogZmFsc2UsXG4gICAgaW5pdGlhbERhdGU6IG5ldyBEYXRlKCksXG4gICAgbG9jYWxlOiAnZW4tVVMnLFxuICAgIG1pbkRhdGU6IGFkZFllYXJzKG5ldyBEYXRlKCksIC0xMDApLFxuICAgIG1heERhdGU6IGFkZFllYXJzKG5ldyBEYXRlKCksIDEwMCksXG4gIH07XG5cbiAgc3RhdGljIGNvbnRleHRUeXBlcyA9IHtcbiAgICBtdWlUaGVtZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICB9O1xuXG4gIHN0YXRlID0ge1xuICAgIGRpc3BsYXlEYXRlOiB1bmRlZmluZWQsXG4gICAgZGlzcGxheU1vbnRoRGF5OiB0cnVlLFxuICAgIHNlbGVjdGVkRGF0ZTogdW5kZWZpbmVkLFxuICAgIHRyYW5zaXRpb25EaXJlY3Rpb246ICdsZWZ0JyxcbiAgICB0cmFuc2l0aW9uRW50ZXI6IHRydWUsXG4gIH07XG5cbiAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZGlzcGxheURhdGU6IGdldEZpcnN0RGF5T2ZNb250aCh0aGlzLnByb3BzLmluaXRpYWxEYXRlKSxcbiAgICAgIHNlbGVjdGVkRGF0ZTogdGhpcy5wcm9wcy5pbml0aWFsRGF0ZSxcbiAgICB9KTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgaWYgKG5leHRQcm9wcy5pbml0aWFsRGF0ZSAhPT0gdGhpcy5wcm9wcy5pbml0aWFsRGF0ZSkge1xuICAgICAgY29uc3QgZGF0ZSA9IG5leHRQcm9wcy5pbml0aWFsRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGRpc3BsYXlEYXRlOiBnZXRGaXJzdERheU9mTW9udGgoZGF0ZSksXG4gICAgICAgIHNlbGVjdGVkRGF0ZTogZGF0ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldFNlbGVjdGVkRGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5zZWxlY3RlZERhdGU7XG4gIH1cblxuICBpc1NlbGVjdGVkRGF0ZURpc2FibGVkKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5kaXNwbGF5TW9udGhEYXkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZWZzLmNhbGVuZGFyLmlzU2VsZWN0ZWREYXRlRGlzYWJsZWQoKTtcbiAgfVxuXG4gIGFkZFNlbGVjdGVkRGF5cyhkYXlzKSB7XG4gICAgdGhpcy5zZXRTZWxlY3RlZERhdGUoYWRkRGF5cyh0aGlzLnN0YXRlLnNlbGVjdGVkRGF0ZSwgZGF5cykpO1xuICB9XG5cbiAgYWRkU2VsZWN0ZWRNb250aHMobW9udGhzKSB7XG4gICAgdGhpcy5zZXRTZWxlY3RlZERhdGUoYWRkTW9udGhzKHRoaXMuc3RhdGUuc2VsZWN0ZWREYXRlLCBtb250aHMpKTtcbiAgfVxuXG4gIGFkZFNlbGVjdGVkWWVhcnMoeWVhcnMpIHtcbiAgICB0aGlzLnNldFNlbGVjdGVkRGF0ZShhZGRZZWFycyh0aGlzLnN0YXRlLnNlbGVjdGVkRGF0ZSwgeWVhcnMpKTtcbiAgfVxuXG4gIHNldERpc3BsYXlEYXRlKGRhdGUsIG5ld1NlbGVjdGVkRGF0ZSkge1xuICAgIGNvbnN0IG5ld0Rpc3BsYXlEYXRlID0gZ2V0Rmlyc3REYXlPZk1vbnRoKGRhdGUpO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IG5ld0Rpc3BsYXlEYXRlID4gdGhpcy5zdGF0ZS5kaXNwbGF5RGF0ZSA/ICdsZWZ0JyA6ICdyaWdodCc7XG5cbiAgICBpZiAobmV3RGlzcGxheURhdGUgIT09IHRoaXMuc3RhdGUuZGlzcGxheURhdGUpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBkaXNwbGF5RGF0ZTogbmV3RGlzcGxheURhdGUsXG4gICAgICAgIHRyYW5zaXRpb25EaXJlY3Rpb246IGRpcmVjdGlvbixcbiAgICAgICAgc2VsZWN0ZWREYXRlOiBuZXdTZWxlY3RlZERhdGUgfHwgdGhpcy5zdGF0ZS5zZWxlY3RlZERhdGUsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzZXRTZWxlY3RlZERhdGUoZGF0ZSkge1xuICAgIGxldCBhZGp1c3RlZERhdGUgPSBkYXRlO1xuICAgIGlmIChpc0JlZm9yZURhdGUoZGF0ZSwgdGhpcy5wcm9wcy5taW5EYXRlKSkge1xuICAgICAgYWRqdXN0ZWREYXRlID0gdGhpcy5wcm9wcy5taW5EYXRlO1xuICAgIH0gZWxzZSBpZiAoaXNBZnRlckRhdGUoZGF0ZSwgdGhpcy5wcm9wcy5tYXhEYXRlKSkge1xuICAgICAgYWRqdXN0ZWREYXRlID0gdGhpcy5wcm9wcy5tYXhEYXRlO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld0Rpc3BsYXlEYXRlID0gZ2V0Rmlyc3REYXlPZk1vbnRoKGFkanVzdGVkRGF0ZSk7XG4gICAgaWYgKG5ld0Rpc3BsYXlEYXRlICE9PSB0aGlzLnN0YXRlLmRpc3BsYXlEYXRlKSB7XG4gICAgICB0aGlzLnNldERpc3BsYXlEYXRlKG5ld0Rpc3BsYXlEYXRlLCBhZGp1c3RlZERhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc2VsZWN0ZWREYXRlOiBhZGp1c3RlZERhdGUsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVUb3VjaFRhcERheSA9IChldmVudCwgZGF0ZSkgPT4ge1xuICAgIHRoaXMuc2V0U2VsZWN0ZWREYXRlKGRhdGUpO1xuICAgIGlmICh0aGlzLnByb3BzLm9uVG91Y2hUYXBEYXkpIHRoaXMucHJvcHMub25Ub3VjaFRhcERheShldmVudCwgZGF0ZSk7XG4gIH07XG5cbiAgaGFuZGxlTW9udGhDaGFuZ2UgPSAobW9udGhzKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB0cmFuc2l0aW9uRGlyZWN0aW9uOiBtb250aHMgPj0gMCA/ICdsZWZ0JyA6ICdyaWdodCcsXG4gICAgICBkaXNwbGF5RGF0ZTogYWRkTW9udGhzKHRoaXMuc3RhdGUuZGlzcGxheURhdGUsIG1vbnRocyksXG4gICAgfSk7XG4gIH07XG5cbiAgaGFuZGxlVG91Y2hUYXBZZWFyID0gKGV2ZW50LCB5ZWFyKSA9PiB7XG4gICAgY29uc3QgZGF0ZSA9IGNsb25lRGF0ZSh0aGlzLnN0YXRlLnNlbGVjdGVkRGF0ZSk7XG4gICAgZGF0ZS5zZXRGdWxsWWVhcih5ZWFyKTtcbiAgICB0aGlzLnNldFNlbGVjdGVkRGF0ZShkYXRlLCBldmVudCk7XG5cbiAgICBjb25zb2xlLmxvZygnLS0tLS0+Pj4nKVxuXG4gICAgdGhpcy5oYW5kbGVUb3VjaFRhcERhdGVEaXNwbGF5WWVhcigpO1xuICB9O1xuXG4gIGdldFRvb2xiYXJJbnRlcmFjdGlvbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByZXZNb250aDogbW9udGhEaWZmKHRoaXMuc3RhdGUuZGlzcGxheURhdGUsIHRoaXMucHJvcHMubWluRGF0ZSkgPiAwLFxuICAgICAgbmV4dE1vbnRoOiBtb250aERpZmYodGhpcy5zdGF0ZS5kaXNwbGF5RGF0ZSwgdGhpcy5wcm9wcy5tYXhEYXRlKSA8IDAsXG4gICAgfTtcbiAgfVxuXG4gIGhhbmRsZVRvdWNoVGFwRGF0ZURpc3BsYXlNb250aERheSA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRpc3BsYXlNb250aERheTogdHJ1ZSxcbiAgICB9KTtcbiAgfTtcblxuICBoYW5kbGVUb3VjaFRhcERhdGVEaXNwbGF5WWVhciA9ICgpID0+IHtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgIC8vICBkaXNwbGF5TW9udGhEYXk6IGZhbHNlLFxuICAgICAgICBkaXNwbGF5TW9udGhEYXk6IXRoaXMuc3RhdGUuZGlzcGxheU1vbnRoRGF5XG4gICAgfSk7XG4gIH07XG5cbiAgaGFuZGxlV2luZG93S2V5RG93biA9IChldmVudCkgPT4ge1xuICAgIGlmICh0aGlzLnByb3BzLm9wZW4pIHtcbiAgICAgIHN3aXRjaCAoa2V5Y29kZShldmVudCkpIHtcbiAgICAgICAgY2FzZSAndXAnOlxuICAgICAgICAgIGlmIChldmVudC5hbHRLZXkgJiYgZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0ZWRZZWFycygtMSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgdGhpcy5hZGRTZWxlY3RlZE1vbnRocygtMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0ZWREYXlzKC03KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnZG93bic6XG4gICAgICAgICAgaWYgKGV2ZW50LmFsdEtleSAmJiBldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgdGhpcy5hZGRTZWxlY3RlZFllYXJzKDEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0ZWRNb250aHMoMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0ZWREYXlzKDcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgaWYgKGV2ZW50LmFsdEtleSAmJiBldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgdGhpcy5hZGRTZWxlY3RlZFllYXJzKDEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0ZWRNb250aHMoMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0ZWREYXlzKDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICBpZiAoZXZlbnQuYWx0S2V5ICYmIGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICB0aGlzLmFkZFNlbGVjdGVkWWVhcnMoLTEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0ZWRNb250aHMoLTEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFkZFNlbGVjdGVkRGF5cygtMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB5ZWFyU2VsZWN0b3IoKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmRpc2FibGVZZWFyU2VsZWN0aW9uKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8Q2FsZW5kYXJZZWFyXG4gICAgICAgICAga2V5PVwieWVhcnNcIlxuICAgICAgICAgIERhdGVUaW1lRm9ybWF0PXt0aGlzLnByb3BzLkRhdGVUaW1lRm9ybWF0fVxuICAgICAgICAgIGxvY2FsZT17dGhpcy5wcm9wcy5sb2NhbGV9XG4gICAgICAgICAgb25Ub3VjaFRhcFllYXI9e3RoaXMuaGFuZGxlVG91Y2hUYXBZZWFyfVxuICAgICAgICAgIHNlbGVjdGVkRGF0ZT17dGhpcy5zdGF0ZS5zZWxlY3RlZERhdGV9XG4gICAgICAgICAgbWluRGF0ZT17dGhpcy5wcm9wcy5taW5EYXRlfVxuICAgICAgICAgIG1heERhdGU9e3RoaXMucHJvcHMubWF4RGF0ZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtwcmVwYXJlU3R5bGVzfSA9IHRoaXMuY29udGV4dC5tdWlUaGVtZTtcbiAgICBjb25zdCB0b29sYmFySW50ZXJhY3Rpb25zID0gdGhpcy5nZXRUb29sYmFySW50ZXJhY3Rpb25zKCk7XG4gICAgY29uc3QgaXNMYW5kc2NhcGUgPSB0aGlzLnByb3BzLm1vZGUgPT09ICdsYW5kc2NhcGUnO1xuICAgIGNvbnN0IHtjYWxlbmRhclRleHRDb2xvcn0gPSB0aGlzLmNvbnRleHQubXVpVGhlbWUuZGF0ZVBpY2tlcjtcblxuICAgIGNvbnN0IHN0eWxlcyA9IHtcbiAgICAgIHJvb3Q6IHtcbiAgICAgICAgY29sb3I6IGNhbGVuZGFyVGV4dENvbG9yLFxuICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAgIHdpZHRoOiBpc0xhbmRzY2FwZSA/IDQ3OSA6IDMxMCxcbiAgICAgIH0sXG4gICAgICBjYWxlbmRhcjoge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgfSxcbiAgICAgIGNhbGVuZGFyQ29udGFpbmVyOiB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgYWxpZ25Db250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICBmb250U2l6ZTogMTIsXG4gICAgICAgIGZvbnRXZWlnaHQ6IDQwMCxcbiAgICAgICAgcGFkZGluZzogJzBweCA4cHgnLFxuICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9ucy5lYXNlT3V0KCksXG4gICAgICB9LFxuICAgICAgeWVhckNvbnRhaW5lcjoge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICBoZWlnaHQ6IDI3MixcbiAgICAgICAgbWFyZ2luVG9wOiAxMCxcbiAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICB3aWR0aDogMzEwLFxuICAgICAgfSxcbiAgICAgIHdlZWtUaXRsZToge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxuICAgICAgICBmb250V2VpZ2h0OiAnNTAwJyxcbiAgICAgICAgaGVpZ2h0OiAyMCxcbiAgICAgICAgbGluZUhlaWdodDogJzE1cHgnLFxuICAgICAgICBvcGFjaXR5OiAnMC41JyxcbiAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICAgIH0sXG4gICAgICB3ZWVrVGl0bGVEYXk6IHtcbiAgICAgICAgd2lkdGg6IDQyLFxuICAgICAgfSxcbiAgICAgIHRyYW5zaXRpb25TbGlkZToge1xuICAgICAgICBoZWlnaHQ6IDIxNCxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIGNvbnN0IHdlZWtUaXRsZURheVN0eWxlID0gcHJlcGFyZVN0eWxlcyhzdHlsZXMud2Vla1RpdGxlRGF5KTtcblxuICAgIGNvbnN0IHtcbiAgICAgIG1pbkRhdGUsXG4gICAgICBtYXhEYXRlLFxuICAgICAgY2FuY2VsTGFiZWwsXG4gICAgICBEYXRlVGltZUZvcm1hdCxcbiAgICAgIGZpcnN0RGF5T2ZXZWVrLFxuICAgICAgbG9jYWxlLFxuICAgICAgb2tMYWJlbCxcbiAgICAgIG9uVG91Y2hUYXBDYW5jZWwsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAgIG9uVG91Y2hUYXBPaywgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgc3R5bGU9e3ByZXBhcmVTdHlsZXMoc3R5bGVzLnJvb3QpfT5cbiAgICAgICAgPEV2ZW50TGlzdGVuZXJcbiAgICAgICAgICB0YXJnZXQ9XCJ3aW5kb3dcIlxuICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5oYW5kbGVXaW5kb3dLZXlEb3dufVxuICAgICAgICAvPlxuXG4gICAgICAgIHsvKlxuXG4gICAgICAgIDxEYXRlRGlzcGxheVxuICAgICAgICAgIERhdGVUaW1lRm9ybWF0PXtEYXRlVGltZUZvcm1hdH1cbiAgICAgICAgICBkaXNhYmxlWWVhclNlbGVjdGlvbj17dGhpcy5wcm9wcy5kaXNhYmxlWWVhclNlbGVjdGlvbn1cbiAgICAgICAgICBvblRvdWNoVGFwTW9udGhEYXk9e3RoaXMuaGFuZGxlVG91Y2hUYXBEYXRlRGlzcGxheU1vbnRoRGF5fVxuICAgICAgICAgIG9uVG91Y2hUYXBZZWFyPXt0aGlzLmhhbmRsZVRvdWNoVGFwRGF0ZURpc3BsYXlZZWFyfVxuICAgICAgICAgIGxvY2FsZT17bG9jYWxlfVxuICAgICAgICAgIG1vbnRoRGF5U2VsZWN0ZWQ9e3RoaXMuc3RhdGUuZGlzcGxheU1vbnRoRGF5fVxuICAgICAgICAgIG1vZGU9e3RoaXMucHJvcHMubW9kZX1cbiAgICAgICAgICBzZWxlY3RlZERhdGU9e3RoaXMuc3RhdGUuc2VsZWN0ZWREYXRlfVxuICAgICAgICAvPlxuXG4gICAgICAgICAgKi99XG5cbiAgICAgICAgPGRpdiBzdHlsZT17cHJlcGFyZVN0eWxlcyhzdHlsZXMuY2FsZW5kYXIpfT5cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5kaXNwbGF5TW9udGhEYXkgJiZcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ByZXBhcmVTdHlsZXMoc3R5bGVzLmNhbGVuZGFyQ29udGFpbmVyKX0+XG4gICAgICAgICAgICB7LypcbiAgICAgICAgICAgICAgPENhbGVuZGFyVG9vbGJhclxuICAgICAgICAgICAgICAgIERhdGVUaW1lRm9ybWF0PXtEYXRlVGltZUZvcm1hdH1cbiAgICAgICAgICAgICAgICBsb2NhbGU9e2xvY2FsZX1cbiAgICAgICAgICAgICAgICBkaXNwbGF5RGF0ZT17dGhpcy5zdGF0ZS5kaXNwbGF5RGF0ZX1cbiAgICAgICAgICAgICAgICBvbk1vbnRoQ2hhbmdlPXt0aGlzLmhhbmRsZU1vbnRoQ2hhbmdlfVxuICAgICAgICAgICAgICAgIHByZXZNb250aD17dG9vbGJhckludGVyYWN0aW9ucy5wcmV2TW9udGh9XG4gICAgICAgICAgICAgICAgbmV4dE1vbnRoPXt0b29sYmFySW50ZXJhY3Rpb25zLm5leHRNb250aH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKi99XG4gICAgICAgICAgICAgIDxDYWxlbmRhclRvb2xiYXJcbiAgICAgICAgICAgICAgICBEYXRlVGltZUZvcm1hdD17RGF0ZVRpbWVGb3JtYXR9XG4gICAgICAgICAgICAgICAgbG9jYWxlPXtsb2NhbGV9XG4gICAgICAgICAgICAgICAgZGlzcGxheURhdGU9e3RoaXMuc3RhdGUuZGlzcGxheURhdGV9XG4gICAgICAgICAgICAgICAgb25Nb250aENoYW5nZT17dGhpcy5oYW5kbGVNb250aENoYW5nZX1cbiAgICAgICAgICAgICAgICBwcmV2TW9udGg9e3Rvb2xiYXJJbnRlcmFjdGlvbnMucHJldk1vbnRofVxuICAgICAgICAgICAgICAgIG5leHRNb250aD17dG9vbGJhckludGVyYWN0aW9ucy5uZXh0TW9udGh9XG4gICAgICAgICAgICAgICAgb25Ub3VjaFRhcFllYXI9e3RoaXMuaGFuZGxlVG91Y2hUYXBEYXRlRGlzcGxheVllYXJ9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ByZXBhcmVTdHlsZXMoc3R5bGVzLndlZWtUaXRsZSl9PlxuICAgICAgICAgICAgICAgIHtkYXlzQXJyYXkubWFwKChldmVudCwgaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgPHNwYW4ga2V5PXtpfSBzdHlsZT17d2Vla1RpdGxlRGF5U3R5bGV9PlxuICAgICAgICAgICAgICAgICAgICB7bG9jYWxpemVkV2Vla2RheShEYXRlVGltZUZvcm1hdCwgbG9jYWxlLCBpLCBmaXJzdERheU9mV2Vlayl9XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8U2xpZGVJblRyYW5zaXRpb25Hcm91cCBkaXJlY3Rpb249e3RoaXMuc3RhdGUudHJhbnNpdGlvbkRpcmVjdGlvbn0gc3R5bGU9e3N0eWxlcy50cmFuc2l0aW9uU2xpZGV9PlxuICAgICAgICAgICAgICAgIDxDYWxlbmRhck1vbnRoXG4gICAgICAgICAgICAgICAgICBEYXRlVGltZUZvcm1hdD17RGF0ZVRpbWVGb3JtYXR9XG4gICAgICAgICAgICAgICAgICBsb2NhbGU9e2xvY2FsZX1cbiAgICAgICAgICAgICAgICAgIGRpc3BsYXlEYXRlPXt0aGlzLnN0YXRlLmRpc3BsYXlEYXRlfVxuICAgICAgICAgICAgICAgICAgZmlyc3REYXlPZldlZWs9e3RoaXMucHJvcHMuZmlyc3REYXlPZldlZWt9XG4gICAgICAgICAgICAgICAgICBrZXk9e3RoaXMuc3RhdGUuZGlzcGxheURhdGUudG9EYXRlU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICBtaW5EYXRlPXttaW5EYXRlfVxuICAgICAgICAgICAgICAgICAgbWF4RGF0ZT17bWF4RGF0ZX1cbiAgICAgICAgICAgICAgICAgIG9uVG91Y2hUYXBEYXk9e3RoaXMuaGFuZGxlVG91Y2hUYXBEYXl9XG4gICAgICAgICAgICAgICAgICByZWY9XCJjYWxlbmRhclwiXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZERhdGU9e3RoaXMuc3RhdGUuc2VsZWN0ZWREYXRlfVxuICAgICAgICAgICAgICAgICAgc2hvdWxkRGlzYWJsZURhdGU9e3RoaXMucHJvcHMuc2hvdWxkRGlzYWJsZURhdGV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9TbGlkZUluVHJhbnNpdGlvbkdyb3VwPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgfVxuICAgICAgICAgIHshdGhpcy5zdGF0ZS5kaXNwbGF5TW9udGhEYXkgJiZcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ByZXBhcmVTdHlsZXMoc3R5bGVzLnllYXJDb250YWluZXIpfT5cbiAgICAgICAgICAgICAge3RoaXMueWVhclNlbGVjdG9yKCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB9XG4gICAgICAgICAgey8qXG4gICAgICAgICAge29rTGFiZWwgJiZcbiAgICAgICAgICAgIDxDYWxlbmRhckFjdGlvbkJ1dHRvbnNcbiAgICAgICAgICAgICAgYXV0b09rPXt0aGlzLnByb3BzLmF1dG9Pa31cbiAgICAgICAgICAgICAgY2FuY2VsTGFiZWw9e2NhbmNlbExhYmVsfVxuICAgICAgICAgICAgICBva0xhYmVsPXtva0xhYmVsfVxuICAgICAgICAgICAgICBvblRvdWNoVGFwQ2FuY2VsPXtvblRvdWNoVGFwQ2FuY2VsfVxuICAgICAgICAgICAgICBvblRvdWNoVGFwT2s9e29uVG91Y2hUYXBPa31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgfVxuICAgICAgICAgICAgKi99XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYWxlbmRhcjtcbiJdfQ==