{"version":3,"sources":["src/Components/PlanMap/Lib/Station.js"],"names":["Station","x","y","width","height","basic","index","Number","strokeStyle","fillStyle","defaultFillStyle","textStyle","checked","default","dialog","open","ele","prototype","getIndex","position","arguments","length","reset","context","clearRect","create","stroke","fillText","getChecked","setChecked","value","dragCreate","moveTo","beginPath","rect","fill","centerPoint","arc","Math","PI","text","name","measureText","font","textBaseline","closePath","fillRect","getBasicInfo","closeDialog","style","display","openDialog","createDialog","renderDialog","stationEle","innerHTML","document","createElement","border","borderRadius","top","left","background","body","appendChild","module","exports"],"mappings":"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","file":"Station.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["\n//工位\n//======================\nvar Station = function(x,y,width,height,basic,index){\n\n\n  this.index = Number(index);\n  this.x = Number(x);\n  this.y = Number(y);\n  this.width = Number(width);\n  this.height = Number(height);\n  this.strokeStyle = 'red';\n  this.fillStyle = '#28C288';\n  this.defaultFillStyle = 'transparent';\n  this.textStyle = '#499DF1';\n  this.checked = false;\n\n  //工位信息\n  this.basic = basic;\n  this.default = {\n      x:Number(x),\n      y:Number(y)\n  };\n\n  //dom\n  this.dialog = {\n    open:false,\n    ele:null\n  };\n\n}\n\nStation.prototype.getIndex = function(){\n  return this.index;\n}\n\nStation.prototype.position = function(x,y){\n\n  if(arguments.length === 2){\n      this.x = Number(x)-Number(this.width/2);\n      this.y = Number(y)-Number(this.height/2);\n  }\n\n  var position = {\n    x:this.x,\n    y:this.y\n  };\n\n  return position;\n}\n\nStation.prototype.reset = function(context){\n  context.clearRect(this.x,this.y,this.width,this.height);\n}\n\nStation.prototype.create = function(context){\n  this.reset(context);\n  this.stroke(context);\n  this.fillText(context);\n}\n\nStation.prototype.getChecked = function(){\n\treturn this.checked;\n}\n\nStation.prototype.setChecked = function(value){\n\t\tthis.checked = value;\n}\n\n//拖拽创建\nStation.prototype.dragCreate = function(context){\n\n}\n\nStation.prototype.stroke = function(context){\n\n  context.moveTo(this.x,this.y);\n  context.beginPath();\n  context.rect(this.x,this.y,this.width,this.height);\n  //context.closePath();\n\n  context.strokeStyle=this.strokeStyle;\n  //context.stroke();\n\n  this.fillStyle = this.defaultFillStyle;\n  if(this.checked){\n    this.fillStyle='red';\n  }\n\n  this.fill(context);\n\n}\n\n//中心点\nStation.prototype.centerPoint = function(context){\n  context.beginPath();\n  context.arc(this.x+this.width/2,this.y+this.height/2,2,0,2*Math.PI);\n  context.stroke();\n}\n\nStation.prototype.fillText = function(context){\n  var basic = this.basic;\n  var text = basic.name;\n  var measureText = context.measureText(text);\n\n\n  //this.centerPoint(context);\n\n  context.beginPath();\n  context.font=\"12px Verdana\";\n  context.fillStyle = this.textStyle;\n  context.textBaseline=\"middle\";\n  context.fillText(text,this.x+this.width/2-measureText.width/2,this.y+this.height/2);\n  context.closePath();\n}\n\n//填充颜色\nStation.prototype.fill = function(context){\n  context.fillStyle = this.fillStyle;\n  context.fillRect(Number(this.x),Number(this.y),this.width,this.height);\n}\n\nStation.prototype.getBasicInfo = function(){\n  var basic = this.basic;\n  return basic;\n}\n\nStation.prototype.closeDialog = function(){\n    var ele = this.dialog.ele;\n    if(ele === null){\n      return ;\n    }\n    ele.style.display = 'none';\n}\n\nStation.prototype.openDialog = function(){\n    var ele = this.dialog.ele;\n    if(ele === null){\n       ele  = this.createDialog();\n    }\n    this.renderDialog();\n    ele.style.display = 'block';\n}\n\nStation.prototype.renderDialog = function(){\n    var basic = this.basic;\n    var stationEle =  this.dialog.ele;\n    stationEle.innerHTML = basic.name + (this.checked?'选中':'未选中');\n}\n\n//工位信息\nStation.prototype.createDialog = function(){\n\n  var basic = this.getBasicInfo();\n\n  var stationEle = document.createElement('div');\n  stationEle.style.width = '200px';\n  stationEle.style.height = '200px';\n  stationEle.style.border = '1px solid #ddd';\n  stationEle.style.borderRadius = '4px';\n  stationEle.style.position = 'fixed';\n  stationEle.style.top = this.y+'px';\n  stationEle.style.left = this.x+'px';\n  stationEle.style.background = '#fff';\n\n  stationEle.innerHTML = basic.name + (this.checked?'选中':'未选中');\n\n  this.dialog.ele = stationEle;\n\n  document.body.appendChild(stationEle);\n\n  return stationEle;\n\n}\n\nmodule.exports = Station;\n"]}