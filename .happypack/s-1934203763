'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _simpleAssign = require('simple-assign');

var _simpleAssign2 = _interopRequireDefault(_simpleAssign);

var _Loading = require('./Loading');

var _Loading2 = _interopRequireDefault(_Loading);

var _Station = require('./Station');

var _Station2 = _interopRequireDefault(_Station);

var _Log = require('./Log');

var _Log2 = _interopRequireDefault(_Log);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//平面图
//=======================
var PlanMap = function PlanMap(elementIdName, Configs, Plugins) {

  this.configs = Configs;
  this.plugins = Plugins;
  //dom信息
  this.elementIdName = elementIdName;
  this.canvasElement = document.getElementById(elementIdName);

  this.context = this.canvasElement.getContext('2d');

  //基本信息
  this.scaleX = 1;
  this.scaleY = 1;
  this.backgroundImage = null;

  this.width = Configs.width;
  this.height = Configs.height;

  this.canvasElement.setAttribute('width', this.width);
  this.canvasElement.setAttribute('height', this.height);

  //多选拖动、单选
  this.single = 1;

  //clickstation
  this.clickStation = null;

  //默认
  this.default = {
    translateX: 0,
    translateY: 0
  };

  this.translateX = 0;
  this.translateY = 0;

  //工位信息
  this.stations = [];
  this.beginDragStation = null;
  this.selectedStations = [];

  //事件状态
  this.eventType = {
    //click
    click: 0,
    clickLeft: 0,
    clickRight: 0,
    //move
    move: 0,
    //drag
    isJudgeDrag: 0,
    drag: 0,
    dragBegin: 0,
    dragEnd: 0,
    dragMap: 0,
    dragStation: 0,
    //whell－滚轮事件
    whell: 0,
    whellUp: 0,
    whellDown: 0
  };

  //坐标信息
  this.mousePosition = {
    down: {
      x: 0,
      y: 0
    },
    up: {
      x: 0,
      y: 0
    },
    move: {
      x: 0,
      y: 0
    },
    current: {
      x: 0,
      y: 0
    }
  };

  //zoomIn、zoomOut、fulleScreen、translate
  this.operation = '';

  this.permission = {
    edit: 1
  };

  this.loading = new _Loading2.default(this.canvasElement, this.context, this.width, this.height);

  var _this = this;
  // this.loading.show();
  this.initializeStyle();
  this.loadBackgroundImage(function () {
    _this.loading.hide();
    !_this.loading.get() && _this.initialize();
  });
};

PlanMap.prototype.getContext = function () {
  var canvasElement = this.canvasElement;
  return canvasElement.getContext('2d');
};

PlanMap.prototype.setOperation = function (value) {
  this.operation = value;
};

PlanMap.prototype.getOperation = function () {
  return this.operation;
};

//权限
PlanMap.prototype.setPermission = function (options) {
  this.permission = (0, _simpleAssign2.default)({}, this.permission, options);
};

PlanMap.prototype.getPermission = function () {
  return this.permission;
};

PlanMap.prototype.fullScreen = function () {
  var canvasElement = this.canvasElement;
};

//坐标
PlanMap.prototype.setPosition = function (type, loc) {
  var position = {
    x: Math.floor(loc.x),
    y: Math.floor(loc.y)
  };
  var mousePosition = (0, _simpleAssign2.default)(this.mousePosition);
  mousePosition[type] = position;
  this.mousePosition = mousePosition;
};

PlanMap.prototype.getPosition = function (type) {
  var mousePosition = (0, _simpleAssign2.default)(this.mousePosition);
  return mousePosition[type];
};

//设置事件真值推理，其他值
PlanMap.prototype.setEventTrueSimilar = function (type) {
  var eventType = this.eventType;
  switch (type) {

    case 'click':
      {
        eventType = (0, _simpleAssign2.default)({}, eventType, { click: 1, clickLeft: 0 });
        break;
      }

    case 'clickLeft':
      {
        eventType = (0, _simpleAssign2.default)({}, eventType, { click: 1, clickLeft: 1, clickRight: 0 });
        break;
      }
    case 'clickRight':
      {
        eventType = (0, _simpleAssign2.default)({}, eventType, { click: 1, clickLeft: 0, clickRight: 1 });
        break;
      }

    case 'drag':
      {
        eventType = (0, _simpleAssign2.default)({}, eventType, { drag: 1, dragEnd: 0 });
        break;
      }

    case 'dragBegin':
      {
        eventType = (0, _simpleAssign2.default)({}, eventType, { drag: 1, dragEnd: 0, dragBegin: 1 });
        break;
      }
    case 'dragEnd':
      {
        eventType = (0, _simpleAssign2.default)({}, eventType, { drag: 0, dragEnd: 1, dragBegin: 0, dragStation: 0, dragMap: 0 });
        break;
      }
    case 'dragMap':
      {
        eventType = (0, _simpleAssign2.default)({}, eventType, { drag: 1, dragEnd: 0, dragStation: 0 });
        break;
      }
    case 'dragStation':
      {
        eventType = (0, _simpleAssign2.default)({}, eventType, { drag: 1, dragEnd: 0, dragMap: 0 });
        break;
      }

    default:

  }

  this.eventType = eventType;
};

PlanMap.prototype.setEvent = function (type, value) {

  var eventType = (0, _simpleAssign2.default)({}, this.eventType);
  if (!eventType.hasOwnProperty(type)) {
    return;
  }

  //设置相似的值
  value && this.setEventTrueSimilar(type);

  eventType = this.eventType;
  eventType[type] = value;
  this.eventType = eventType;
};

PlanMap.prototype.getEvent = function (type) {
  var eventType = (0, _simpleAssign2.default)({}, this.eventType);
  if (!eventType.hasOwnProperty(type)) {
    return false;
  }
  return eventType[type];
};

//平面图-初始化
PlanMap.prototype.initialize = function () {
  //this.initializeStyle();
  this.initializeTransForm();
  this.initializeStations();
  this.initializeEvents();
};

PlanMap.prototype.initializeTransForm = function () {
  var backgroundImage = this.backgroundImage;
  var canvasElement = this.canvasElement;

  this.scaleY = Number(canvasElement.height) / Number(canvasElement.height);
};

//平面图-初始化
PlanMap.prototype.loadBackgroundImage = function (callback) {
  var image = new Image();
  image.src = this.configs.backgroundImage;
  var _this = this;
  image.onload = function () {
    _this.backgroundImage = this;
    callback && callback();
  };
};

PlanMap.prototype.setTransform = function () {
  var context = this.context;
  context.setTransform(this.scaleX, 0, 0, this.scaleY, this.translateX, this.translateY);
};

PlanMap.prototype.reset = function () {

  var context = this.getContext();
  var canvasElement = this.canvasElement;

  var sw = canvasElement.width;
  var sh = canvasElement.height;

  var dw = sw * this.scaleX;
  var dh = sh * this.scaleY;

  canvasElement.width = canvasElement.width;

  //context.setTransform(1,0,0,1,this.translateX,this.translateY);
  context.setTransform(this.scaleX, 0, 0, this.scaleY, this.translateX, this.translateY);

  context.clearRect(0, 0, canvasElement.width, canvasElement.height);
  context.fillStyle = '#fff';
  context.fillRect(0, 0, this.width, this.height);

  context.drawImage(this.backgroundImage, 0, 0, this.backgroundImage.width, this.backgroundImage.height);
};

//平面图-外观样式

PlanMap.prototype.initializeStyle = function () {
  var canvasElement = this.canvasElement;
  var pageWidth = window.innerWidth;
  var pageHeight = window.innerHeight;

  if (typeof pageWidth !== 'number') {

    if (document.compatMode == 'CSS1Compat') {
      pageWidth = document.documentElement.clientWidth;
      pageHeight = document.documentElement.clientHeight;
    } else {
      pageWidth = document.body.clientWidth;
      pageHeight = document.body.clientHeight;
    }
  }

  if (!this.width) {
    this.width = pageWidth;
    this.height = pageHeight;
    canvasElement.setAttribute('width', pageWidth);
    canvasElement.setAttribute('height', pageHeight);
  }
};

//在工位中
PlanMap.prototype.isPointInPath = function (x, y) {
  var context = this.getContext();
  return context.isPointInPath(x, y);
};
//查找开始draw station
PlanMap.prototype.mapBeiginDrawStation = function () {

  var mouseDownPosition = this.getPosition('down');
  var offsetX = mouseDownPosition.x;
  var offsetY = mouseDownPosition.y;
  var stations = this.getStations();
  var beginDragStation = null;
  //查找起始工位

  if (this.isPointInPath(offsetX, offsetY)) {
    stations.forEach(function (station, index) {
      if (offsetX >= station.x && offsetX <= station.x + station.width) {
        beginDragStation = station;
      }
    });
  }
  this.beginDragStation = beginDragStation;
};
//查找结束 draw station
PlanMap.prototype.mapEndDrawStation = function () {

  var mouseUpPosition = this.getPosition('up');
  var offsetX = mouseUpPosition.x;
  var offsetY = mouseUpPosition.y;

  var stations = this.getStations();
  var endDragStation = null;

  //查找起始工位

  if (this.isPointInPath(offsetX, offsetY)) {
    stations.forEach(function (station, index) {
      if (offsetX >= station.x && offsetX <= station.x + station.width) {
        endDragStation = (0, _simpleAssign2.default)({}, station);
      }
    });
  }

  this.endDragStation = endDragStation;
};

//拖动工位
PlanMap.prototype.onDragStation = function () {

  //判断是否有权限

  var permission = this.permission;

  if (!(permission.hasOwnProperty('edit') && permission.edit)) {
    return;
  }

  var clickStation = this.clickStation;

  if (this.selectedStations.length && clickStation && clickStation.getChecked()) {
    this.createDragStationCanvas();
  }

  //响应拖拽工位开始事件
  if (this.getEvent('dragBegin') && this.getEvent('dragStation')) {
    return;
  }

  this.setEvent('drag', 1);
  this.setEvent('dragBegin', 1);
  this.setEvent('dragStation', 1);
  this.onDragStationBegin();
};

PlanMap.prototype.onDragStationBegin = function () {
  var canvasElement = this.canvasElement;
  _Log2.default.debug('拖拽工位开始了');
  var selected = [];
  if (this.single) {
    var downPosition = this.getPosition('down');
    var selectedStation = this.hasPositionStation(downPosition);

    if (selectedStation.getChecked()) {
      selected.push(selectedStation);
    }
  } else {
    //选中的工位
    var stations = this.getStations();
    stations.map(function (item, index) {
      if (item.getChecked()) {
        var station = new _Station2.default(item.x, item.y, item.width, item.height, item.basic, item.index);
        selected.push(station);
      }
    });
  }
  this.selectedStations = selected;
};

PlanMap.prototype.createDragStationCanvasModal = function () {

  var context = this.context;
  var canvasElement = this.canvasElement;
  context.beginPath();
  context.rect(-Math.abs(this.translateX), -Math.abs(this.translateY), this.width * this.scaleX + 2 * Math.abs(this.translateX), this.height + 2 * Math.abs(this.translateY));
  context.strokeStyle = "#ddd";
  context.fillStyle = "rgba(0,0,0,0.5)";
  context.closePath();
  context.stroke();
  context.fill();
};

PlanMap.prototype.createDragStationCanvas = function () {

  var context = this.context;
  var canvasElement = this.canvasElement;
  var selectedStations = this.selectedStations;

  var position = this.getPosition('move');

  this.drawStations();
  this.createDragStationCanvasModal();

  var move = this.getPosition('move');

  var _this = this;

  //选中的工位
  selectedStations.map(function (station) {

    var positionX = station.default.x + move.x / _this.scaleX - station.x;
    var positionY = station.default.y + move.y / _this.scaleY - station.y;

    station.position(positionX, positionY);
    station.create(context);
  });
};

//交换工位上的员工信息
PlanMap.prototype.swapStationStaff = function (originStation, targetStation) {

  var Plugns = this.plugins;

  Plugns && Plugns.swapStationStaff && Plugns.swapStationStaff(originStation.getBasicInfo(), targetStation.getBasicInfo());

  targetStation.setChecked(originStation.getChecked());
  originStation.setChecked(!originStation.getChecked());

  var stations = this.getStations();
  stations.splice(originStation.getIndex(), 1, originStation);
  stations.splice(targetStation.getIndex(), 1, targetStation);

  this.setStations(stations);

  this.drawStations();
};

PlanMap.prototype.onDragStationEnd = function () {

  var downLoc = this.getPosition('down');
  var upLoc = this.getPosition('up');

  var originStation = this.hasPositionStation(downLoc);
  var targetStation = this.hasPositionStation(upLoc);

  if (targetStation && originStation.getIndex() !== targetStation.getIndex()) {
    this.swapStationStaff(originStation, targetStation);
  }

  this.selectedStations = [];
};

//默认前一个值
/*
PlanMap.prototype.setDefault = function(config){
  var defaultConfigs = Object.assign({},this.default,config);
  this.default = defaultConfigs;
}
*/
//平面图移动
PlanMap.prototype.translate = function (translateX, translateY) {

  var context = this.getContext();
  var canvasElement = this.canvasElement;
  var backgroundImage = this.backgroundImage;

  //加上边界值
  //translateX = (translateX<0?translateX:0);
  //translateX = (translateX<-backgroundImage.width*this.scaleX?-backgroundImage.width*this.scaleX:translateX);

  //translateY = (translateY<0?translateY:0);
  //translateY = (translateY<-backgroundImage.height?-backgroundImage.height:translateY);

  this.translateX = translateX;
  this.translateY = translateY;
};

PlanMap.prototype.onLeftEventClick = function () {

  var isOk = this.getEvent('clickLeft') && !this.getEvent('clickRight');
  if (!isOk) {
    return;
  }

  _Log2.default.debug('左点击事件');

  var mouseUpPosition = this.getPosition('up');
  this.onCheckedStation(mouseUpPosition);
};

PlanMap.prototype.onRightEventClick = function () {

  var isOk = !this.getEvent('clickLeft') && this.getEvent('clickRight');
  if (!isOk) {
    return;
  }

  var mouseUpPosition = this.getPosition('up');

  if (this.isPositionInStation(mouseUpPosition)) {

    var targetStation = this.hasPositionStation(mouseUpPosition);

    if (targetStation === null) {
      return;
    }

    this.openStationDialog(targetStation);
  }
};

PlanMap.prototype.hasPositionStation = function (loc) {

  if ((typeof loc === 'undefined' ? 'undefined' : _typeof(loc)) !== 'object') {
    throw new Error('PlanMap:hasPositionStation,参数@loc为对象');
  }

  var stations = this.getStations();
  var hasStation = null;
  for (var i = 0; i < stations.length; i++) {
    var station = stations[i];
    if (loc.x >= station.x * this.scaleX && loc.x <= (station.x + station.width) * this.scaleX && loc.y >= station.y * this.scaleY && loc.y <= (station.y + station.height) * this.scaleY) {
      hasStation = station;
      break;
    }
  }
  return hasStation;
};
//坐标在工位上
PlanMap.prototype.isPositionInStation = function (loc) {
  var isOk = false;
  var stations = this.getStations();

  /*
  TODO:bug
  if(!this.isPointInPath(loc.x,loc.y)){
  return isOk;
  }
  */
  if (this.hasPositionStation(loc)) {
    isOk = true;
  }

  return isOk;
};

PlanMap.prototype.calcScale = function () {

  var move = this.getPosition('move');

  var defaultScale = 0.1;

  //缩小
  if (this.getEvent('whell') && this.getEvent('whellUp')) {
    defaultScale = -defaultScale;
  }

  var scaleX = this.scaleX + defaultScale;
  var scaleY = this.scaleY + defaultScale;

  var defaultTranslateX = Number(move.x) * Number(defaultScale);
  //- Number(move.x);
  var defaultTranslateY = Number(move.y) * Number(defaultScale);
  // - Number(move.y);


  //放大
  if (this.getEvent('whell') && this.getEvent('whellDown')) {
    defaultTranslateX = -defaultTranslateX;
    defaultTranslateY = -defaultTranslateY;
    //缩小
  } else if (this.getEvent('whell') && this.getEvent('whellUp')) {
    defaultTranslateX = -defaultTranslateX;
    defaultTranslateY = -defaultTranslateY;
  }

  console.log(defaultTranslateX, move.x, defaultScale, defaultTranslateY);

  var translateX = this.translateX + defaultTranslateX;
  var translateY = this.translateY + defaultTranslateY;

  if (scaleX < 0.6 || scaleX > 10) {
    return;
  }

  this.translate(translateX, translateY);
  this.scale(scaleX, scaleY);

  this.drawStations();
};

//平面图－events
PlanMap.prototype.initializeEvents = function () {

  var canvasElement = this.canvasElement;
  var context = this.getContext();

  var _this = this;

  var canvasMouseWhellEvent = function canvasMouseWhellEvent(event) {
    var position = _this.windowToCanvas(event);
    _this.setPosition('down', position);

    var deltaY = event.deltaY;
    if (deltaY > 0) {
      _this.setEvent('whell', 1);
      _this.setEvent('whellDown', 1);
      _this.setEvent('whellUp', 0);
    } else {
      _this.setEvent('whell', 1);
      _this.setEvent('whellDown', 0);
      _this.setEvent('whellUp', 1);
    }

    _this.calcScale();
  };

  window.addEventListener("mousewheel", canvasMouseWhellEvent, false);

  //取消鼠标右击事件

  var canvasCancelRightMouseEvent = function canvasCancelRightMouseEvent(event) {
    // 鼠标右击事件
    if (event.button === 2) {
      event.preventDefault();
    };
  };

  //鼠标点击
  var canvasMouseDown = function canvasMouseDown(event) {
    event = event || window.event;

    event.preventDefault();

    _this.setEvent('drag', 0);

    var position = _this.windowToCanvas(event);
    _this.setPosition('down', position);
    //_this.setDefault({translateX:_this.translateX,translateY:_this.translateY});

    //鼠标右击事件
    if (event.button === 2) {
      document.addEventListener('contextmenu', canvasCancelRightMouseEvent, false);
      _this.setEvent('clickRight', 1);
      _this.setEvent('clickLeft', 0);

      return false;
    } else {
      _this.setEvent('clickRight', 0);
      _this.setEvent('clickLeft', 1);
    }

    //移动
    window.setTimeout(function () {
      canvasElement.addEventListener('mousemove', canvasMouseMove, false);
    }, 10);
  };
  //鼠标移动
  var canvasMouseMove = function canvasMouseMove(e) {
    e = e || window.event;

    _this.setEvent('drag', 1);
    _this.setEvent('click', 0);
    _this.setEvent('clickLeft', 0);
    _this.setEvent('clickRight', 0);

    //判断是拖拽背景图、工位
    var loc = _this.windowToCanvas(e);
    _this.setPosition('move', loc);
    _this.onDrag();
  };

  canvasElement.addEventListener('mousemove', function (event) {
    _this.setPosition('move', _this.windowToCanvas(event));

    var canvasElement = _this.canvasElement;
    var loc = _this.windowToCanvas(event);
    //更改鼠标状态
    if (_this.hasPositionStation(loc)) {
      canvasElement.style.cursor = 'pointer';
    }
  }, false);

  //mousedown
  canvasElement.addEventListener('mousedown', canvasMouseDown, false);

  //mouseup
  canvasElement.addEventListener('mouseup', function (event) {
    event = event || window.event;

    document.removeEventListener('contextmenu', canvasCancelRightMouseEvent, false);

    _this.setPosition('up', _this.windowToCanvas(event));

    canvasElement.removeEventListener('mousemove', canvasMouseMove, false);

    _this.onDragEnd();

    _this.onClick();
  });
};

PlanMap.prototype.judgeClick = function () {

  var mouseDownPosition = this.getPosition('down');
  var mouseUpPosition = this.getPosition('up');
  var diffX = Math.abs(mouseDownPosition.x - mouseUpPosition.x);
  var diffY = Math.abs(mouseDownPosition.y - mouseUpPosition.y);

  if (diffX < 1 && diffY < 1) {
    this.setEvent('click', 1);
  }
};

//判断是拖拽工位还是map
PlanMap.prototype.judgeDragStationOrMap = function () {

  var mouseDownPosition = this.getPosition('down');
  var isStation = false;
  if (this.hasPositionStation(this.getPosition('down'))) {
    isStation = true;
  }

  this.setEvent('dragStation', Number(isStation));
  this.setEvent('dragMap', Number(!isStation));
  this.setEvent('isJudgeDrag', 1);
};

PlanMap.prototype.onDrag = function () {

  if (!this.getEvent('isJudgeDrag')) {
    this.judgeDragStationOrMap();
  }

  if (this.getEvent('drag') && this.getEvent('dragMap')) {
    this.onDragMap();
    return;
  }

  if (this.getEvent('drag') && this.getEvent('dragStation')) {
    this.onDragStation();
    return;
  }
};

PlanMap.prototype.onDragBegin = function () {
  console.log('---???');
  this.onDragMapBegin();
};

PlanMap.prototype.onDragEnd = function () {

  //重置
  this.drawStations();

  console.log('end');
  if (this.getEvent('drag') && this.getEvent('dragBegin') && this.getEvent('dargMap')) {
    this.onDragMapEnd();
  }

  if (this.getEvent('drag') && this.getEvent('dragStation')) {
    this.onDragStationEnd();
  }

  this.setEvent('drag', 0);
  this.setEvent('dragBeigin', 0);
  this.setEvent('dragEnd', 1);
  this.setEvent('dragMap', 0);
  this.setEvent('dragStation', 0);
  this.setEvent('isJudgeDrag', 0);
};

//拖动平面图

PlanMap.prototype.onDragMapBegin = function () {

  if (!(this.getEvent('drapBegin') && this.getEvent('dragMap'))) {
    return;
  }

  _Log2.default.debug('拖拽底图开始了');
};

PlanMap.prototype.onDragMapEnd = function () {
  _Log2.default.debug('拖拽底图结束了');
  this.setEvent('drag', 0);
};

PlanMap.prototype.onDragMap = function () {

  var origin = this.getPosition('down');
  var move = this.getPosition('move');
  var x = move.x - origin.x;
  var y = move.y - origin.y;

  var context = this.getContext();
  var canvasElement = this.canvasElement;
  var backgroundImage = this.backgroundImage;

  var translateX = this.translateX + x;
  var translateY = this.translateY + y;

  this.translate(translateX, translateY);

  this.drawStations(context);

  if (this.getEvent('dragBegin') && this.getEvent('dragMap')) {
    return;
  }

  this.setEvent('drag', 1);
  this.setEvent('dragBegin', 1);

  //this.onDragBegin();
};

PlanMap.prototype.onClick = function () {
  if (!this.getEvent('click')) {
    return;
  }
  this.onRightEventClick();
  this.onLeftEventClick();
};

//取消其他选中的station
PlanMap.prototype.cancelCheckedAllStation = function () {
  var stations = this.getStations();
  var clickStation = this.clickStation;

  stations.forEach(function (station, index) {
    if (station.getIndex() === clickStation.getIndex()) {
      return;
    }
    station.checked = false;
  });

  this.setStations(stations);
};

PlanMap.prototype.setClickStation = function (clickStation) {
  this.clickStation = clickStation;
};

PlanMap.prototype.getClickStation = function () {
  return this.clickStation;
};

//点击选中
PlanMap.prototype.onCheckedStation = function (loc) {

  var stations = this.getStations();
  //关闭所有station dialog
  this.closeAllStationDialog();

  var clickStation = this.hasPositionStation(loc);
  if (!clickStation) {
    return;
  }

  clickStation.setChecked(!clickStation.getChecked());
  stations.splice(clickStation.getIndex(), 1, clickStation);

  this.setClickStation(clickStation);

  this.setStations(stations);

  this.drawStations();

  var plugins = this.plugins;

  plugins.onCheckedStation && plugins.onCheckedStation(clickStation, this.getCheckedStations());
};

PlanMap.prototype.getCheckedStations = function () {
  var stations = this.stations;

  var checkedStations = [];

  stations.map(function (station) {
    if (station.getChecked()) {
      checkedStations.push(station);
    }
  });

  return checkedStations;
};

//关闭所有的stations dialog

PlanMap.prototype.closeAllStationDialog = function (station) {
  //关闭其他的工位dialog
  var stations = this.getStations();
  stations.map(function (item, index) {
    item.closeDialog();
  });
};

//打开单个station dialog
PlanMap.prototype.openStationDialog = function (station) {
  if (!this.getEvent('clickRight')) {
    return;
  }

  this.closeAllStationDialog();

  _Log2.default.debug('选中了工位');
  _Log2.default.debug(station);

  station.openDialog();
};

//平面图－工位拖拽
PlanMap.prototype.dragStation = function () {};

//平面图-选择工位
PlanMap.prototype.setStationPostion = function (station) {
  var translateX = this.translateX;
  var translateY = this.translateY;
  return station;
};

//设置stations
PlanMap.prototype.setStations = function (stations) {
  this.stations = stations;
};

PlanMap.prototype.getStations = function () {
  return this.stations;
};

PlanMap.prototype.drawStations = function (context) {

  context = context || this.getContext();
  var canvasElement = this.canvasElement;
  var stations = this.getStations();

  this.reset();
  var _this = this;
  stations.forEach(function (station, index) {
    station.position(Number(station.default.x), Number(station.default.y));
    station.create(context);
  });
};

//平面图-鼠标位置

PlanMap.prototype.windowToCanvas = function (event) {
  var position = {
    x: 0,
    y: 0
  };

  var canvasElement = this.canvasElement;
  var bbox = {};
  bbox = canvasElement.getBoundingClientRect();

  var clientX = event.clientX;
  var clientY = event.clientY;

  position.x = clientX - bbox.left * (this.width / bbox.width) - this.translateX;
  position.y = clientY - bbox.top * (this.height / bbox.height) - this.translateY;

  position.x = position.x < 0 ? Math.ceil(position.x) : Math.floor(position.x);
  position.y = position.y < 0 ? Math.ceil(position.y) : Math.floor(position.y);

  return position;
};

PlanMap.prototype.scale = function (scaleX, scaleY) {
  this.scaleX = scaleX;
  this.scaleY = scaleY;
};

//平面图－工位信息－初始化
PlanMap.prototype.initializeStations = function () {

  //工位数据
  var stationsData = this.configs.stations;
  var stations = [];

  var context = this.getContext();
  var translateX = this.translateX;
  var translateY = this.translateY;

  stationsData.map(function (item, index) {

    var x = item.x;
    var y = item.y;
    var width = item.width;
    var height = item.height;
    var station = new _Station2.default(x, y, width, height, item.basic, index);

    stations.push(station);
  });

  this.setStations(stations);

  this.drawStations();
};

module.exports = PlanMap;
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(PlanMap, 'PlanMap', '/Users/tmac_zc/Code/kr-admin/src/Components/PlanMap/Lib/PlanMap.js');
}();

;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Db21wb25lbnRzL1BsYW5NYXAvTGliL1BsYW5NYXAuanMiXSwibmFtZXMiOlsiUGxhbk1hcCIsImVsZW1lbnRJZE5hbWUiLCJDb25maWdzIiwiUGx1Z2lucyIsImNvbmZpZ3MiLCJwbHVnaW5zIiwiY2FudmFzRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsInNjYWxlWCIsInNjYWxlWSIsImJhY2tncm91bmRJbWFnZSIsIndpZHRoIiwiaGVpZ2h0Iiwic2V0QXR0cmlidXRlIiwic2luZ2xlIiwiY2xpY2tTdGF0aW9uIiwiZGVmYXVsdCIsInRyYW5zbGF0ZVgiLCJ0cmFuc2xhdGVZIiwic3RhdGlvbnMiLCJiZWdpbkRyYWdTdGF0aW9uIiwic2VsZWN0ZWRTdGF0aW9ucyIsImV2ZW50VHlwZSIsImNsaWNrIiwiY2xpY2tMZWZ0IiwiY2xpY2tSaWdodCIsIm1vdmUiLCJpc0p1ZGdlRHJhZyIsImRyYWciLCJkcmFnQmVnaW4iLCJkcmFnRW5kIiwiZHJhZ01hcCIsImRyYWdTdGF0aW9uIiwid2hlbGwiLCJ3aGVsbFVwIiwid2hlbGxEb3duIiwibW91c2VQb3NpdGlvbiIsImRvd24iLCJ4IiwieSIsInVwIiwiY3VycmVudCIsIm9wZXJhdGlvbiIsInBlcm1pc3Npb24iLCJlZGl0IiwibG9hZGluZyIsIl90aGlzIiwiaW5pdGlhbGl6ZVN0eWxlIiwibG9hZEJhY2tncm91bmRJbWFnZSIsImhpZGUiLCJnZXQiLCJpbml0aWFsaXplIiwicHJvdG90eXBlIiwic2V0T3BlcmF0aW9uIiwidmFsdWUiLCJnZXRPcGVyYXRpb24iLCJzZXRQZXJtaXNzaW9uIiwib3B0aW9ucyIsImdldFBlcm1pc3Npb24iLCJmdWxsU2NyZWVuIiwic2V0UG9zaXRpb24iLCJ0eXBlIiwibG9jIiwicG9zaXRpb24iLCJNYXRoIiwiZmxvb3IiLCJnZXRQb3NpdGlvbiIsInNldEV2ZW50VHJ1ZVNpbWlsYXIiLCJzZXRFdmVudCIsImhhc093blByb3BlcnR5IiwiZ2V0RXZlbnQiLCJpbml0aWFsaXplVHJhbnNGb3JtIiwiaW5pdGlhbGl6ZVN0YXRpb25zIiwiaW5pdGlhbGl6ZUV2ZW50cyIsIk51bWJlciIsImNhbGxiYWNrIiwiaW1hZ2UiLCJJbWFnZSIsInNyYyIsIm9ubG9hZCIsInNldFRyYW5zZm9ybSIsInJlc2V0Iiwic3ciLCJzaCIsImR3IiwiZGgiLCJjbGVhclJlY3QiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImRyYXdJbWFnZSIsInBhZ2VXaWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJwYWdlSGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjb21wYXRNb2RlIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJib2R5IiwiaXNQb2ludEluUGF0aCIsIm1hcEJlaWdpbkRyYXdTdGF0aW9uIiwibW91c2VEb3duUG9zaXRpb24iLCJvZmZzZXRYIiwib2Zmc2V0WSIsImdldFN0YXRpb25zIiwiZm9yRWFjaCIsInN0YXRpb24iLCJpbmRleCIsIm1hcEVuZERyYXdTdGF0aW9uIiwibW91c2VVcFBvc2l0aW9uIiwiZW5kRHJhZ1N0YXRpb24iLCJvbkRyYWdTdGF0aW9uIiwibGVuZ3RoIiwiZ2V0Q2hlY2tlZCIsImNyZWF0ZURyYWdTdGF0aW9uQ2FudmFzIiwib25EcmFnU3RhdGlvbkJlZ2luIiwiZGVidWciLCJzZWxlY3RlZCIsImRvd25Qb3NpdGlvbiIsInNlbGVjdGVkU3RhdGlvbiIsImhhc1Bvc2l0aW9uU3RhdGlvbiIsInB1c2giLCJtYXAiLCJpdGVtIiwiYmFzaWMiLCJjcmVhdGVEcmFnU3RhdGlvbkNhbnZhc01vZGFsIiwiYmVnaW5QYXRoIiwicmVjdCIsImFicyIsInN0cm9rZVN0eWxlIiwiY2xvc2VQYXRoIiwic3Ryb2tlIiwiZmlsbCIsImRyYXdTdGF0aW9ucyIsInBvc2l0aW9uWCIsInBvc2l0aW9uWSIsImNyZWF0ZSIsInN3YXBTdGF0aW9uU3RhZmYiLCJvcmlnaW5TdGF0aW9uIiwidGFyZ2V0U3RhdGlvbiIsIlBsdWducyIsImdldEJhc2ljSW5mbyIsInNldENoZWNrZWQiLCJzcGxpY2UiLCJnZXRJbmRleCIsInNldFN0YXRpb25zIiwib25EcmFnU3RhdGlvbkVuZCIsImRvd25Mb2MiLCJ1cExvYyIsInRyYW5zbGF0ZSIsIm9uTGVmdEV2ZW50Q2xpY2siLCJpc09rIiwib25DaGVja2VkU3RhdGlvbiIsIm9uUmlnaHRFdmVudENsaWNrIiwiaXNQb3NpdGlvbkluU3RhdGlvbiIsIm9wZW5TdGF0aW9uRGlhbG9nIiwiRXJyb3IiLCJoYXNTdGF0aW9uIiwiaSIsImNhbGNTY2FsZSIsImRlZmF1bHRTY2FsZSIsImRlZmF1bHRUcmFuc2xhdGVYIiwiZGVmYXVsdFRyYW5zbGF0ZVkiLCJjb25zb2xlIiwibG9nIiwic2NhbGUiLCJjYW52YXNNb3VzZVdoZWxsRXZlbnQiLCJldmVudCIsIndpbmRvd1RvQ2FudmFzIiwiZGVsdGFZIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhbnZhc0NhbmNlbFJpZ2h0TW91c2VFdmVudCIsImJ1dHRvbiIsInByZXZlbnREZWZhdWx0IiwiY2FudmFzTW91c2VEb3duIiwic2V0VGltZW91dCIsImNhbnZhc01vdXNlTW92ZSIsImUiLCJvbkRyYWciLCJzdHlsZSIsImN1cnNvciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvbkRyYWdFbmQiLCJvbkNsaWNrIiwianVkZ2VDbGljayIsImRpZmZYIiwiZGlmZlkiLCJqdWRnZURyYWdTdGF0aW9uT3JNYXAiLCJpc1N0YXRpb24iLCJvbkRyYWdNYXAiLCJvbkRyYWdCZWdpbiIsIm9uRHJhZ01hcEJlZ2luIiwib25EcmFnTWFwRW5kIiwib3JpZ2luIiwiY2FuY2VsQ2hlY2tlZEFsbFN0YXRpb24iLCJjaGVja2VkIiwic2V0Q2xpY2tTdGF0aW9uIiwiZ2V0Q2xpY2tTdGF0aW9uIiwiY2xvc2VBbGxTdGF0aW9uRGlhbG9nIiwiZ2V0Q2hlY2tlZFN0YXRpb25zIiwiY2hlY2tlZFN0YXRpb25zIiwiY2xvc2VEaWFsb2ciLCJvcGVuRGlhbG9nIiwic2V0U3RhdGlvblBvc3Rpb24iLCJiYm94IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xpZW50WCIsImNsaWVudFkiLCJsZWZ0IiwidG9wIiwiY2VpbCIsInN0YXRpb25zRGF0YSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQTtBQUNBO0FBQ0EsSUFBSUEsVUFBVSxTQUFWQSxPQUFVLENBQVNDLGFBQVQsRUFBdUJDLE9BQXZCLEVBQStCQyxPQUEvQixFQUF1Qzs7QUFFakQsT0FBS0MsT0FBTCxHQUFlRixPQUFmO0FBQ0EsT0FBS0csT0FBTCxHQUFlRixPQUFmO0FBQ0E7QUFDQSxPQUFLRixhQUFMLEdBQXFCQSxhQUFyQjtBQUNBLE9BQUtLLGFBQUwsR0FBcUJDLFNBQVNDLGNBQVQsQ0FBd0JQLGFBQXhCLENBQXJCOztBQUVBLE9BQUtRLE9BQUwsR0FBZSxLQUFLSCxhQUFMLENBQW1CSSxVQUFuQixDQUE4QixJQUE5QixDQUFmOztBQUVBO0FBQ0EsT0FBS0MsTUFBTCxHQUFjLENBQWQ7QUFDQSxPQUFLQyxNQUFMLEdBQWMsQ0FBZDtBQUNBLE9BQUtDLGVBQUwsR0FBdUIsSUFBdkI7O0FBRUEsT0FBS0MsS0FBTCxHQUFhWixRQUFRWSxLQUFyQjtBQUNBLE9BQUtDLE1BQUwsR0FBY2IsUUFBUWEsTUFBdEI7O0FBR0EsT0FBS1QsYUFBTCxDQUFtQlUsWUFBbkIsQ0FBZ0MsT0FBaEMsRUFBd0MsS0FBS0YsS0FBN0M7QUFDQSxPQUFLUixhQUFMLENBQW1CVSxZQUFuQixDQUFnQyxRQUFoQyxFQUF5QyxLQUFLRCxNQUE5Qzs7QUFFSDtBQUNBLE9BQUtFLE1BQUwsR0FBYyxDQUFkOztBQUVBO0FBQ0EsT0FBS0MsWUFBTCxHQUFvQixJQUFwQjs7QUFFRztBQUNBLE9BQUtDLE9BQUwsR0FBZTtBQUNiQyxnQkFBVyxDQURFO0FBRWJDLGdCQUFXO0FBRkUsR0FBZjs7QUFLQSxPQUFLRCxVQUFMLEdBQWtCLENB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QUFJQSxXQUFXLEVBQWY7O0FBRUEsTUFBSWIsVUFBVSxLQUFLQyxVQUFMLEVBQWQ7QUFDQSxNQUFJVSxhQUFhLEtBQUtBLFVBQXRCO0FBQ0EsTUFBSUMsYUFBYSxLQUFLQSxVQUF0Qjs7QUFFQWtNLGVBQWF6RixHQUFiLENBQWlCLFVBQVNDLElBQVQsRUFBY2hCLEtBQWQsRUFBb0I7O0FBRW5DLFFBQUl0RSxJQUFJc0YsS0FBS3RGLENBQWI7QUFDQSxRQUFJQyxJQUFJcUYsS0FBS3JGLENBQWI7QUFDQSxRQUFJNUIsUUFBUWlILEtBQUtqSCxLQUFqQjtBQUNBLFFBQUlDLFNBQVNnSCxLQUFLaEgsTUFBbEI7QUFDQSxRQUFJK0YsVUFBVyxzQkFBWXJFLENBQVosRUFBY0MsQ0FBZCxFQUFnQjVCLEtBQWhCLEVBQXNCQyxNQUF0QixFQUE2QmdILEtBQUtDLEtBQWxDLEVBQXdDakIsS0FBeEMsQ0FBZjs7QUFFQXpGLGFBQVN1RyxJQUFULENBQWNmLE9BQWQ7QUFFQyxHQVZIOztBQVlBLE9BQUt1QyxXQUFMLENBQWlCL0gsUUFBakI7O0FBRUEsT0FBS21ILFlBQUw7QUFHQSxDQTNCRDs7QUE4QkErRSxPQUFPQyxPQUFQLEdBQWlCek4sT0FBakI7Ozs7Ozs7O2dDQXRpQ0lBLE8iLCJmaWxlIjoiUGxhbk1hcC5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdG1hY196Yy9Db2RlL2tyLWFkbWluIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgTG9hZGluZyBmcm9tICcuL0xvYWRpbmcnO1xuaW1wb3J0IFN0YXRpb24gZnJvbSAnLi9TdGF0aW9uJztcbmltcG9ydCBMb2cgZnJvbSAnLi9Mb2cnO1xuXG4vL+W5s+mdouWbvlxuLy89PT09PT09PT09PT09PT09PT09PT09PVxudmFyIFBsYW5NYXAgPSBmdW5jdGlvbihlbGVtZW50SWROYW1lLENvbmZpZ3MsUGx1Z2lucyl7XG5cbiAgICB0aGlzLmNvbmZpZ3MgPSBDb25maWdzO1xuICAgIHRoaXMucGx1Z2lucyA9IFBsdWdpbnM7XG4gICAgLy9kb23kv6Hmga9cbiAgICB0aGlzLmVsZW1lbnRJZE5hbWUgPSBlbGVtZW50SWROYW1lO1xuICAgIHRoaXMuY2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZE5hbWUpO1xuXG4gICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXNFbGVtZW50LmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAvL+WfuuacrOS/oeaBr1xuICAgIHRoaXMuc2NhbGVYID0gMTtcbiAgICB0aGlzLnNjYWxlWSA9IDE7XG4gICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2UgPSBudWxsO1xuXG4gICAgdGhpcy53aWR0aCA9IENvbmZpZ3Mud2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBDb25maWdzLmhlaWdodDtcblxuXG4gICAgdGhpcy5jYW52YXNFbGVtZW50LnNldEF0dHJpYnV0ZSgnd2lkdGgnLHRoaXMud2lkdGgpO1xuICAgIHRoaXMuY2FudmFzRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsdGhpcy5oZWlnaHQpO1xuXG5cdC8v5aSa6YCJ5ouW5Yqo44CB5Y2V6YCJXG5cdHRoaXMuc2luZ2xlID0gMTtcblxuXHQvL2NsaWNrc3RhdGlvblxuXHR0aGlzLmNsaWNrU3RhdGlvbiA9IG51bGw7XG5cbiAgICAvL+m7mOiupFxuICAgIHRoaXMuZGVmYXVsdCA9IHtcbiAgICAgIHRyYW5zbGF0ZVg6MCxcbiAgICAgIHRyYW5zbGF0ZVk6MCxcbiAgICB9O1xuXG4gICAgdGhpcy50cmFuc2xhdGVYID0gMDtcbiAgICB0aGlzLnRyYW5zbGF0ZVkgPSAwO1xuXG5cbiAgICAvL+W3peS9jeS/oeaBr1xuICAgIHRoaXMuc3RhdGlvbnMgPSBbXTtcbiAgICB0aGlzLmJlZ2luRHJhZ1N0YXRpb24gPSBudWxsO1xuICAgIHRoaXMuc2VsZWN0ZWRTdGF0aW9ucyA9IFtdO1xuXG4gICAgLy/kuovku7bnirbmgIFcbiAgICB0aGlzLmV2ZW50VHlwZSA9IHtcbiAgICAgIC8vY2xpY2tcbiAgICAgIGNsaWNrOjAsXG4gICAgICBjbGlja0xlZnQ6MCxcbiAgICAgIGNsaWNrUmlnaHQ6MCxcbiAgICAgIC8vbW92ZVxuICAgICAgbW92ZTowLFxuICAgICAgLy9kcmFnXG4gICAgICBpc0p1ZGdlRHJhZzowLFxuICAgICAgZHJhZzowLFxuICAgICAgZHJhZ0JlZ2luOjAsXG4gICAgICBkcmFnRW5kOjAsXG4gICAgICBkcmFnTWFwOjAsXG4gICAgICBkcmFnU3RhdGlvbjowLFxuICAgICAgLy93aGVsbO+8jea7mui9ruS6i+S7tlxuICAgICAgd2hlbGw6MCxcbiAgICAgIHdoZWxsVXA6MCxcbiAgICAgIHdoZWxsRG93bjowXG4gICAgfVxuXG4gICAgLy/lnZDmoIfkv6Hmga9cbiAgICB0aGlzLm1vdXNlUG9zaXRpb24gPSB7XG4gICAgICBkb3duOntcbiAgICAgICAgeDowLFxuICAgICAgICB5OjBcbiAgICAgIH0sXG4gICAgICB1cDp7XG4gICAgICAgIHg6MCxcbiAgICAgICAgeTowXG4gICAgICB9LFxuICAgICAgbW92ZTp7XG4gICAgICAgIHg6MCxcbiAgICAgICAgeTowXG4gICAgICB9LFxuICAgICAgY3VycmVudDp7XG4gICAgICAgIHg6MCxcbiAgICAgICAgeTowXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy96b29tSW7jgIF6b29tT3V044CBZnVsbGVTY3JlZW7jgIF0cmFuc2xhdGVcbiAgICB0aGlzLm9wZXJhdGlvbiA9ICcnO1xuXG4gICAgdGhpcy5wZXJtaXNzaW9uID0ge1xuICAgICAgZWRpdDoxLFxuICAgIH1cblxuICAgIHRoaXMubG9hZGluZyA9IG5ldyBMb2FkaW5nKHRoaXMuY2FudmFzRWxlbWVudCx0aGlzLmNvbnRleHQsdGhpcy53aWR0aCx0aGlzLmhlaWdodCk7XG5cbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIC8vIHRoaXMubG9hZGluZy5zaG93KCk7XG4gICAgdGhpcy5pbml0aWFsaXplU3R5bGUoKTtcbiAgICB0aGlzLmxvYWRCYWNrZ3JvdW5kSW1hZ2UoZnVuY3Rpb24oKXtcbiAgICAgIF90aGlzLmxvYWRpbmcuaGlkZSgpO1xuICAgICAgICAhX3RoaXMubG9hZGluZy5nZXQoKSAmJiBfdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfSk7XG59XG5cblBsYW5NYXAucHJvdG90eXBlLmdldENvbnRleHQgPSBmdW5jdGlvbigpe1xuICB2YXIgY2FudmFzRWxlbWVudCA9IHRoaXMuY2FudmFzRWxlbWVudDtcbiAgcmV0dXJuIGNhbnZhc0VsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKTtcbn1cblxuUGxhbk1hcC5wcm90b3R5cGUuc2V0T3BlcmF0aW9uID0gZnVuY3Rpb24odmFsdWUpe1xuICAgIHRoaXMub3BlcmF0aW9uID0gdmFsdWU7XG59XG5cblBsYW5NYXAucHJvdG90eXBlLmdldE9wZXJhdGlvbiA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLm9wZXJhdGlvbjtcbn1cblxuLy/mnYPpmZBcblBsYW5NYXAucHJvdG90eXBlLnNldFBlcm1pc3Npb24gPSBmdW5jdGlvbihvcHRpb25zKXtcbiAgICB0aGlzLnBlcm1pc3Npb24gPSBPYmplY3QuYXNzaWduKHt9LHRoaXMucGVybWlzc2lvbixvcHRpb25zKTtcbn1cblxuUGxhbk1hcC5wcm90b3R5cGUuZ2V0UGVybWlzc2lvbiA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLnBlcm1pc3Npb247XG59XG5cblBsYW5NYXAucHJvdG90eXBlLmZ1bGxTY3JlZW4gPSBmdW5jdGlvbigpe1xuICB2YXIgY2FudmFzRWxlbWVudCA9IHRoaXMuY2FudmFzRWxlbWVudDtcbn1cblxuLy/lnZDmoIdcblBsYW5NYXAucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24odHlwZSxsb2Mpe1xuICB2YXIgcG9zaXRpb24gPSB7XG4gICAgeDpNYXRoLmZsb29yKGxvYy54KSxcbiAgICB5Ok1hdGguZmxvb3IobG9jLnkpXG4gIH07XG4gIHZhciBtb3VzZVBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih0aGlzLm1vdXNlUG9zaXRpb24pO1xuICBtb3VzZVBvc2l0aW9uW3R5cGVdID0gcG9zaXRpb247XG4gIHRoaXMubW91c2VQb3NpdGlvbiA9IG1vdXNlUG9zaXRpb247XG59XG5cblBsYW5NYXAucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24odHlwZSl7XG4gIHZhciBtb3VzZVBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih0aGlzLm1vdXNlUG9zaXRpb24pO1xuICByZXR1cm4gbW91c2VQb3NpdGlvblt0eXBlXTtcbn1cblxuLy/orr7nva7kuovku7bnnJ/lgLzmjqjnkIbvvIzlhbbku5blgLxcblBsYW5NYXAucHJvdG90eXBlLnNldEV2ZW50VHJ1ZVNpbWlsYXIgPSBmdW5jdGlvbiAodHlwZSl7XG4gIHZhciBldmVudFR5cGUgPSB0aGlzLmV2ZW50VHlwZTtcbiAgc3dpdGNoICh0eXBlKSB7XG5cbiAgICBjYXNlICdjbGljayc6IHtcbiAgICAgIGV2ZW50VHlwZSA9IE9iamVjdC5hc3NpZ24oe30sZXZlbnRUeXBlLHtjbGljazoxLGNsaWNrTGVmdDowfSk7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlICdjbGlja0xlZnQnOiB7XG4gICAgICBldmVudFR5cGUgPSBPYmplY3QuYXNzaWduKHt9LGV2ZW50VHlwZSx7Y2xpY2s6MSxjbGlja0xlZnQ6MSxjbGlja1JpZ2h0OjB9KTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlICdjbGlja1JpZ2h0Jzoge1xuICAgICAgZXZlbnRUeXBlID0gT2JqZWN0LmFzc2lnbih7fSxldmVudFR5cGUse2NsaWNrOjEsY2xpY2tMZWZ0OjAsY2xpY2tSaWdodDoxfSk7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlICdkcmFnJzoge1xuICAgICAgICBldmVudFR5cGUgPSBPYmplY3QuYXNzaWduKHt9LGV2ZW50VHlwZSx7ZHJhZzoxLGRyYWdFbmQ6MH0pO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FzZSAnZHJhZ0JlZ2luJzoge1xuICAgICAgICBldmVudFR5cGUgPSBPYmplY3QuYXNzaWduKHt9LGV2ZW50VHlwZSx7ZHJhZzoxLGRyYWdFbmQ6MCxkcmFnQmVnaW46MX0pO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ2RyYWdFbmQnOiB7XG4gICAgICAgIGV2ZW50VHlwZSA9IE9iamVjdC5hc3NpZ24oe30sZXZlbnRUeXBlLHtkcmFnOjAsZHJhZ0VuZDoxLGRyYWdCZWdpbjowLGRyYWdTdGF0aW9uOjAsZHJhZ01hcDowfSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAnZHJhZ01hcCc6IHtcbiAgICAgICAgZXZlbnRUeXBlID0gT2JqZWN0LmFzc2lnbih7fSxldmVudFR5cGUse2RyYWc6MSxkcmFnRW5kOjAsZHJhZ1N0YXRpb246MH0pO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ2RyYWdTdGF0aW9uJzoge1xuICAgICAgICBldmVudFR5cGUgPSBPYmplY3QuYXNzaWduKHt9LGV2ZW50VHlwZSx7ZHJhZzoxLGRyYWdFbmQ6MCxkcmFnTWFwOjB9KTtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGRlZmF1bHQ6XG5cbiAgfVxuXG4gIHRoaXMuZXZlbnRUeXBlID0gZXZlbnRUeXBlO1xufVxuXG5cblBsYW5NYXAucHJvdG90eXBlLnNldEV2ZW50ID0gZnVuY3Rpb24odHlwZSx2YWx1ZSl7XG5cbiAgdmFyIGV2ZW50VHlwZSA9IE9iamVjdC5hc3NpZ24oe30sdGhpcy5ldmVudFR5cGUpO1xuICBpZighZXZlbnRUeXBlLmhhc093blByb3BlcnR5KHR5cGUpKXtcbiAgICByZXR1cm4gO1xuICB9XG5cbiAgLy/orr7nva7nm7jkvLznmoTlgLxcbiAgdmFsdWUgJiYgdGhpcy5zZXRFdmVudFRydWVTaW1pbGFyKHR5cGUpO1xuXG4gIGV2ZW50VHlwZSA9IHRoaXMuZXZlbnRUeXBlO1xuICBldmVudFR5cGVbdHlwZV0gPSB2YWx1ZTtcbiAgdGhpcy5ldmVudFR5cGUgPSBldmVudFR5cGU7XG59XG5cblBsYW5NYXAucHJvdG90eXBlLmdldEV2ZW50ID0gZnVuY3Rpb24odHlwZSl7XG4gIHZhciBldmVudFR5cGUgPSBPYmplY3QuYXNzaWduKHt9LHRoaXMuZXZlbnRUeXBlKTtcbiAgaWYoIWV2ZW50VHlwZS5oYXNPd25Qcm9wZXJ0eSh0eXBlKSl7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBldmVudFR5cGVbdHlwZV07XG59XG5cblxuLy/lubPpnaLlm74t5Yid5aeL5YyWXG5QbGFuTWFwLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKXtcbiAgLy90aGlzLmluaXRpYWxpemVTdHlsZSgpO1xuICB0aGlzLmluaXRpYWxpemVUcmFuc0Zvcm0oKTtcbiAgdGhpcy5pbml0aWFsaXplU3RhdGlvbnMoKTtcbiAgdGhpcy5pbml0aWFsaXplRXZlbnRzKCk7XG59XG5cblBsYW5NYXAucHJvdG90eXBlLmluaXRpYWxpemVUcmFuc0Zvcm0gPSBmdW5jdGlvbigpe1xuICB2YXIgYmFja2dyb3VuZEltYWdlID0gdGhpcy5iYWNrZ3JvdW5kSW1hZ2U7XG4gIHZhciBjYW52YXNFbGVtZW50ID0gdGhpcy5jYW52YXNFbGVtZW50O1xuXG4gIHRoaXMuc2NhbGVZID0gTnVtYmVyKGNhbnZhc0VsZW1lbnQuaGVpZ2h0KSAvIE51bWJlcihjYW52YXNFbGVtZW50LmhlaWdodCk7XG5cbn1cblxuLy/lubPpnaLlm74t5Yid5aeL5YyWXG5QbGFuTWFwLnByb3RvdHlwZS5sb2FkQmFja2dyb3VuZEltYWdlID0gZnVuY3Rpb24oY2FsbGJhY2spe1xuICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgaW1hZ2Uuc3JjID0gdGhpcy5jb25maWdzLmJhY2tncm91bmRJbWFnZTtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKXtcbiAgICBfdGhpcy5iYWNrZ3JvdW5kSW1hZ2UgPSB0aGlzO1xuICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gIH1cbn1cblxuUGxhbk1hcC5wcm90b3R5cGUuc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24oKXtcbiAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gIGNvbnRleHQuc2V0VHJhbnNmb3JtKHRoaXMuc2NhbGVYLDAsMCx0aGlzLnNjYWxlWSx0aGlzLnRyYW5zbGF0ZVgsdGhpcy50cmFuc2xhdGVZKTtcbn1cblxuUGxhbk1hcC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpe1xuXG4gIHZhciBjb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0KCk7XG4gIHZhciBjYW52YXNFbGVtZW50ID0gdGhpcy5jYW52YXNFbGVtZW50O1xuXG4gIHZhciBzdyA9IGNhbnZhc0VsZW1lbnQud2lkdGg7XG4gIHZhciBzaCA9IGNhbnZhc0VsZW1lbnQuaGVpZ2h0O1xuXG4gIHZhciBkdyA9IHN3KnRoaXMuc2NhbGVYO1xuICB2YXIgZGggPSBzaCp0aGlzLnNjYWxlWTtcblxuICBjYW52YXNFbGVtZW50LndpZHRoID0gY2FudmFzRWxlbWVudC53aWR0aDtcblxuICAvL2NvbnRleHQuc2V0VHJhbnNmb3JtKDEsMCwwLDEsdGhpcy50cmFuc2xhdGVYLHRoaXMudHJhbnNsYXRlWSk7XG4gIGNvbnRleHQuc2V0VHJhbnNmb3JtKHRoaXMuc2NhbGVYLDAsMCx0aGlzLnNjYWxlWSx0aGlzLnRyYW5zbGF0ZVgsdGhpcy50cmFuc2xhdGVZKTtcblxuICBjb250ZXh0LmNsZWFyUmVjdCgwLDAsY2FudmFzRWxlbWVudC53aWR0aCxjYW52YXNFbGVtZW50LmhlaWdodCk7XG4gIGNvbnRleHQuZmlsbFN0eWxlID0gJyNmZmYnO1xuICBjb250ZXh0LmZpbGxSZWN0KDAsMCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KTtcblxuICBjb250ZXh0LmRyYXdJbWFnZSh0aGlzLmJhY2tncm91bmRJbWFnZSwwLDAsdGhpcy5iYWNrZ3JvdW5kSW1hZ2Uud2lkdGgsdGhpcy5iYWNrZ3JvdW5kSW1hZ2UuaGVpZ2h0KTtcblxufVxuXG4vL+W5s+mdouWbvi3lpJbop4LmoLflvI9cblxuUGxhbk1hcC5wcm90b3R5cGUuaW5pdGlhbGl6ZVN0eWxlID0gZnVuY3Rpb24oKXtcbiAgdmFyIGNhbnZhc0VsZW1lbnQgPSB0aGlzLmNhbnZhc0VsZW1lbnQ7XG4gIHZhciBwYWdlV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgdmFyIHBhZ2VIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgaWYodHlwZW9mIHBhZ2VXaWR0aCAhPT0gJ251bWJlcicpe1xuXG4gICAgaWYoZG9jdW1lbnQuY29tcGF0TW9kZSA9PSAnQ1NTMUNvbXBhdCcpe1xuICAgICAgcGFnZVdpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuICAgICAgcGFnZUhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgfWVsc2V7XG4gICAgICBwYWdlV2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xuICAgICAgcGFnZUhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xuICAgIH1cbiAgfVxuXG4gIGlmKCF0aGlzLndpZHRoKXtcbiAgICB0aGlzLndpZHRoID0gcGFnZVdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gcGFnZUhlaWdodDtcbiAgICBjYW52YXNFbGVtZW50LnNldEF0dHJpYnV0ZSgnd2lkdGgnLHBhZ2VXaWR0aCk7XG4gICAgY2FudmFzRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcscGFnZUhlaWdodCk7XG4gIH1cblxufVxuXG4vL+WcqOW3peS9jeS4rVxuUGxhbk1hcC5wcm90b3R5cGUuaXNQb2ludEluUGF0aCA9IGZ1bmN0aW9uKHgseSl7XG4gIHZhciBjb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0KCk7XG4gIHJldHVybiBjb250ZXh0LmlzUG9pbnRJblBhdGgoeCx5KTtcbn1cbi8v5p+l5om+5byA5aeLZHJhdyBzdGF0aW9uXG5QbGFuTWFwLnByb3RvdHlwZS5tYXBCZWlnaW5EcmF3U3RhdGlvbiA9IGZ1bmN0aW9uKCl7XG5cbiAgdmFyIG1vdXNlRG93blBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbignZG93bicpO1xuICB2YXIgb2Zmc2V0WCA9IG1vdXNlRG93blBvc2l0aW9uLng7XG4gIHZhciBvZmZzZXRZID0gbW91c2VEb3duUG9zaXRpb24ueTtcbiAgdmFyIHN0YXRpb25zID0gdGhpcy5nZXRTdGF0aW9ucygpO1xuICB2YXIgYmVnaW5EcmFnU3RhdGlvbiAgPSBudWxsO1xuICAvL+afpeaJvui1t+Wni+W3peS9jVxuXG4gIGlmKHRoaXMuaXNQb2ludEluUGF0aChvZmZzZXRYLG9mZnNldFkpKXtcbiAgICBzdGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHN0YXRpb24saW5kZXgpe1xuICAgICAgaWYob2Zmc2V0WCA+PXN0YXRpb24ueCAmJiBvZmZzZXRYPD0oc3RhdGlvbi54K3N0YXRpb24ud2lkdGgpKXtcbiAgICAgICAgYmVnaW5EcmFnU3RhdGlvbiA9IHN0YXRpb247XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgdGhpcy5iZWdpbkRyYWdTdGF0aW9uID0gYmVnaW5EcmFnU3RhdGlvbjtcbn1cbi8v5p+l5om+57uT5p2fIGRyYXcgc3RhdGlvblxuUGxhbk1hcC5wcm90b3R5cGUubWFwRW5kRHJhd1N0YXRpb24gPSBmdW5jdGlvbigpe1xuXG4gIHZhciBtb3VzZVVwUG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uKCd1cCcpO1xuICB2YXIgb2Zmc2V0WCA9IG1vdXNlVXBQb3NpdGlvbi54O1xuICB2YXIgb2Zmc2V0WSA9IG1vdXNlVXBQb3NpdGlvbi55O1xuXG4gIHZhciBzdGF0aW9ucyA9IHRoaXMuZ2V0U3RhdGlvbnMoKTtcbiAgdmFyIGVuZERyYWdTdGF0aW9uICA9IG51bGw7XG5cbiAgLy/mn6Xmib7otbflp4vlt6XkvY1cblxuICBpZih0aGlzLmlzUG9pbnRJblBhdGgob2Zmc2V0WCxvZmZzZXRZKSl7XG4gICAgc3RhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihzdGF0aW9uLGluZGV4KXtcbiAgICAgIGlmKG9mZnNldFggPj1zdGF0aW9uLnggJiYgb2Zmc2V0WDw9KHN0YXRpb24ueCtzdGF0aW9uLndpZHRoKSl7XG4gICAgICAgIGVuZERyYWdTdGF0aW9uID0gT2JqZWN0LmFzc2lnbih7fSxzdGF0aW9uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHRoaXMuZW5kRHJhZ1N0YXRpb24gPSBlbmREcmFnU3RhdGlvbjtcbn1cblxuXG4vL+aLluWKqOW3peS9jVxuUGxhbk1hcC5wcm90b3R5cGUub25EcmFnU3RhdGlvbiA9IGZ1bmN0aW9uKCl7XG5cbiAgLy/liKTmlq3mmK/lkKbmnInmnYPpmZBcblxuICB2YXIgcGVybWlzc2lvbiA9IHRoaXMucGVybWlzc2lvbjtcblxuICBpZighKHBlcm1pc3Npb24uaGFzT3duUHJvcGVydHkoJ2VkaXQnKSAmJiBwZXJtaXNzaW9uLmVkaXQpKXtcbiAgICByZXR1cm4gO1xuICB9XG5cbiAgdmFyIGNsaWNrU3RhdGlvbiA9IHRoaXMuY2xpY2tTdGF0aW9uO1xuXG4gIGlmKHRoaXMuc2VsZWN0ZWRTdGF0aW9ucy5sZW5ndGggJiYgY2xpY2tTdGF0aW9uICYmICBjbGlja1N0YXRpb24uZ2V0Q2hlY2tlZCgpKXtcbiAgICB0aGlzLmNyZWF0ZURyYWdTdGF0aW9uQ2FudmFzKCk7XG4gIH1cblxuICAvL+WTjeW6lOaLluaLveW3peS9jeW8gOWni+S6i+S7tlxuICBpZih0aGlzLmdldEV2ZW50KCdkcmFnQmVnaW4nKSAmJiB0aGlzLmdldEV2ZW50KCdkcmFnU3RhdGlvbicpKXtcbiAgICByZXR1cm4gO1xuICB9XG5cbiAgdGhpcy5zZXRFdmVudCgnZHJhZycsMSk7XG4gIHRoaXMuc2V0RXZlbnQoJ2RyYWdCZWdpbicsMSk7XG4gIHRoaXMuc2V0RXZlbnQoJ2RyYWdTdGF0aW9uJywxKTtcbiAgdGhpcy5vbkRyYWdTdGF0aW9uQmVnaW4oKTtcblxufVxuXG5QbGFuTWFwLnByb3RvdHlwZS5vbkRyYWdTdGF0aW9uQmVnaW4gPSBmdW5jdGlvbigpe1xuICB2YXIgY2FudmFzRWxlbWVudCA9IHRoaXMuY2FudmFzRWxlbWVudDtcbiAgTG9nLmRlYnVnKCfmi5bmi73lt6XkvY3lvIDlp4vkuoYnKTtcbiAgdmFyIHNlbGVjdGVkID0gW107XG4gIGlmKHRoaXMuc2luZ2xlKXtcbiAgICB2YXIgZG93blBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbignZG93bicpO1xuICAgIHZhciBzZWxlY3RlZFN0YXRpb24gPSB0aGlzLmhhc1Bvc2l0aW9uU3RhdGlvbihkb3duUG9zaXRpb24pO1xuXG4gICAgaWYoc2VsZWN0ZWRTdGF0aW9uLmdldENoZWNrZWQoKSl7XG4gICAgICBzZWxlY3RlZC5wdXNoKHNlbGVjdGVkU3RhdGlvbik7XG4gICAgfVxuICB9ZWxzZXtcbiAgICAvL+mAieS4reeahOW3peS9jVxuICAgIHZhciBzdGF0aW9ucyA9IHRoaXMuZ2V0U3RhdGlvbnMoKTtcbiAgICBzdGF0aW9ucy5tYXAoZnVuY3Rpb24oaXRlbSxpbmRleCl7XG4gICAgICBpZihpdGVtLmdldENoZWNrZWQoKSl7XG4gICAgICAgIHZhciBzdGF0aW9uID0gbmV3IFN0YXRpb24oaXRlbS54LGl0ZW0ueSxpdGVtLndpZHRoLGl0ZW0uaGVpZ2h0LGl0ZW0uYmFzaWMsaXRlbS5pbmRleCk7XG4gICAgICAgIHNlbGVjdGVkLnB1c2goc3RhdGlvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgdGhpcy5zZWxlY3RlZFN0YXRpb25zID0gc2VsZWN0ZWQ7XG59XG5cblBsYW5NYXAucHJvdG90eXBlLmNyZWF0ZURyYWdTdGF0aW9uQ2FudmFzTW9kYWwgPSBmdW5jdGlvbigpe1xuXG4gIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICB2YXIgY2FudmFzRWxlbWVudCA9IHRoaXMuY2FudmFzRWxlbWVudDtcbiAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgY29udGV4dC5yZWN0KC1NYXRoLmFicyh0aGlzLnRyYW5zbGF0ZVgpLC1NYXRoLmFicyh0aGlzLnRyYW5zbGF0ZVkpLHRoaXMud2lkdGgqdGhpcy5zY2FsZVgrMipNYXRoLmFicyh0aGlzLnRyYW5zbGF0ZVgpLHRoaXMuaGVpZ2h0KzIqTWF0aC5hYnModGhpcy50cmFuc2xhdGVZKSk7XG4gIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiNkZGRcIjtcbiAgY29udGV4dC5maWxsU3R5bGUgPSBcInJnYmEoMCwwLDAsMC41KVwiO1xuICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICBjb250ZXh0LnN0cm9rZSgpO1xuICBjb250ZXh0LmZpbGwoKTtcbn1cblxuUGxhbk1hcC5wcm90b3R5cGUuY3JlYXRlRHJhZ1N0YXRpb25DYW52YXMgPSBmdW5jdGlvbigpe1xuXG4gIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICB2YXIgY2FudmFzRWxlbWVudCA9IHRoaXMuY2FudmFzRWxlbWVudDtcbiAgdmFyIHNlbGVjdGVkU3RhdGlvbnMgPSB0aGlzLnNlbGVjdGVkU3RhdGlvbnM7XG5cbiAgdmFyIHBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbignbW92ZScpO1xuXG4gIHRoaXMuZHJhd1N0YXRpb25zKCk7XG4gIHRoaXMuY3JlYXRlRHJhZ1N0YXRpb25DYW52YXNNb2RhbCgpO1xuXG4gIHZhciBtb3ZlID0gdGhpcy5nZXRQb3NpdGlvbignbW92ZScpO1xuXG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgLy/pgInkuK3nmoTlt6XkvY1cbiAgc2VsZWN0ZWRTdGF0aW9ucy5tYXAoZnVuY3Rpb24oc3RhdGlvbil7XG5cbiAgICB2YXIgcG9zaXRpb25YICA9IHN0YXRpb24uZGVmYXVsdC54ICsgbW92ZS54IC8gX3RoaXMuc2NhbGVYIC0gc3RhdGlvbi54O1xuICAgIHZhciBwb3NpdGlvblkgPSBzdGF0aW9uLmRlZmF1bHQueSArIG1vdmUueSAvIF90aGlzLnNjYWxlWSAtIHN0YXRpb24ueTtcblxuICAgIHN0YXRpb24ucG9zaXRpb24ocG9zaXRpb25YLHBvc2l0aW9uWSk7XG4gICAgc3RhdGlvbi5jcmVhdGUoY29udGV4dCk7XG4gIH0pO1xufVxuXG4vL+S6pOaNouW3peS9jeS4iueahOWRmOW3peS/oeaBr1xuUGxhbk1hcC5wcm90b3R5cGUuc3dhcFN0YXRpb25TdGFmZiA9IGZ1bmN0aW9uKG9yaWdpblN0YXRpb24sdGFyZ2V0U3RhdGlvbil7XG5cblx0dmFyIFBsdWducyA9IHRoaXMucGx1Z2lucztcblxuXHRQbHVnbnMgJiYgUGx1Z25zLnN3YXBTdGF0aW9uU3RhZmYgJiYgUGx1Z25zLnN3YXBTdGF0aW9uU3RhZmYob3JpZ2luU3RhdGlvbi5nZXRCYXNpY0luZm8oKSx0YXJnZXRTdGF0aW9uLmdldEJhc2ljSW5mbygpKTtcblxuXHR0YXJnZXRTdGF0aW9uLnNldENoZWNrZWQob3JpZ2luU3RhdGlvbi5nZXRDaGVja2VkKCkpO1xuXHRvcmlnaW5TdGF0aW9uLnNldENoZWNrZWQoIW9yaWdpblN0YXRpb24uZ2V0Q2hlY2tlZCgpKTtcblxuXG5cdHZhciBzdGF0aW9ucyA9IHRoaXMuZ2V0U3RhdGlvbnMoKTtcblx0c3RhdGlvbnMuc3BsaWNlKG9yaWdpblN0YXRpb24uZ2V0SW5kZXgoKSwxLG9yaWdpblN0YXRpb24pO1xuXHRzdGF0aW9ucy5zcGxpY2UodGFyZ2V0U3RhdGlvbi5nZXRJbmRleCgpLDEsdGFyZ2V0U3RhdGlvbik7XG5cblx0dGhpcy5zZXRTdGF0aW9ucyhzdGF0aW9ucyk7XG5cblx0dGhpcy5kcmF3U3RhdGlvbnMoKTtcblxuXG59XG5cblBsYW5NYXAucHJvdG90eXBlLm9uRHJhZ1N0YXRpb25FbmQgPSBmdW5jdGlvbigpe1xuXG5cdHZhciBkb3duTG9jID0gdGhpcy5nZXRQb3NpdGlvbignZG93bicpO1xuXHR2YXIgdXBMb2MgPSB0aGlzLmdldFBvc2l0aW9uKCd1cCcpO1xuXG5cdHZhciBvcmlnaW5TdGF0aW9uID0gdGhpcy5oYXNQb3NpdGlvblN0YXRpb24oZG93bkxvYyk7XG5cdHZhciB0YXJnZXRTdGF0aW9uID0gdGhpcy5oYXNQb3NpdGlvblN0YXRpb24odXBMb2MpO1xuXG5cdGlmKHRhcmdldFN0YXRpb24gJiYgb3JpZ2luU3RhdGlvbi5nZXRJbmRleCgpICE9PSB0YXJnZXRTdGF0aW9uLmdldEluZGV4KCkpe1xuXHRcdHRoaXMuc3dhcFN0YXRpb25TdGFmZihvcmlnaW5TdGF0aW9uLHRhcmdldFN0YXRpb24pO1xuXHR9XG5cbiAgdGhpcy5zZWxlY3RlZFN0YXRpb25zID0gW107XG5cbn1cblxuLy/pu5jorqTliY3kuIDkuKrlgLxcbi8qXG5QbGFuTWFwLnByb3RvdHlwZS5zZXREZWZhdWx0ID0gZnVuY3Rpb24oY29uZmlnKXtcbiAgdmFyIGRlZmF1bHRDb25maWdzID0gT2JqZWN0LmFzc2lnbih7fSx0aGlzLmRlZmF1bHQsY29uZmlnKTtcbiAgdGhpcy5kZWZhdWx0ID0gZGVmYXVsdENvbmZpZ3M7XG59XG4qL1xuLy/lubPpnaLlm77np7vliqhcblBsYW5NYXAucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKHRyYW5zbGF0ZVgsdHJhbnNsYXRlWSl7XG5cbiAgdmFyIGNvbnRleHQgPSB0aGlzLmdldENvbnRleHQoKTtcbiAgdmFyIGNhbnZhc0VsZW1lbnQgPSB0aGlzLmNhbnZhc0VsZW1lbnQ7XG4gIHZhciBiYWNrZ3JvdW5kSW1hZ2UgPSB0aGlzLmJhY2tncm91bmRJbWFnZTtcblxuICAvL+WKoOS4iui+ueeVjOWAvFxuICAvL3RyYW5zbGF0ZVggPSAodHJhbnNsYXRlWDwwP3RyYW5zbGF0ZVg6MCk7XG4gIC8vdHJhbnNsYXRlWCA9ICh0cmFuc2xhdGVYPC1iYWNrZ3JvdW5kSW1hZ2Uud2lkdGgqdGhpcy5zY2FsZVg/LWJhY2tncm91bmRJbWFnZS53aWR0aCp0aGlzLnNjYWxlWDp0cmFuc2xhdGVYKTtcblxuICAvL3RyYW5zbGF0ZVkgPSAodHJhbnNsYXRlWTwwP3RyYW5zbGF0ZVk6MCk7XG4gIC8vdHJhbnNsYXRlWSA9ICh0cmFuc2xhdGVZPC1iYWNrZ3JvdW5kSW1hZ2UuaGVpZ2h0Py1iYWNrZ3JvdW5kSW1hZ2UuaGVpZ2h0OnRyYW5zbGF0ZVkpO1xuXG4gIHRoaXMudHJhbnNsYXRlWCA9IHRyYW5zbGF0ZVg7XG4gIHRoaXMudHJhbnNsYXRlWSA9IHRyYW5zbGF0ZVk7XG5cbn1cblxuXG5cblxuUGxhbk1hcC5wcm90b3R5cGUub25MZWZ0RXZlbnRDbGljayA9IGZ1bmN0aW9uKCl7XG5cbiAgdmFyIGlzT2sgPSAodGhpcy5nZXRFdmVudCgnY2xpY2tMZWZ0JykgJiYgIXRoaXMuZ2V0RXZlbnQoJ2NsaWNrUmlnaHQnKSk7XG4gIGlmKCFpc09rKXtcbiAgICByZXR1cm4gO1xuICB9XG5cbiAgTG9nLmRlYnVnKCflt6bngrnlh7vkuovku7YnKTtcblxuICB2YXIgbW91c2VVcFBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbigndXAnKTtcbiAgdGhpcy5vbkNoZWNrZWRTdGF0aW9uKG1vdXNlVXBQb3NpdGlvbik7XG59XG5cblBsYW5NYXAucHJvdG90eXBlLm9uUmlnaHRFdmVudENsaWNrID0gZnVuY3Rpb24oKXtcblxuICB2YXIgaXNPayA9ICghdGhpcy5nZXRFdmVudCgnY2xpY2tMZWZ0JykgJiYgdGhpcy5nZXRFdmVudCgnY2xpY2tSaWdodCcpKTtcbiAgaWYoIWlzT2spe1xuICAgIHJldHVybiA7XG4gIH1cblxuICB2YXIgbW91c2VVcFBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbigndXAnKTtcblxuICBpZih0aGlzLmlzUG9zaXRpb25JblN0YXRpb24obW91c2VVcFBvc2l0aW9uKSl7XG5cbiAgICB2YXIgdGFyZ2V0U3RhdGlvbiA9IHRoaXMuaGFzUG9zaXRpb25TdGF0aW9uKG1vdXNlVXBQb3NpdGlvbik7XG5cbiAgICBpZih0YXJnZXRTdGF0aW9uID09PSBudWxsKXtcbiAgICAgIHJldHVybiA7XG4gICAgfVxuXG4gICAgdGhpcy5vcGVuU3RhdGlvbkRpYWxvZyh0YXJnZXRTdGF0aW9uKTtcbiAgfVxuXG59XG5cblBsYW5NYXAucHJvdG90eXBlLmhhc1Bvc2l0aW9uU3RhdGlvbiA9IGZ1bmN0aW9uKGxvYyl7XG5cbiAgaWYodHlwZW9mIGxvYyAhPT0gJ29iamVjdCcpe1xuICAgIHRocm93IG5ldyBFcnJvcignUGxhbk1hcDpoYXNQb3NpdGlvblN0YXRpb24s5Y+C5pWwQGxvY+S4uuWvueixoScpO1xuICB9XG5cbiAgdmFyIHN0YXRpb25zID0gdGhpcy5nZXRTdGF0aW9ucygpO1xuICB2YXIgaGFzU3RhdGlvbiA9IG51bGw7XG4gIGZvcih2YXIgaSA9IDA7aTxzdGF0aW9ucy5sZW5ndGg7aSsrKXtcbiAgICB2YXIgc3RhdGlvbiA9IHN0YXRpb25zW2ldO1xuICAgIGlmKGxvYy54ID49c3RhdGlvbi54KnRoaXMuc2NhbGVYICYmIGxvYy54PD0oc3RhdGlvbi54K3N0YXRpb24ud2lkdGgpKnRoaXMuc2NhbGVYICYmIChsb2MueT49c3RhdGlvbi55KnRoaXMuc2NhbGVZKSAmJiBsb2MueTw9IChzdGF0aW9uLnkrc3RhdGlvbi5oZWlnaHQpKnRoaXMuc2NhbGVZKXtcbiAgICAgIGhhc1N0YXRpb24gPSBzdGF0aW9uO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBoYXNTdGF0aW9uO1xufVxuLy/lnZDmoIflnKjlt6XkvY3kuIpcblBsYW5NYXAucHJvdG90eXBlLmlzUG9zaXRpb25JblN0YXRpb24gPSBmdW5jdGlvbihsb2Mpe1xuICB2YXIgaXNPayA9IGZhbHNlO1xuICBsZXQgc3RhdGlvbnMgPSB0aGlzLmdldFN0YXRpb25zKCk7XG5cbiAgLypcbiAgVE9ETzpidWdcbiAgaWYoIXRoaXMuaXNQb2ludEluUGF0aChsb2MueCxsb2MueSkpe1xuICByZXR1cm4gaXNPaztcbiAgfVxuICAqL1xuICBpZih0aGlzLmhhc1Bvc2l0aW9uU3RhdGlvbihsb2MpKXtcbiAgICBpc09rID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBpc09rO1xufVxuXG5QbGFuTWFwLnByb3RvdHlwZS5jYWxjU2NhbGUgPSBmdW5jdGlvbigpe1xuXG4gIHZhciBtb3ZlICA9IHRoaXMuZ2V0UG9zaXRpb24oJ21vdmUnKTtcblxuICB2YXIgZGVmYXVsdFNjYWxlID0gMC4xO1xuXG4gIC8v57yp5bCPXG4gICBpZih0aGlzLmdldEV2ZW50KCd3aGVsbCcpICYmIHRoaXMuZ2V0RXZlbnQoJ3doZWxsVXAnKSl7XG4gICAgZGVmYXVsdFNjYWxlID0gLWRlZmF1bHRTY2FsZTtcbiAgfVxuXG4gIHZhciBzY2FsZVggPSB0aGlzLnNjYWxlWCtkZWZhdWx0U2NhbGU7XG4gIHZhciBzY2FsZVkgPSB0aGlzLnNjYWxlWStkZWZhdWx0U2NhbGU7XG5cblxuICB2YXIgZGVmYXVsdFRyYW5zbGF0ZVggPSBOdW1iZXIobW92ZS54KSpOdW1iZXIoZGVmYXVsdFNjYWxlKTtcbiAgLy8tIE51bWJlcihtb3ZlLngpO1xuICB2YXIgZGVmYXVsdFRyYW5zbGF0ZVkgPSBOdW1iZXIobW92ZS55KSpOdW1iZXIoZGVmYXVsdFNjYWxlKTtcbiAgLy8gLSBOdW1iZXIobW92ZS55KTtcblxuXG4gIC8v5pS+5aSnXG4gIGlmKHRoaXMuZ2V0RXZlbnQoJ3doZWxsJykgJiYgdGhpcy5nZXRFdmVudCgnd2hlbGxEb3duJykpe1xuICAgIGRlZmF1bHRUcmFuc2xhdGVYID0gLWRlZmF1bHRUcmFuc2xhdGVYO1xuICAgIGRlZmF1bHRUcmFuc2xhdGVZID0gLWRlZmF1bHRUcmFuc2xhdGVZO1xuICAgIC8v57yp5bCPXG4gIH1lbHNlIGlmKHRoaXMuZ2V0RXZlbnQoJ3doZWxsJykgJiYgdGhpcy5nZXRFdmVudCgnd2hlbGxVcCcpKXtcbiAgICBkZWZhdWx0VHJhbnNsYXRlWCA9IC1kZWZhdWx0VHJhbnNsYXRlWDtcbiAgICBkZWZhdWx0VHJhbnNsYXRlWSA9IC1kZWZhdWx0VHJhbnNsYXRlWTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKGRlZmF1bHRUcmFuc2xhdGVYLG1vdmUueCxkZWZhdWx0U2NhbGUsZGVmYXVsdFRyYW5zbGF0ZVkpO1xuXG5cbnZhciB0cmFuc2xhdGVYID0gdGhpcy50cmFuc2xhdGVYICsgZGVmYXVsdFRyYW5zbGF0ZVg7XG52YXIgdHJhbnNsYXRlWSA9IHRoaXMudHJhbnNsYXRlWSArIGRlZmF1bHRUcmFuc2xhdGVZO1xuXG5cblx0aWYoc2NhbGVYPDAuNiB8fCBzY2FsZVggPjEwKXtcblx0XHRyZXR1cm4gO1xuXHR9XG5cblx0dGhpcy50cmFuc2xhdGUodHJhbnNsYXRlWCx0cmFuc2xhdGVZKTtcblx0dGhpcy5zY2FsZShzY2FsZVgsc2NhbGVZKTtcblxuXHR0aGlzLmRyYXdTdGF0aW9ucygpO1xufVxuXG4vL+W5s+mdouWbvu+8jWV2ZW50c1xuUGxhbk1hcC5wcm90b3R5cGUuaW5pdGlhbGl6ZUV2ZW50cyA9IGZ1bmN0aW9uKCl7XG5cblx0bGV0IGNhbnZhc0VsZW1lbnQgPSB0aGlzLmNhbnZhc0VsZW1lbnQ7XG5cdGxldCBjb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0KCk7XG5cblx0bGV0IF90aGlzID0gdGhpcztcblxuXG5cdHZhciBjYW52YXNNb3VzZVdoZWxsRXZlbnQgPSBmdW5jdGlvbihldmVudCl7XG5cdFx0dmFyIHBvc2l0aW9uID0gX3RoaXMud2luZG93VG9DYW52YXMoZXZlbnQpO1xuXHRcdF90aGlzLnNldFBvc2l0aW9uKCdkb3duJyxwb3NpdGlvbilcblxuXHRcdFx0dmFyIGRlbHRhWSA9IGV2ZW50LmRlbHRhWTtcblx0XHRpZihkZWx0YVk+MCl7XG5cdFx0XHRfdGhpcy5zZXRFdmVudCgnd2hlbGwnLDEpO1xuXHRcdFx0X3RoaXMuc2V0RXZlbnQoJ3doZWxsRG93bicsMSk7XG5cdFx0XHRfdGhpcy5zZXRFdmVudCgnd2hlbGxVcCcsMCk7XG5cdFx0fWVsc2V7XG5cdFx0XHRfdGhpcy5zZXRFdmVudCgnd2hlbGwnLDEpO1xuXHRcdFx0X3RoaXMuc2V0RXZlbnQoJ3doZWxsRG93bicsMCk7XG5cdFx0XHRfdGhpcy5zZXRFdmVudCgnd2hlbGxVcCcsMSk7XG5cdFx0fVxuXG5cdFx0X3RoaXMuY2FsY1NjYWxlKCk7XG5cblx0fVxuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V3aGVlbFwiLGNhbnZhc01vdXNlV2hlbGxFdmVudCxmYWxzZSk7XG5cblx0Ly/lj5bmtojpvKDmoIflj7Plh7vkuovku7ZcblxuXHR2YXIgY2FudmFzQ2FuY2VsUmlnaHRNb3VzZUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQpe1xuXHRcdC8vIOm8oOagh+WPs+WHu+S6i+S7tlxuXHRcdGlmKGV2ZW50LmJ1dHRvbiA9PT0gMil7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0fTtcblx0fVxuXG5cdC8v6byg5qCH54K55Ye7XG5cdHZhciBjYW52YXNNb3VzZURvd24gPSBmdW5jdGlvbihldmVudCl7XG5cdFx0ZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0X3RoaXMuc2V0RXZlbnQoJ2RyYWcnLDApO1xuXG5cdFx0dmFyIHBvc2l0aW9uID0gX3RoaXMud2luZG93VG9DYW52YXMoZXZlbnQpO1xuXHRcdF90aGlzLnNldFBvc2l0aW9uKCdkb3duJyxwb3NpdGlvbik7XG5cdFx0Ly9fdGhpcy5zZXREZWZhdWx0KHt0cmFuc2xhdGVYOl90aGlzLnRyYW5zbGF0ZVgsdHJhbnNsYXRlWTpfdGhpcy50cmFuc2xhdGVZfSk7XG5cblx0XHQvL+m8oOagh+WPs+WHu+S6i+S7tlxuXHRcdGlmKGV2ZW50LmJ1dHRvbiA9PT0gMil7XG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGNhbnZhc0NhbmNlbFJpZ2h0TW91c2VFdmVudCwgZmFsc2UpO1xuXHRcdFx0X3RoaXMuc2V0RXZlbnQoJ2NsaWNrUmlnaHQnLDEpO1xuXHRcdFx0X3RoaXMuc2V0RXZlbnQoJ2NsaWNrTGVmdCcsMCk7XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9ZWxzZXtcblx0XHRcdF90aGlzLnNldEV2ZW50KCdjbGlja1JpZ2h0JywwKTtcblx0XHRcdF90aGlzLnNldEV2ZW50KCdjbGlja0xlZnQnLDEpO1xuXHRcdH1cblxuXHRcdC8v56e75YqoXG5cdFx0d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0Y2FudmFzRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLGNhbnZhc01vdXNlTW92ZSxmYWxzZSk7XG5cdFx0XHRcdH0sMTApO1xuXHR9XG5cdC8v6byg5qCH56e75YqoXG5cdHZhciBjYW52YXNNb3VzZU1vdmUgPSBmdW5jdGlvbihlKXtcblx0XHRlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG5cblxuXHRcdF90aGlzLnNldEV2ZW50KCdkcmFnJywxKVxuXHRcdFx0X3RoaXMuc2V0RXZlbnQoJ2NsaWNrJywwKVxuXHRcdFx0X3RoaXMuc2V0RXZlbnQoJ2NsaWNrTGVmdCcsMClcblx0XHRcdF90aGlzLnNldEV2ZW50KCdjbGlja1JpZ2h0JywwKVxuXG5cblx0XHRcdC8v5Yik5pat5piv5ouW5ou96IOM5pmv5Zu+44CB5bel5L2NXG5cdFx0XHR2YXIgbG9jID0gX3RoaXMud2luZG93VG9DYW52YXMoZSk7XG5cdFx0X3RoaXMuc2V0UG9zaXRpb24oJ21vdmUnLGxvYyk7XG5cdFx0X3RoaXMub25EcmFnKCk7XG5cblx0fVxuXG5cdGNhbnZhc0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxmdW5jdGlvbihldmVudCl7XG5cdFx0XHRfdGhpcy5zZXRQb3NpdGlvbignbW92ZScsX3RoaXMud2luZG93VG9DYW52YXMoZXZlbnQpKTtcblxuXHRcdFx0dmFyIGNhbnZhc0VsZW1lbnQgPSBfdGhpcy5jYW52YXNFbGVtZW50O1xuXHRcdFx0dmFyIGxvYyA9IF90aGlzLndpbmRvd1RvQ2FudmFzKGV2ZW50KTtcblx0XHRcdC8v5pu05pS56byg5qCH54q25oCBXG5cdFx0XHRpZihfdGhpcy5oYXNQb3NpdGlvblN0YXRpb24obG9jKSl7XG5cdFx0XHRjYW52YXNFbGVtZW50LnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcblx0XHRcdH1cblxuXHRcdFx0fSxmYWxzZSk7XG5cblx0Ly9tb3VzZWRvd25cblx0Y2FudmFzRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLGNhbnZhc01vdXNlRG93bixmYWxzZSk7XG5cblx0Ly9tb3VzZXVwXG5cdGNhbnZhc0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsZnVuY3Rpb24oZXZlbnQpe1xuXHRcdFx0ZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgY2FudmFzQ2FuY2VsUmlnaHRNb3VzZUV2ZW50LCBmYWxzZSk7XG5cblx0XHRcdF90aGlzLnNldFBvc2l0aW9uKCd1cCcsX3RoaXMud2luZG93VG9DYW52YXMoZXZlbnQpKVxuXG5cdFx0XHRjYW52YXNFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsY2FudmFzTW91c2VNb3ZlLGZhbHNlKTtcblxuXHRcdFx0X3RoaXMub25EcmFnRW5kKCk7XG5cblxuXG5cdFx0XHRfdGhpcy5vbkNsaWNrKCk7XG5cblx0XHRcdH0pO1xufVxuXG5QbGFuTWFwLnByb3RvdHlwZS5qdWRnZUNsaWNrID0gZnVuY3Rpb24oKXtcblxuXHR2YXIgbW91c2VEb3duUG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uKCdkb3duJyk7XG5cdHZhciBtb3VzZVVwUG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uKCd1cCcpO1xuXHR2YXIgZGlmZlggPSBNYXRoLmFicyhtb3VzZURvd25Qb3NpdGlvbi54IC0gbW91c2VVcFBvc2l0aW9uLngpO1xuXHR2YXIgZGlmZlkgPSBNYXRoLmFicyhtb3VzZURvd25Qb3NpdGlvbi55IC0gbW91c2VVcFBvc2l0aW9uLnkpO1xuXG5cdGlmKGRpZmZYIDwgMSAmJiBkaWZmWTwxKXtcblx0XHR0aGlzLnNldEV2ZW50KCdjbGljaycsMSk7XG5cdH1cblxufVxuXG4vL+WIpOaWreaYr+aLluaLveW3peS9jei/mOaYr21hcFxuUGxhbk1hcC5wcm90b3R5cGUuanVkZ2VEcmFnU3RhdGlvbk9yTWFwID0gZnVuY3Rpb24oKXtcblxuICB2YXIgbW91c2VEb3duUG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uKCdkb3duJyk7XG4gIHZhciBpc1N0YXRpb24gPSBmYWxzZTtcbiAgaWYodGhpcy5oYXNQb3NpdGlvblN0YXRpb24odGhpcy5nZXRQb3NpdGlvbignZG93bicpKSl7XG4gICAgICAgIGlzU3RhdGlvbiA9IHRydWU7XG4gIH1cblxuICB0aGlzLnNldEV2ZW50KCdkcmFnU3RhdGlvbicsTnVtYmVyKGlzU3RhdGlvbikpO1xuICB0aGlzLnNldEV2ZW50KCdkcmFnTWFwJyxOdW1iZXIoIWlzU3RhdGlvbikpO1xuICB0aGlzLnNldEV2ZW50KCdpc0p1ZGdlRHJhZycsMSk7XG59XG5cblBsYW5NYXAucHJvdG90eXBlLm9uRHJhZyA9IGZ1bmN0aW9uKCl7XG5cbiAgaWYoIXRoaXMuZ2V0RXZlbnQoJ2lzSnVkZ2VEcmFnJykpe1xuXHQgICB0aGlzLmp1ZGdlRHJhZ1N0YXRpb25Pck1hcCgpO1xuICB9XG5cblx0aWYodGhpcy5nZXRFdmVudCgnZHJhZycpICYmIHRoaXMuZ2V0RXZlbnQoJ2RyYWdNYXAnKSl7XG5cdFx0dGhpcy5vbkRyYWdNYXAoKTtcblx0XHRyZXR1cm4gO1xuXHR9XG5cblx0aWYodGhpcy5nZXRFdmVudCgnZHJhZycpICYmIHRoaXMuZ2V0RXZlbnQoJ2RyYWdTdGF0aW9uJykpe1xuXHRcdHRoaXMub25EcmFnU3RhdGlvbigpO1xuXHRcdHJldHVybiA7XG5cdH1cbn1cblxuUGxhbk1hcC5wcm90b3R5cGUub25EcmFnQmVnaW4gPSBmdW5jdGlvbigpe1xuICBjb25zb2xlLmxvZygnLS0tPz8/Jylcblx0dGhpcy5vbkRyYWdNYXBCZWdpbigpO1xufVxuXG5QbGFuTWFwLnByb3RvdHlwZS5vbkRyYWdFbmQgPSBmdW5jdGlvbigpe1xuXG5cdC8v6YeN572uXG5cdHRoaXMuZHJhd1N0YXRpb25zKCk7XG5cblxuICBjb25zb2xlLmxvZygnZW5kJyk7XG5cdGlmKHRoaXMuZ2V0RXZlbnQoJ2RyYWcnKSAmJiB0aGlzLmdldEV2ZW50KCdkcmFnQmVnaW4nKSAmJiB0aGlzLmdldEV2ZW50KCdkYXJnTWFwJykpe1xuXHRcdHRoaXMub25EcmFnTWFwRW5kKCk7XG5cdH1cblxuXHRpZih0aGlzLmdldEV2ZW50KCdkcmFnJykgICYmIHRoaXMuZ2V0RXZlbnQoJ2RyYWdTdGF0aW9uJykpe1xuXHRcdHRoaXMub25EcmFnU3RhdGlvbkVuZCgpO1xuXHR9XG5cblx0dGhpcy5zZXRFdmVudCgnZHJhZycsMCk7XG5cdHRoaXMuc2V0RXZlbnQoJ2RyYWdCZWlnaW4nLDApO1xuXHR0aGlzLnNldEV2ZW50KCdkcmFnRW5kJywxKTtcblx0dGhpcy5zZXRFdmVudCgnZHJhZ01hcCcsMCk7XG5cdHRoaXMuc2V0RXZlbnQoJ2RyYWdTdGF0aW9uJywwKTtcbiAgdGhpcy5zZXRFdmVudCgnaXNKdWRnZURyYWcnLDApO1xufVxuXG4vL+aLluWKqOW5s+mdouWbvlxuXG5QbGFuTWFwLnByb3RvdHlwZS5vbkRyYWdNYXBCZWdpbiA9IGZ1bmN0aW9uKCl7XG5cblx0aWYoISh0aGlzLmdldEV2ZW50KCdkcmFwQmVnaW4nKSAmJiB0aGlzLmdldEV2ZW50KCdkcmFnTWFwJykpKXtcblx0XHRyZXR1cm4gO1xuXHR9XG5cblx0TG9nLmRlYnVnKCfmi5bmi73lupXlm77lvIDlp4vkuoYnKTtcbn1cblxuUGxhbk1hcC5wcm90b3R5cGUub25EcmFnTWFwRW5kID0gZnVuY3Rpb24oKXtcblx0TG9nLmRlYnVnKCfmi5bmi73lupXlm77nu5PmnZ/kuoYnKTtcblx0dGhpcy5zZXRFdmVudCgnZHJhZycsMCk7XG59XG5cblBsYW5NYXAucHJvdG90eXBlLm9uRHJhZ01hcCA9IGZ1bmN0aW9uKCl7XG5cblx0dmFyIG9yaWdpbiA9IHRoaXMuZ2V0UG9zaXRpb24oJ2Rvd24nKTtcblx0dmFyIG1vdmUgPSB0aGlzLmdldFBvc2l0aW9uKCdtb3ZlJyk7XG5cdHZhciB4ID0gbW92ZS54IC0gb3JpZ2luLng7XG5cdHZhciB5ID0gbW92ZS55IC0gb3JpZ2luLnk7XG5cblx0dmFyIGNvbnRleHQgPSB0aGlzLmdldENvbnRleHQoKTtcblx0dmFyIGNhbnZhc0VsZW1lbnQgPSB0aGlzLmNhbnZhc0VsZW1lbnQ7XG5cdHZhciBiYWNrZ3JvdW5kSW1hZ2UgPSB0aGlzLmJhY2tncm91bmRJbWFnZTtcblxuXHR2YXIgdHJhbnNsYXRlWCA9IHRoaXMudHJhbnNsYXRlWCt4O1xuXHR2YXIgdHJhbnNsYXRlWSA9IHRoaXMudHJhbnNsYXRlWSt5O1xuXG5cblx0dGhpcy50cmFuc2xhdGUodHJhbnNsYXRlWCx0cmFuc2xhdGVZKTtcblxuXHR0aGlzLmRyYXdTdGF0aW9ucyhjb250ZXh0KTtcblxuXHRpZih0aGlzLmdldEV2ZW50KCdkcmFnQmVnaW4nKSAmJiB0aGlzLmdldEV2ZW50KCdkcmFnTWFwJykpe1xuXHRcdHJldHVybiA7XG5cdH1cblxuXHR0aGlzLnNldEV2ZW50KCdkcmFnJywxKTtcblx0dGhpcy5zZXRFdmVudCgnZHJhZ0JlZ2luJywxKTtcblxuXHQvL3RoaXMub25EcmFnQmVnaW4oKTtcblxufVxuXG5cblBsYW5NYXAucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbigpe1xuXHRpZighdGhpcy5nZXRFdmVudCgnY2xpY2snKSl7XG5cdFx0cmV0dXJuIDtcblx0fVxuXHR0aGlzLm9uUmlnaHRFdmVudENsaWNrKCk7XG5cdHRoaXMub25MZWZ0RXZlbnRDbGljaygpO1xufVxuXG4vL+WPlua2iOWFtuS7lumAieS4reeahHN0YXRpb25cblBsYW5NYXAucHJvdG90eXBlLmNhbmNlbENoZWNrZWRBbGxTdGF0aW9uID0gZnVuY3Rpb24oKXtcblx0dmFyIHN0YXRpb25zID0gdGhpcy5nZXRTdGF0aW9ucygpO1xuXHR2YXIgY2xpY2tTdGF0aW9uID0gdGhpcy5jbGlja1N0YXRpb247XG5cblx0c3RhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihzdGF0aW9uLGluZGV4KXtcblx0XHRpZihzdGF0aW9uLmdldEluZGV4KCkgPT09IGNsaWNrU3RhdGlvbi5nZXRJbmRleCgpKXtcblx0XHRcdHJldHVybiA7XG5cdFx0fVxuXHRcdHN0YXRpb24uY2hlY2tlZCA9IGZhbHNlO1xuXHR9KTtcblxuXHR0aGlzLnNldFN0YXRpb25zKHN0YXRpb25zKTtcbn1cblxuUGxhbk1hcC5wcm90b3R5cGUuc2V0Q2xpY2tTdGF0aW9uID0gZnVuY3Rpb24oY2xpY2tTdGF0aW9uKXtcbiAgICB0aGlzLmNsaWNrU3RhdGlvbiA9IGNsaWNrU3RhdGlvbjtcbn1cblxuUGxhbk1hcC5wcm90b3R5cGUuZ2V0Q2xpY2tTdGF0aW9uID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMuY2xpY2tTdGF0aW9uO1xufVxuXG4vL+eCueWHu+mAieS4rVxuUGxhbk1hcC5wcm90b3R5cGUub25DaGVja2VkU3RhdGlvbiA9IGZ1bmN0aW9uKGxvYyl7XG5cblxuXHRsZXQgc3RhdGlvbnMgPSB0aGlzLmdldFN0YXRpb25zKCk7XG5cdC8v5YWz6Zet5omA5pyJc3RhdGlvbiBkaWFsb2dcblx0dGhpcy5jbG9zZUFsbFN0YXRpb25EaWFsb2coKTtcblxuXG5cdGxldCBjbGlja1N0YXRpb24gPSB0aGlzLmhhc1Bvc2l0aW9uU3RhdGlvbihsb2MpO1xuXHRpZighY2xpY2tTdGF0aW9uKXtcblx0XHRyZXR1cm4gO1xuXHR9XG5cbiAgY2xpY2tTdGF0aW9uLnNldENoZWNrZWQoIWNsaWNrU3RhdGlvbi5nZXRDaGVja2VkKCkpO1xuXHRzdGF0aW9ucy5zcGxpY2UoY2xpY2tTdGF0aW9uLmdldEluZGV4KCksMSxjbGlja1N0YXRpb24pO1xuXG4gIHRoaXMuc2V0Q2xpY2tTdGF0aW9uKGNsaWNrU3RhdGlvbik7XG5cblxuXHR0aGlzLnNldFN0YXRpb25zKHN0YXRpb25zKTtcblxuXHR0aGlzLmRyYXdTdGF0aW9ucygpO1xuXG4gIHZhciBwbHVnaW5zID0gdGhpcy5wbHVnaW5zO1xuXG4gIHBsdWdpbnMub25DaGVja2VkU3RhdGlvbiAmJiBwbHVnaW5zLm9uQ2hlY2tlZFN0YXRpb24oY2xpY2tTdGF0aW9uLHRoaXMuZ2V0Q2hlY2tlZFN0YXRpb25zKCkpO1xuXG59XG5cblBsYW5NYXAucHJvdG90eXBlLmdldENoZWNrZWRTdGF0aW9ucyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBzdGF0aW9ucyA9IHRoaXMuc3RhdGlvbnM7XG5cbiAgdmFyIGNoZWNrZWRTdGF0aW9ucyA9IFtdO1xuXG4gIHN0YXRpb25zLm1hcChmdW5jdGlvbihzdGF0aW9uKXtcbiAgICBpZihzdGF0aW9uLmdldENoZWNrZWQoKSl7XG4gICAgICBjaGVja2VkU3RhdGlvbnMucHVzaChzdGF0aW9uKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBjaGVja2VkU3RhdGlvbnM7XG59XG5cbi8v5YWz6Zet5omA5pyJ55qEc3RhdGlvbnMgZGlhbG9nXG5cblBsYW5NYXAucHJvdG90eXBlLmNsb3NlQWxsU3RhdGlvbkRpYWxvZyA9IGZ1bmN0aW9uKHN0YXRpb24pe1xuXHQvL+WFs+mXreWFtuS7lueahOW3peS9jWRpYWxvZ1xuXHR2YXIgc3RhdGlvbnMgPSB0aGlzLmdldFN0YXRpb25zKCk7XG5cdHN0YXRpb25zLm1hcChmdW5jdGlvbihpdGVtLGluZGV4KXtcblx0XHRcdGl0ZW0uY2xvc2VEaWFsb2coKTtcblx0XHRcdH0pO1xufVxuXG4vL+aJk+W8gOWNleS4qnN0YXRpb24gZGlhbG9nXG5QbGFuTWFwLnByb3RvdHlwZS5vcGVuU3RhdGlvbkRpYWxvZyA9IGZ1bmN0aW9uKHN0YXRpb24pe1xuXHRpZighdGhpcy5nZXRFdmVudCgnY2xpY2tSaWdodCcpKXtcblx0XHRyZXR1cm4gO1xuXHR9XG5cblx0dGhpcy5jbG9zZUFsbFN0YXRpb25EaWFsb2coKTtcblxuXHRMb2cuZGVidWcoJ+mAieS4reS6huW3peS9jScpO1xuXHRMb2cuZGVidWcoc3RhdGlvbik7XG5cblx0c3RhdGlvbi5vcGVuRGlhbG9nKCk7XG5cbn1cblxuLy/lubPpnaLlm77vvI3lt6XkvY3mi5bmi71cblBsYW5NYXAucHJvdG90eXBlLmRyYWdTdGF0aW9uID0gZnVuY3Rpb24oKXtcblxufVxuXG4vL+W5s+mdouWbvi3pgInmi6nlt6XkvY1cblBsYW5NYXAucHJvdG90eXBlLnNldFN0YXRpb25Qb3N0aW9uID0gZnVuY3Rpb24oc3RhdGlvbil7XG5cdHZhciB0cmFuc2xhdGVYID0gdGhpcy50cmFuc2xhdGVYO1xuXHR2YXIgdHJhbnNsYXRlWSA9IHRoaXMudHJhbnNsYXRlWTtcblx0cmV0dXJuIHN0YXRpb247XG59XG5cbi8v6K6+572uc3RhdGlvbnNcblBsYW5NYXAucHJvdG90eXBlLnNldFN0YXRpb25zID0gZnVuY3Rpb24oc3RhdGlvbnMpe1xuXHR0aGlzLnN0YXRpb25zID0gc3RhdGlvbnM7XG59XG5cblBsYW5NYXAucHJvdG90eXBlLmdldFN0YXRpb25zID0gZnVuY3Rpb24oKXtcblx0cmV0dXJuIHRoaXMuc3RhdGlvbnM7XG59XG5cblBsYW5NYXAucHJvdG90eXBlLmRyYXdTdGF0aW9ucyA9IGZ1bmN0aW9uKGNvbnRleHQpe1xuXG5cdGNvbnRleHQgPSBjb250ZXh0fHx0aGlzLmdldENvbnRleHQoKTtcblx0dmFyIGNhbnZhc0VsZW1lbnQgPSB0aGlzLmNhbnZhc0VsZW1lbnQ7XG5cdHZhciBzdGF0aW9ucyA9IHRoaXMuZ2V0U3RhdGlvbnMoKTtcblxuXHR0aGlzLnJlc2V0KCk7XG5cdHZhciBfdGhpcyA9IHRoaXM7XG5cdHN0YXRpb25zLmZvckVhY2goZnVuY3Rpb24oc3RhdGlvbixpbmRleCl7XG5cdFx0XHRzdGF0aW9uLnBvc2l0aW9uKE51bWJlcihzdGF0aW9uLmRlZmF1bHQueCksTnVtYmVyKHN0YXRpb24uZGVmYXVsdC55KSk7XG5cdFx0XHRzdGF0aW9uLmNyZWF0ZShjb250ZXh0KTtcblx0fSk7XG59XG5cbi8v5bmz6Z2i5Zu+Lem8oOagh+S9jee9rlxuXG5QbGFuTWFwLnByb3RvdHlwZS53aW5kb3dUb0NhbnZhcyA9IGZ1bmN0aW9uKGV2ZW50KXtcblx0dmFyIHBvc2l0aW9uID0ge1xueDowLFxuICB5OjBcblx0fTtcblxuXHR2YXIgY2FudmFzRWxlbWVudCA9IHRoaXMuY2FudmFzRWxlbWVudDtcblx0bGV0IGJib3ggPSB7fTtcblx0YmJveCA9IGNhbnZhc0VsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0dmFyIGNsaWVudFggPSBldmVudC5jbGllbnRYO1xuXHR2YXIgY2xpZW50WSA9IGV2ZW50LmNsaWVudFk7XG5cblx0cG9zaXRpb24ueCA9IGNsaWVudFgtYmJveC5sZWZ0ICogKHRoaXMud2lkdGggLyBiYm94LndpZHRoKSAtdGhpcy50cmFuc2xhdGVYO1xuXHRwb3NpdGlvbi55ID0gY2xpZW50WS1iYm94LnRvcCAqICh0aGlzLmhlaWdodCAvIGJib3guaGVpZ2h0KS10aGlzLnRyYW5zbGF0ZVk7XG5cblx0cG9zaXRpb24ueCA9IChwb3NpdGlvbi54PDA/TWF0aC5jZWlsKHBvc2l0aW9uLngpOk1hdGguZmxvb3IocG9zaXRpb24ueCkpO1xuXHRwb3NpdGlvbi55ID0gKHBvc2l0aW9uLnk8MD9NYXRoLmNlaWwocG9zaXRpb24ueSk6TWF0aC5mbG9vcihwb3NpdGlvbi55KSk7XG5cblx0cmV0dXJuIHBvc2l0aW9uO1xuXG59O1xuXG5cblBsYW5NYXAucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24oc2NhbGVYLHNjYWxlWSl7XG5cdHRoaXMuc2NhbGVYID0gc2NhbGVYO1xuXHR0aGlzLnNjYWxlWSA9IHNjYWxlWTtcbn1cblxuXG4vL+W5s+mdouWbvu+8jeW3peS9jeS/oeaBr++8jeWIneWni+WMllxuUGxhbk1hcC5wcm90b3R5cGUuaW5pdGlhbGl6ZVN0YXRpb25zID0gZnVuY3Rpb24oKXtcblxuXHQvL+W3peS9jeaVsOaNrlxuXHR2YXIgc3RhdGlvbnNEYXRhID0gdGhpcy5jb25maWdzLnN0YXRpb25zO1xuXHR2YXIgc3RhdGlvbnMgPSBbXTtcblxuXHR2YXIgY29udGV4dCA9IHRoaXMuZ2V0Q29udGV4dCgpO1xuXHR2YXIgdHJhbnNsYXRlWCA9IHRoaXMudHJhbnNsYXRlWDtcblx0dmFyIHRyYW5zbGF0ZVkgPSB0aGlzLnRyYW5zbGF0ZVk7XG5cblx0c3RhdGlvbnNEYXRhLm1hcChmdW5jdGlvbihpdGVtLGluZGV4KXtcblxuXHRcdFx0bGV0IHggPSBpdGVtLng7XG5cdFx0XHRsZXQgeSA9IGl0ZW0ueTtcblx0XHRcdGxldCB3aWR0aCA9IGl0ZW0ud2lkdGg7XG5cdFx0XHRsZXQgaGVpZ2h0ID0gaXRlbS5oZWlnaHQ7XG5cdFx0XHRsZXQgc3RhdGlvbiA9ICBuZXcgU3RhdGlvbih4LHksd2lkdGgsaGVpZ2h0LGl0ZW0uYmFzaWMsaW5kZXgpO1xuXG5cdFx0XHRzdGF0aW9ucy5wdXNoKHN0YXRpb24pO1xuXG5cdFx0XHR9KTtcblxuXHR0aGlzLnNldFN0YXRpb25zKHN0YXRpb25zKTtcblxuXHR0aGlzLmRyYXdTdGF0aW9ucygpO1xuXG5cbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IFBsYW5NYXA7XG4iXX0=