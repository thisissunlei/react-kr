'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _simpleAssign = require('simple-assign');

var _simpleAssign2 = _interopRequireDefault(_simpleAssign);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactRedux = require('react-redux');

var _redux = require('redux');

var _Actions = require('kr-ui/../Redux/Actions');

var actionCreators = _interopRequireWildcard(_Actions);

var _Section = require('kr-ui/Section');

var _Section2 = _interopRequireDefault(_Section);

var _Calendar = require('kr-ui/Calendar');

var _Calendar2 = _interopRequireDefault(_Calendar);

var _inbox = require('material-ui/svg-icons/content/inbox');

var _inbox2 = _interopRequireDefault(_inbox);

var _dateRange = require('material-ui/svg-icons/action/date-range');

var _dateRange2 = _interopRequireDefault(_dateRange);

var _colors = require('material-ui/styles/colors');

var _keyboardArrowDown = require('material-ui/svg-icons/hardware/keyboard-arrow-down');

var _keyboardArrowDown2 = _interopRequireDefault(_keyboardArrowDown);

var _assignment = require('material-ui/svg-icons/action/assignment');

var _assignment2 = _interopRequireDefault(_assignment);

var _formsyReact = require('formsy-react');

var _formsyReact2 = _interopRequireDefault(_formsyReact);

var _lib = require('formsy-material-ui/lib');

var _materialUi = require('material-ui');

var _List = require('material-ui/List');

require('./index.less');

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var PlanManage = function (_Component) {
	_inherits(PlanManage, _Component);

	function PlanManage(props, context) {
		_classCallCheck(this, PlanManage);

		var _this = _possibleConstructorReturn(this, (PlanManage.__proto__ || Object.getPrototypeOf(PlanManage)).call(this, props, context));

		_this.calendarChange = _this.calendarChange.bind(_this);
		_this.closeDialog = _this.closeDialog.bind(_this);
		_this.openDialog = _this.openDialog.bind(_this);
		_this.submitForm = _this.submitForm.bind(_this);
		_this.confirmSubmit = _this.confirmSubmit.bind(_this);

		_this.renderPlan = _this.renderPlan.bind(_this);

		var actions = _this.props.actions;


		_this.state = {
			open: false
		};

		_this.styles = {
			paperStyle: {
				width: 300,
				margin: 'auto',
				padding: 20
			},
			switchStyle: {
				marginBottom: 16
			},
			submitStyle: {
				marginTop: 32
			}
		};

		_this.errorMessages = {
			wordsError: "Please only use letters",
			numericError: "Please provide a number",
			urlError: "Please provide a valid URL"
		};

		return _this;
	}

	_createClass(PlanManage, [{
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'calendarChange',
		value: function calendarChange(value) {
			var actions = this.props.actions;

			console.log('--->>>', value);
			actions.setNowDate(value);
		}
	}, {
		key: 'openDialog',
		value: function openDialog() {

			this.setState({
				open: !this.state.open
			});
		}
	}, {
		key: 'enableButton',
		value: function enableButton() {
			this.setState({
				canSubmit: true
			});
		}
	}, {
		key: 'submitForm',
		value: function submitForm(data) {
			console.log(data);
			this.setState({ open: false });
			var actions = this.props.actions;


			actions.createPlan(data);
		}
	}, {
		key: 'confirmSubmit',
		value: function confirmSubmit() {
			var form = this.refs.myForm;
			form.submit();
		}
	}, {
		key: 'closeDialog',
		value: function closeDialog() {
			this.setState({ open: false });
		}
	}, {
		key: 'renderPlan',
		value: function renderPlan() {

			if (!this.props.plan.now_trip.length) {
				return null;
			}

			return _react2.default.createElement(
				_materialUi.Paper,
				{ zDepth: 1, style: { marginTop: 20 } },
				_react2.default.createElement(
					_List.List,
					null,
					_react2.default.createElement(
						_materialUi.Subheader,
						null,
						'\u65E5\u7A0B'
					),
					_react2.default.createElement(_materialUi.Divider, null),
					this.props.plan.now_trip.map(function (item, index) {
						return _react2.default.createElement(_List.ListItem, { primaryText: item.title, key: index,
							leftIcon: _react2.default.createElement(_materialUi.Avatar, { icon: _react2.default.createElement(_assignment2.default, null), backgroundColor: _colors.yellow600, color: '#fff', size: 25 }),
							rightIcon: _react2.default.createElement(_keyboardArrowDown2.default, null)
						});
					})
				)
			);
		}
	}, {
		key: 'render',
		value: function render() {
			var _styles = this.styles,
			    paperStyle = _styles.paperStyle,
			    switchStyle = _styles.switchStyle,
			    submitStyle = _styles.submitStyle;
			var _errorMessages = this.errorMessages,
			    wordsError = _errorMessages.wordsError,
			    numericError = _errorMessages.numericError,
			    urlError = _errorMessages.urlError;


			var actions = [_react2.default.createElement(_materialUi.FlatButton, {
				label: '\u53D6\u6D88',
				joinEditForm: true,
				onTouchTap: this.closeDialog
			}), _react2.default.createElement(_materialUi.FlatButton, {
				label: '\u63D0\u4EA4',
				joinEditForm: true,
				keyboardFocused: true,
				onTouchTap: this.confirmSubmit
			})];

			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(
					_Section2.default,
					{ title: '\u65E5\u7A0B\u7BA1\u7406',
						description: '',
						leftIcon: _react2.default.createElement(_materialUi.Avatar, { icon: _react2.default.createElement(_dateRange2.default, null), backgroundColor: _colors.purple500, size: 25 }),
						rightMenu: _react2.default.createElement(
							_materialUi.Menu,
							null,
							_react2.default.createElement(_materialUi.MenuItem, { primaryText: '\u5199\u5907\u5FD8', onTouchTap: this.openDialog }),
							_react2.default.createElement(_materialUi.MenuItem, { primaryText: '\u5176\u4ED6' })
						) },
					_react2.default.createElement(_Calendar2.default, { value: this.props.now_date, onChange: this.calendarChange, active: true, items: this.props.items }),
					this.renderPlan()
				),
				_react2.default.createElement(
					_materialUi.Dialog,
					{
						title: '\u5199\u5907\u5FD8',
						modal: false,
						open: this.state.open,
						onRequestClose: this.closeDialog,
						autoScrollBodyContent: true,
						actions: actions
					},
					_react2.default.createElement(
						'div',
						{ className: 'form' },
						_react2.default.createElement(
							_formsyReact2.default.Form,
							{
								onValidSubmit: this.submitForm,
								ref: 'myForm'
							},
							_react2.default.createElement(
								'div',
								{ className: 'form-group' },
								_react2.default.createElement(
									'label',
									{ 'for': '', className: 'label-control' },
									'\u5907\u5FD8\u5185\u5BB9'
								),
								_react2.default.createElement(
									'div',
									{ className: 'form-control' },
									_react2.default.createElement(_lib.FormsyText, {
										name: 'content',
										required: true,
										fullWidth: true,
										hintText: '\u5907\u5FD8\u5185\u5BB9' })
								)
							),
							_react2.default.createElement(
								'div',
								{ className: 'form-group' },
								_react2.default.createElement(
									'label',
									{ 'for': '', className: 'label-control' },
									'\u65F6\u95F4'
								),
								_react2.default.createElement(
									'div',
									{ className: 'form-control' },
									_react2.default.createElement(_lib.FormsyDate, {
										name: 'date',
										required: true,
										hintText: '\u65E5\u671F',
										okLabel: '\u786E\u5B9A',
										cancelLabel: '\u53D6\u6D88'
									})
								),
								_react2.default.createElement(
									'div',
									{ className: 'item' },
									_react2.default.createElement(_lib.FormsyTime, {
										name: 'time',
										hintText: '\u65F6\u95F4',
										required: true,
										okLabel: '\u786E\u5B9A',
										cancelLabel: '\u53D6\u6D88'
									})
								)
							)
						)
					)
				)
			);
		}
	}]);

	return PlanManage;
}(_react.Component);

function mapStateToProps(state) {

	return {
		plan: state.plan,
		items: state.plan.items,
		now_date: state.plan.now_date
	};
}

function mapDispatchToProps(dispatch) {
	return {
		actions: (0, _redux.bindActionCreators)((0, _simpleAssign2.default)({}, actionCreators), dispatch)
	};
}

var _default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(PlanManage);

exports.default = _default;
;

var _temp = function () {
	if (typeof __REACT_HOT_LOADER__ === 'undefined') {
		return;
	}

	__REACT_HOT_LOADER__.register(PlanManage, 'PlanManage', '/Users/liuyihao/Code/kr-admin/src/Containers/Permission/Home/PlanManage/index.js');

	__REACT_HOT_LOADER__.register(mapStateToProps, 'mapStateToProps', '/Users/liuyihao/Code/kr-admin/src/Containers/Permission/Home/PlanManage/index.js');

	__REACT_HOT_LOADER__.register(mapDispatchToProps, 'mapDispatchToProps', '/Users/liuyihao/Code/kr-admin/src/Containers/Permission/Home/PlanManage/index.js');

	__REACT_HOT_LOADER__.register(_default, 'default', '/Users/liuyihao/Code/kr-admin/src/Containers/Permission/Home/PlanManage/index.js');
}();

;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Db250YWluZXJzL1Blcm1pc3Npb24vSG9tZS9QbGFuTWFuYWdlL2luZGV4LmpzIl0sIm5hbWVzIjpbImFjdGlvbkNyZWF0b3JzIiwiUGxhbk1hbmFnZSIsInByb3BzIiwiY29udGV4dCIsImNhbGVuZGFyQ2hhbmdlIiwiYmluZCIsImNsb3NlRGlhbG9nIiwib3BlbkRpYWxvZyIsInN1Ym1pdEZvcm0iLCJjb25maXJtU3VibWl0IiwicmVuZGVyUGxhbiIsImFjdGlvbnMiLCJzdGF0ZSIsIm9wZW4iLCJzdHlsZXMiLCJwYXBlclN0eWxlIiwid2lkdGgiLCJtYXJnaW4iLCJwYWRkaW5nIiwic3dpdGNoU3R5bGUiLCJtYXJnaW5Cb3R0b20iLCJzdWJtaXRTdHlsZSIsIm1hcmdpblRvcCIsImVycm9yTWVzc2FnZXMiLCJ3b3Jkc0Vycm9yIiwibnVtZXJpY0Vycm9yIiwidXJsRXJyb3IiLCJ2YWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJzZXROb3dEYXRlIiwic2V0U3RhdGUiLCJjYW5TdWJtaXQiLCJkYXRhIiwiY3JlYXRlUGxhbiIsImZvcm0iLCJyZWZzIiwibXlGb3JtIiwic3VibWl0IiwicGxhbiIsIm5vd190cmlwIiwibGVuZ3RoIiwibWFwIiwiaXRlbSIsImluZGV4IiwidGl0bGUiLCJub3dfZGF0ZSIsIml0ZW1zIiwibWFwU3RhdGVUb1Byb3BzIiwibWFwRGlzcGF0Y2hUb1Byb3BzIiwiZGlzcGF0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBOzs7O0FBQ0E7O0FBQ0E7O0FBRUE7O0lBQVlBLGM7O0FBRVo7Ozs7QUFDQTs7OztBQUVBOzs7O0FBRUE7Ozs7QUFFQTs7QUFFQTs7OztBQUNBOzs7O0FBR0E7Ozs7QUFDQTs7QUFJQTs7QUFvQkE7O0FBRUE7Ozs7Ozs7Ozs7OztJQUVNQyxVOzs7QUFHTCxxQkFBWUMsS0FBWixFQUFrQkMsT0FBbEIsRUFBMEI7QUFBQTs7QUFBQSxzSEFFbkJELEtBRm1CLEVBRVpDLE9BRlk7O0FBSXpCLFFBQUtD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QkFBUUYsZUFBUixFQUF3QkMsa0JBQXhCLEVBQTRDaEQsVUFBNUMsQzs7Ozs7Ozs7OzsrQkFsUFRBLFU7OytCQW1PRytDLGU7OytCQVNBQyxrQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbGl1eWloYW8vQ29kZS9rci1hZG1pbiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCx7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHtiaW5kQWN0aW9uQ3JlYXRvcnN9IGZyb20gJ3JlZHV4JztcblxuaW1wb3J0ICogYXMgYWN0aW9uQ3JlYXRvcnMgZnJvbSAna3ItdWkvLi4vUmVkdXgvQWN0aW9ucyc7XG5cbmltcG9ydCBTZWN0aW9uIGZyb20gJ2tyLXVpL1NlY3Rpb24nO1xuaW1wb3J0IENhbGVuZGFyIGZyb20gJ2tyLXVpL0NhbGVuZGFyJztcblxuaW1wb3J0IENvbnRlbnRJbmJveCBmcm9tICdtYXRlcmlhbC11aS9zdmctaWNvbnMvY29udGVudC9pbmJveCc7XG5cbmltcG9ydCBBY3Rpb25EYXRlUmFuZ2UgZnJvbSAnbWF0ZXJpYWwtdWkvc3ZnLWljb25zL2FjdGlvbi9kYXRlLXJhbmdlJztcblxuaW1wb3J0IHtibHVlNTAwLCB5ZWxsb3c2MDAscmVkNTAwLHBpbms1MDAscHVycGxlNTAwfSBmcm9tICdtYXRlcmlhbC11aS9zdHlsZXMvY29sb3JzJztcblxuaW1wb3J0IEhhcmR3YXJla2V5Ym9hcmRBcnJvd0Rvd24gZnJvbSAnbWF0ZXJpYWwtdWkvc3ZnLWljb25zL2hhcmR3YXJlL2tleWJvYXJkLWFycm93LWRvd24nO1xuaW1wb3J0IEFjdGlvbkFzc2lnbm1lbnQgZnJvbSAnbWF0ZXJpYWwtdWkvc3ZnLWljb25zL2FjdGlvbi9hc3NpZ25tZW50JztcblxuXG5pbXBvcnQgRm9ybXN5IGZyb20gJ2Zvcm1zeS1yZWFjdCc7XG5pbXBvcnQgeyBGb3Jtc3lDaGVja2JveCwgRm9ybXN5RGF0ZSwgRm9ybXN5UmFkaW8sIEZvcm1zeVJhZGlvR3JvdXAsXG4gICAgRm9ybXN5U2VsZWN0LCBGb3Jtc3lUZXh0LCBGb3Jtc3lUaW1lLCBGb3Jtc3lUb2dnbGUgfSBmcm9tICdmb3Jtc3ktbWF0ZXJpYWwtdWkvbGliJztcblxuXG5pbXBvcnQge1xuXHRNZW51LFxuXHRNZW51SXRlbSxcblx0RHJvcERvd25NZW51LFxuXHRJY29uTWVudSxcblx0SWNvbkJ1dHRvbixcblx0UmFpc2VkQnV0dG9uLFxuXHREaXZpZGVyLFxuXHRGb250SWNvbixcblx0RGF0ZVBpY2tlcixcblx0RGlhbG9nLFxuXHRGbGF0QnV0dG9uLFxuXHRUZXh0RmllbGQsXG5cdFRpbWVQaWNrZXIsXG5cdFNlbGVjdEZpZWxkLFxuXHRQYXBlcixcblx0QXZhdGFyLFxuXHRTdWJoZWFkZXIsXG59IGZyb20gJ21hdGVyaWFsLXVpJztcblxuaW1wb3J0IHtMaXN0LCBMaXN0SXRlbX0gZnJvbSAnbWF0ZXJpYWwtdWkvTGlzdCc7XG5cbmltcG9ydCAnLi9pbmRleC5sZXNzJztcblxuY2xhc3MgUGxhbk1hbmFnZSBleHRlbmRzIENvbXBvbmVudHtcblxuXG5cdGNvbnN0cnVjdG9yKHByb3BzLGNvbnRleHQpe1xuXG5cdFx0c3VwZXIocHJvcHMsIGNvbnRleHQpO1xuXG5cdFx0dGhpcy5jYWxlbmRhckNoYW5nZSA9IHRoaXMuY2FsZW5kYXJDaGFuZ2UuYmluZCh0aGlzKTtcblx0XHR0aGlzLmNsb3NlRGlhbG9nID0gdGhpcy5jbG9zZURpYWxvZy5iaW5kKHRoaXMpO1xuXHRcdHRoaXMub3BlbkRpYWxvZyA9IHRoaXMub3BlbkRpYWxvZy5iaW5kKHRoaXMpO1xuXHRcdHRoaXMuc3VibWl0Rm9ybSA9IHRoaXMuc3VibWl0Rm9ybS5iaW5kKHRoaXMpO1xuXHRcdHRoaXMuY29uZmlybVN1Ym1pdCA9IHRoaXMuY29uZmlybVN1Ym1pdC5iaW5kKHRoaXMpO1xuXG5cdFx0dGhpcy5yZW5kZXJQbGFuID0gdGhpcy5yZW5kZXJQbGFuLmJpbmQodGhpcyk7XG5cblx0XHR2YXIge2FjdGlvbnN9ID0gdGhpcy5wcm9wcztcblxuXHRcdHRoaXMuc3RhdGUgPSB7XG5cdFx0XHRvcGVuOmZhbHNlLFxuXHRcdH1cblxuXHRcdHRoaXMuc3R5bGVzID0gIHtcblx0XHRcdHBhcGVyU3R5bGU6IHtcblx0XHRcdFx0d2lkdGg6IDMwMCxcblx0XHRcdFx0bWFyZ2luOiAnYXV0bycsXG5cdFx0XHRcdHBhZGRpbmc6IDIwLFxuXHRcdFx0fSxcblx0XHRcdHN3aXRjaFN0eWxlOiB7XG5cdFx0XHRcdG1hcmdpbkJvdHRvbTogMTYsXG5cdFx0XHR9LFxuXHRcdFx0c3VibWl0U3R5bGU6IHtcblx0XHRcdFx0bWFyZ2luVG9wOiAzMixcblx0XHRcdH0sXG5cdFx0fVxuXG5cblx0XHR0aGlzLmVycm9yTWVzc2FnZXMgPSAge1xuXHRcdFx0d29yZHNFcnJvcjogXCJQbGVhc2Ugb25seSB1c2UgbGV0dGVyc1wiLFxuXHRcdFx0bnVtZXJpY0Vycm9yOiBcIlBsZWFzZSBwcm92aWRlIGEgbnVtYmVyXCIsXG5cdFx0XHR1cmxFcnJvcjogXCJQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIFVSTFwiLFxuXHRcdH1cblxuXHR9XG5cblxuXG5cdGNvbXBvbmVudERpZE1vdW50KCkge1xuXG5cdH1cblxuXG5cdGNhbGVuZGFyQ2hhbmdlKHZhbHVlKXtcblx0XHR2YXIge2FjdGlvbnN9ID0gdGhpcy5wcm9wcztcblx0XHRjb25zb2xlLmxvZygnLS0tPj4+Jyx2YWx1ZSk7XG5cdFx0YWN0aW9ucy5zZXROb3dEYXRlKHZhbHVlKTtcblx0fVxuXG5cdG9wZW5EaWFsb2coKXtcblxuXHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0b3BlbjohdGhpcy5zdGF0ZS5vcGVuXG5cdFx0fSk7XG5cblx0fVxuXG5cblxuXHRlbmFibGVCdXR0b24oKSB7XG5cdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRjYW5TdWJtaXQ6IHRydWUsXG5cdFx0fSk7XG5cdH1cblxuXHRzdWJtaXRGb3JtKGRhdGEpIHtcblx0XHRjb25zb2xlLmxvZyhkYXRhKTtcblx0XHR0aGlzLnNldFN0YXRlKHtvcGVuOiBmYWxzZX0pO1xuXHRcdGNvbnN0IHthY3Rpb25zfSA9IHRoaXMucHJvcHM7XG5cblx0XHRhY3Rpb25zLmNyZWF0ZVBsYW4oZGF0YSk7XG5cblx0fVxuXG5cdGNvbmZpcm1TdWJtaXQoKXtcblx0XHR2YXIgZm9ybSA9IHRoaXMucmVmcy5teUZvcm07XG5cdFx0Zm9ybS5zdWJtaXQoKTtcblx0fVxuXG5cdGNsb3NlRGlhbG9nKCl7XG5cdFx0dGhpcy5zZXRTdGF0ZSh7b3BlbjogZmFsc2V9KTtcblx0fVxuXG5cdHJlbmRlclBsYW4oKXtcblxuXHRcdGlmKCF0aGlzLnByb3BzLnBsYW4ubm93X3RyaXAubGVuZ3RoKXtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdHJldHVybiAoXG5cdFx0XHQ8UGFwZXIgekRlcHRoPXsxfSBzdHlsZT17e21hcmdpblRvcDoyMH19PlxuXHRcdFx0XHQ8TGlzdD5cblx0XHRcdFx0XHQ8U3ViaGVhZGVyPuaXpeeoizwvU3ViaGVhZGVyPlxuXHRcdFx0XHRcdDxEaXZpZGVyIC8+XG5cdFx0XHRcdFx0e3RoaXMucHJvcHMucGxhbi5ub3dfdHJpcC5tYXAoKGl0ZW0saW5kZXgpPT57XG5cdFx0XHRcdFx0XHRyZXR1cm4gPExpc3RJdGVtIHByaW1hcnlUZXh0PXtpdGVtLnRpdGxlfSBrZXk9e2luZGV4fSBcblx0XHRcdFx0XHRcdGxlZnRJY29uPXtcblx0XHRcdFx0XHRcdFx0PEF2YXRhciBpY29uPXs8QWN0aW9uQXNzaWdubWVudCAvPn0gYmFja2dyb3VuZENvbG9yPXt5ZWxsb3c2MDB9ICBjb2xvcj1cIiNmZmZcIiBzaXplPXsyNX0vPlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmlnaHRJY29uPXs8SGFyZHdhcmVrZXlib2FyZEFycm93RG93biAvPn0gXG5cdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdH0pfVxuXHRcdFx0XHQ8L0xpc3Q+XG5cdFx0XHQ8L1BhcGVyPlxuXHRcdCk7XG5cdH1cblxuXHRyZW5kZXIoKXtcblxuXHRcdGxldCB7cGFwZXJTdHlsZSwgc3dpdGNoU3R5bGUsIHN1Ym1pdFN0eWxlIH0gPSB0aGlzLnN0eWxlcztcblx0XHRsZXQgeyB3b3Jkc0Vycm9yLCBudW1lcmljRXJyb3IsIHVybEVycm9yIH0gPSB0aGlzLmVycm9yTWVzc2FnZXM7XG5cblx0XHRjb25zdCBhY3Rpb25zID0gW1xuXHRcdFx0PEZsYXRCdXR0b25cblx0XHRcdGxhYmVsPVwi5Y+W5raIXCJcblx0XHRcdGpvaW5FZGl0Rm9ybVxuXHRcdFx0b25Ub3VjaFRhcD17dGhpcy5jbG9zZURpYWxvZ31cblx0XHRcdC8+LFxuXHRcdFx0PEZsYXRCdXR0b25cblx0XHRcdGxhYmVsPVwi5o+Q5LqkXCJcblx0XHRcdGpvaW5FZGl0Rm9ybVxuXHRcdFx0a2V5Ym9hcmRGb2N1c2VkPXt0cnVlfVxuXHRcdFx0b25Ub3VjaFRhcD17dGhpcy5jb25maXJtU3VibWl0fVxuXHRcdFx0Lz5cblx0XHRdO1xuXG5cblx0XHRyZXR1cm4oXG5cdFx0XHQ8ZGl2PlxuXHRcdFx0PFNlY3Rpb24gdGl0bGU9XCLml6XnqIvnrqHnkIZcIlxuXHRcdFx0XHRkZXNjcmlwdGlvbj1cIlwiXG5cdFx0XHRcdGxlZnRJY29uPSB7XG5cdFx0XHRcdFx0PEF2YXRhciBpY29uPXs8QWN0aW9uRGF0ZVJhbmdlICAvPn0gIGJhY2tncm91bmRDb2xvcj17cHVycGxlNTAwfSBzaXplPXsyNX0vPlxuXHRcdFx0XHR9XG5cdFx0XHRcdHJpZ2h0TWVudSA9IHtcblx0XHRcdFx0XHQ8TWVudT5cblx0XHRcdFx0XHQ8TWVudUl0ZW0gcHJpbWFyeVRleHQ9XCLlhpnlpIflv5hcIiBvblRvdWNoVGFwPXt0aGlzLm9wZW5EaWFsb2d9IC8+XG5cdFx0XHRcdFx0PE1lbnVJdGVtIHByaW1hcnlUZXh0PVwi5YW25LuWXCIgLz5cblx0XHRcdFx0XHQ8L01lbnU+XG5cdFx0XHRcdH0gPlxuXG5cdFx0XHQ8Q2FsZW5kYXIgdmFsdWU9e3RoaXMucHJvcHMubm93X2RhdGV9IG9uQ2hhbmdlPXt0aGlzLmNhbGVuZGFyQ2hhbmdlfSBhY3RpdmU9e3RydWV9IGl0ZW1zPXt0aGlzLnByb3BzLml0ZW1zfSAvPlxuXG5cdFx0XHRcblx0XHRcdHt0aGlzLnJlbmRlclBsYW4oKX1cblx0XHRcdFxuXG5cdFx0XHQ8L1NlY3Rpb24+XG5cblx0XHRcdDxEaWFsb2dcblx0XHRcdHRpdGxlPVwi5YaZ5aSH5b+YXCJcblx0XHRcdG1vZGFsPXtmYWxzZX1cblx0XHRcdG9wZW49e3RoaXMuc3RhdGUub3Blbn1cblx0XHRcdG9uUmVxdWVzdENsb3NlPXt0aGlzLmNsb3NlRGlhbG9nfVxuXHRcdFx0YXV0b1Njcm9sbEJvZHlDb250ZW50PXt0cnVlfVxuXHRcdFx0YWN0aW9ucz17YWN0aW9uc31cblx0XHRcdD5cblxuXHRcdFx0PGRpdiBjbGFzc05hbWU9XCJmb3JtXCI+XG5cblx0XHRcdDxGb3Jtc3kuRm9ybVxuXHRcdFx0b25WYWxpZFN1Ym1pdD17dGhpcy5zdWJtaXRGb3JtfVxuXHRcdFx0cmVmPVwibXlGb3JtXCJcblx0XHRcdD5cblxuXHRcdFx0PGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XG5cdFx0XHRcdDxsYWJlbCBmb3I9XCJcIiBjbGFzc05hbWU9XCJsYWJlbC1jb250cm9sXCI+5aSH5b+Y5YaF5a65PC9sYWJlbD5cblx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIj5cblx0XHRcdFx0XHQ8Rm9ybXN5VGV4dFxuXHRcdFx0XHRcdFx0bmFtZT1cImNvbnRlbnRcIlxuXHRcdFx0XHRcdFx0cmVxdWlyZWRcblx0XHRcdFx0XHRcdGZ1bGxXaWR0aFxuXHRcdFx0XHRcdFx0aGludFRleHQ9XCLlpIflv5jlhoXlrrlcIiAvPlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdDwvZGl2PlxuXG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXBcIj5cblx0XHRcdFx0PGxhYmVsIGZvcj1cIlwiIGNsYXNzTmFtZT1cImxhYmVsLWNvbnRyb2xcIj7ml7bpl7Q8L2xhYmVsPlxuXHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cImZvcm0tY29udHJvbFwiPlxuXHRcdFx0XHRcdFx0PEZvcm1zeURhdGVcblx0XHRcdFx0XHRcdG5hbWU9XCJkYXRlXCJcblx0XHRcdFx0XHRcdHJlcXVpcmVkXG5cdFx0XHRcdFx0XHRoaW50VGV4dD1cIuaXpeacn1wiXG5cdFx0XHRcdFx0XHRva0xhYmVsPVwi56Gu5a6aXCJcblx0XHRcdFx0XHRcdGNhbmNlbExhYmVsPVwi5Y+W5raIXCJcblx0XHRcdFx0XHRcdC8+XG5cdFx0XHRcdDwvZGl2PlxuXG5cdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwiaXRlbVwiPlxuXHRcdFx0XHRcdDxGb3Jtc3lUaW1lXG5cdFx0XHRcdFx0bmFtZT1cInRpbWVcIlxuXHRcdFx0XHRcdGhpbnRUZXh0PVwi5pe26Ze0XCJcblx0XHRcdFx0XHRyZXF1aXJlZFxuXHRcdFx0XHRcdG9rTGFiZWw9XCLnoa7lrppcIlxuXHRcdFx0XHRcdGNhbmNlbExhYmVsPVwi5Y+W5raIXCJcblx0XHRcdFx0XHQvPlxuXHRcdFx0XHQ8L2Rpdj5cblxuXHRcdFx0PC9kaXY+XG5cblx0XHRcdFx0PC9Gb3Jtc3kuRm9ybT5cblx0XHRcdDwvZGl2PlxuXG5cdFx0XHRcdDwvRGlhbG9nPlxuXG5cdFx0XHRcdDwvZGl2PlxuXG5cdFx0KTtcblxuXHR9XG5cbn1cblxuXG5cblxuXG5cblxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKXtcblxuXHRyZXR1cm4ge1xuXHRcdHBsYW46c3RhdGUucGxhbixcblx0XHRpdGVtczpzdGF0ZS5wbGFuLml0ZW1zLFxuXHRcdG5vd19kYXRlOnN0YXRlLnBsYW4ubm93X2RhdGVcblx0fTtcbn1cblxuZnVuY3Rpb24gbWFwRGlzcGF0Y2hUb1Byb3BzKGRpc3BhdGNoKXtcblx0cmV0dXJuIHtcblx0XHRhY3Rpb25zOmJpbmRBY3Rpb25DcmVhdG9ycyhPYmplY3QuYXNzaWduKHt9LGFjdGlvbkNyZWF0b3JzKSxkaXNwYXRjaClcblx0fTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsbWFwRGlzcGF0Y2hUb1Byb3BzKShQbGFuTWFuYWdlKTtcblxuIl19