{"version":3,"sources":["src/Containers/Operation/CustomerManage/CustomerList/SignedClient/State.js"],"names":["State","searchParams","page","openNewMerchants","openLookMerchants","openEditCustomerList","openNewCustomerIndent","openNewIndent","openEditIndent","openDelete","openSearchUpper","openSwitch","openPersonDialog","indentReady","listId","deleteId","companyName","hasOfficeChange","params","ishasOffice","switchNewCustomerList","switchLookCustomerList","switchEditCustomerList","switchCustomerIndent","switchNewIndent","switchEditIndent","searchUpperCustomer","openSwitchGoDialog","openDeleteOrder","editIndentIdChange","editIndentId","orderNameChange","orderName","orderNameInit","value","_this","data","customerId","dispatch","callAPI","then","response","customerName","orderCount","catch","err","error","message","switchSureSubmit","success","time","Date","exportData","search","company","cityId","communityId","signEndDate","signStartDate","customerIds","length","map","item","push","id","url","window","location","href","cityChange","cityname","closeAllMerchants","MerchantsListId","module","exports"],"mappings":"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","file":"State.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["import mobx, {\n\tobservable,\n\taction,\n\tasMap,\n\tcomputed,\n\textendObservable\n} from 'mobx';\nimport {\n\tActions,\n\tStore\n} from 'kr/Redux';\nimport {\n    Message\n} from 'kr-ui';\nlet State = observable({\n\t\tsearchParams:{\n\t\t\tpage:1,\n\t\t},\n\t\topenNewMerchants:false,\n\t\topenLookMerchants:false,\n\t\topenEditCustomerList:false,\n\t\topenNewCustomerIndent:false,\n\t\topenNewIndent:false,\n\t\topenEditIndent:false,\n\t\topenDelete:false,\n\t\topenSearchUpper:false,\n\t\topenSwitch:false,\n\t\topenPersonDialog:false,\n\t\tindentReady:{},\n\t\tlistId:\"\",\n\t\tdeleteId:'',\n\t\tcompanyName:'',\n\t\topenDelete:false,\n\t\teditIndentData:{},\n\t\teditIndentId:'',\n\t\tcustomerName:\"\",\n\t\torderCount:\"\",\n\t\tmainbillname:\"\",\n\t\tcityname:\"\",\n\t\teditCity:'',\n\t\teditprojectName:'',\n\t\tishasOffice:false,\n\t\teditIndentState:\"\",\n});\nState.hasOfficeChange=action(function(params){\n\tthis.ishasOffice=params;\n})\n//新建页的开关\nState.switchNewCustomerList = action(function() {\n\tthis.openNewMerchants=!this.openNewMerchants;\n});\n//查看页面的开关\nState.switchLookCustomerList = action(function() {\n\tthis.openLookMerchants=!this.openLookMerchants;\n});\n//编辑页面的开关\nState.switchEditCustomerList = action(function() {\n\tthis.openEditCustomerList=!this.openEditCustomerList;\n})\n//新增排放记录的开关\nState.switchCustomerIndent = action(function() {\n\tthis.openNewCustomerIndent=!this.openNewCustomerIndent;\n})\n//新建订单的开关\nState.switchNewIndent = action(function() {\n\tthis.openNewIndent=!this.openNewIndent;\n})\n//编辑订单的开关\nState.switchEditIndent=action(function() {\n\tthis.openEditIndent=!this.openEditIndent;\n})\n//高级查询的开关\nState.searchUpperCustomer = action(function() {\n\tthis.openSearchUpper=!this.openSearchUpper;\n});\n//转移开关\nState.openSwitchGoDialog= action(function() {\n\tthis.openSwitch=!this.openSwitch;\n});\n//删除订单\nState.openDeleteOrder= action(function() {\n\tthis.openDelete=!this.openDelete;\n})\n//新建订单页得数据准备\nState.indentReady= action(function(params) {\n\tthis.indentReady=params;\n})\n\n//编辑定点id\nState.editIndentIdChange=action(function(params){\n\tthis.editIndentId=params;\n})\n//订单名称\nState.orderNameChange=action(function(params){\n\tthis.orderName=params;\n})\n\n//获取订单名称\nState.orderNameInit= action(function(value) {\n\tvar _this=this;\n\tlet data={};\n\t\n\tdata.customerId=value;\n\n\tStore.dispatch(Actions.callAPI('get-customName-orderName',data)).then(function(response) {\n\t\t_this.customerName=response.customerName;\n\t\t_this.orderCount=response.orderCount;\n\n\t}).catch(function(err) {\n\t\t Message.error(err.message);\n\t});\t\t\n});\n\n\n//转移提交\nState.switchSureSubmit= action(function(value) {\n\tvar _this=this;\n\tStore.dispatch(Actions.callAPI('customerTransfer',{},value)).then(function(response) {\n\t\t _this.openSwitch=false;\n         Message.success('转移成功');\n         _this.openPersonDialog=false;\n         _this.searchParams={\n         \tpage:1,\n\t\t\ttime:+new Date()\n         }\n\t}).catch(function(err) {\n\t\t Message.error(err.message);\n\t});\t\t\n});\n//导出\nState.exportData = action(function(value) {\n\t    var search={};\n\t    search.company= this.searchParams.company;\n\t    search.cityId=this.searchParams.cityId;\n\t    search.communityId=this.searchParams.communityId;\n\t    search.signEndDate=this.searchParams.signEndDate;\n\t    search.signStartDate=this.searchParams.signStartDate;\n\t    if(!search.company){\n\t    \tsearch.company='';\n\t    }\n\t    if(!search.cityId){\n\t    \tsearch.cityId='';\n\t    }\n\t    if(!search.signStartDate){\n\t    \tsearch.signStartDate='';\n\t    }\n\t    if(!search.communityId){\n\t    \tsearch.communityId='';\n\t    }\n\t    if(!search.signEndDate){\n\t    \tsearch.signEndDate='';\n\t    }\n\t\tlet customerIds = [];\n\t\tif (value.length != 0) {\n\t\t\tvalue.map((item, value) => {\n\t\t\t\tcustomerIds.push(item.id)\n\t\t\t});\n\t\t}\n\t\tvar url = `/api/krspace-finance-web/customer/sign-customers-export?customerIds=${customerIds}&company=${search.company}&cityId=${search.cityId}&signStartDate=${search.signStartDate}&communityId=${search.communityId}&signEndDate=${search.signEndDate}`\n\t\twindow.location.href = url;\n});\n//城市改变\nState.cityChange=action(function(params){\n\tthis.cityname=params;\n})\nState.closeAllMerchants = action(function() {\n\tthis.openLookMerchants=false;\n\tthis.openNewMerchants=false;\n\tthis.openSearchUpper=false;\n\tthis.openEditCustomerList=false;\n\tthis.openNewCustomerIndent=false;\n\tthis.openNewIndent=false;\n\tthis.openEditIndent=false;\n});\nState.MerchantsListId = action(function(params) {\n\tthis.listId=params;\n\t\n});\nmodule.exports = State;\n"]}