{"version":3,"sources":["src/Containers/Operation/CommunityManage/Detail/Schedule/CreateMemberForm.js"],"names":["NewCreateForm","props","onSubmit","values","EmailonBlur","email","foreignCode","foreignCodeBlur","state","onsubmit","onsubmitCode","console","log","companyId","parseInt","params","communityId","onCancel","getBasicData","_this","url","dispatch","callAPI","then","response","jobList","forEach","item","index","value","id","label","jobName","setState","selectOption","catch","err","onBlur","phone","open","isEmptyObject","sendMsg","warn","phoneSame","code","getCummityName","communityName","communityname","codes","communityText","companyText","jobId","name","error","handleSubmit","pristine","reset","detail","padding","textAlign","marginTop","display","width","height","marginBottom","requiredValue","companyName","marginRight","paddingRight","paddingLeft","validate","errors","test","selector","form"],"mappings":"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","file":"CreateMemberForm.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["\nimport React, { Component, PropTypes } from 'react';\nimport { connect } from 'kr/Redux';\nimport { reduxForm, formValueSelector, change, initialize, arrayPush, arrayInsert, FieldArray, reset } from 'redux-form';\nimport { Actions, Store } from 'kr/Redux';\nimport { KrField, Grid, Row, Col, Button, ButtonGroup, Message, SnackTip, ListGroup, ListGroupItem } from 'kr-ui';\nimport $ from 'jquery'\nimport imgLine from './images/line.png'\n\n class NewCreateForm extends Component{\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state={\n\t\t\tcommunityText:'',\n\t\t\tcompanyText:'',\n\t\t\tphoneSame:false,\n\t\t\temail:'',\n\t\t\tonsubmit:true,\n\t\t\tcommunityName:'',\n\t\t\tonsubmitCode:true\n\n\n\t\t}\n\t\tthis.getBasicData();\n\t\tthis.params = this.props.params;\n\n\t\tthis.getCummityName();\n\n\n\t}\n\tcomponentWillMount() {\n\t\tthis.params = this.props.params;\n\t\tlet response = {\n\t\t\tphone:'',\n\t\t\tcommunityId:parseInt(this.params.communityId),\n\t\t\tcompanyId:parseInt(this.params.companyId),\n\t\t\temail:'',\n\t\t\tjobId:'',\n\t\t\tname:'',\n\t\t\tforeignCode:'',\n\t\t\tsendMsg:'1',\n\t\t\tforeignCode:''\n\t\t}\n\t\tStore.dispatch(initialize('NewCreateForm',response));\n\t}\n\t// 点确定提交时候如果有错误提示返回，否则提交,,如果邮箱存在有错误提示，不能提交\n\t onSubmit=(values)=>{\n\t \tthis.EmailonBlur(values.email);\n\t \tvalues.foreignCode && this.foreignCodeBlur(values.foreignCode);\n\t \tlet {onsubmit,onsubmitCode} = this.state;\n\t\t// \tconsole.log(onsubmit,onsubmitCode);\n\t\tconsole.log('values',values);\n\t \tif(onsubmit && onsubmitCode){\n\t\t\t// \tconsole.log('values',values);\n\t\t\tvalues.companyId = parseInt(this.params.companyId);\n\t\t\tvalues.communityId = parseInt(this.params.communityId);\n\t \t\tconst {onSubmit} = this.props;\n\t\t \tonSubmit && onSubmit(values);\n\t \t}\n\n\t }\n\n\t onCancel=()=>{\n\t\t const {onCancel} = this.props;\n\t\t onCancel && onCancel();\n\t }\n\t getBasicData=()=>{\n\t//  新增会员准备职位数据\n\t\t let _this =this;\n\t\t let url = this.props.params;\n\t\tlet params = {\n\t\t\tcommunityId:url.communityId,\n\t\t\tcompanyId:url.companyId,\n\t\t}\n\t\t Store.dispatch(Actions.callAPI('getMemberBasicData',params)).then(function(response){\n\t\t\t response.jobList.forEach(function(item,index){\n\t\t\t\t item.value = item.id;\n\t\t\t\t item.label = item.jobName;\n\t\t\t });\n\t\t\t//  let memberInfoVO = {\n\t\t\t// \tcommunityId:_this.params.communityId,\n\t\t\t// \tcompanyId:_this.params.companyId\n\t\t\t// }\n\t\t\t// Store.dispatch(initialize('NewCreateForm', memberInfoVO));\n\t\t\t _this.setState({\n\t\t\t\tselectOption:response.jobList\n\t\t\t})\n\t\t }).catch(function(err){\n\t\t \tconsole.log('ddddd');\n\t\t });\n\t }\n\t//  输入手机号查看该手机号是否绑定\n\t onBlur=(phone)=>{\n\t\t let params = {\n\t\t\t phone :phone\n\t\t }\n\t\t this.setState({\n\t \t\topen:true\n\t \t})\n\t\t let _this = this;\n\n\t\t Store.dispatch(Actions.callAPI('isPhoneRegistered',params)).then(function(response){\n\t\t\t//  检验response是不是空对象\n\t\t\t\tif(!$.isEmptyObject(response)){\n\t\t\t\t\tresponse.sendMsg = '1';\n\t\t\t\t\tStore.dispatch(initialize('NewCreateForm',response));\n\t\t\t\t\t// console.log(\"response\",response);\n\t\t\t\t\t// 此处要有提示\n\t\t\t\t\tMessage.warn('该手机号码已被注册！','error');\n\t\t\t\t\t_this.setState({\n\t\t\t\t\t\tphoneSame:true,\n\t\t\t\t\t\temail:response.email,\n\t\t\t\t\t\tcode:response.foreignCode\n\t\t\t\t\t})\n\n\t\t\t\t}\n\t\t }).catch(function(err){\n\t\t \tlet {phoneSame} = _this.state;\n\t\t \tlet response = {\n\t\t \t\tphone:phone,\n\t\t \t\tcommunityId:parseInt(_this.params.communityId),\n\t\t\t\tcompanyId:parseInt(_this.params.companyId),\n\t\t\t\tsendMsg:'1'\n\t\t \t}\n\t\t \tif(phoneSame){\n\t\t\t\tStore.dispatch(initialize('NewCreateForm',response));\n\t\t\t\t_this.setState({\n\t\t\t\t\tphoneSame:false,\n\t\t\t\t\temail:''\n\t\t\t\t})\n\n\n\t\t \t}\n\t\t });\n\t }\n\t EmailonBlur=(phone)=>{\n\t\t let params = {\n\t\t\t email :phone\n\t\t }\n\t\t let {email,phoneSame} = this.state;\n\t\t this.setState({\n\t \t\topen:true\n\t \t})\n\t\t let _this = this;\n\t\t if(phoneSame && email == params.email){\n\t\t\t// \tconsole.log('phoneSame');\n\t\t \t_this.setState({\n\t\t\t\tonsubmit:true\n\t\t\t})\n\t\t \treturn;\n\t\t }\n\n\t\t Store.dispatch(Actions.callAPI('isEmailRegistered',params)).then(function(response){\n\t\t\t\t//邮箱已注册\n\t\t\t\tMessage.warn('该邮箱已被绑定','error');\n\t\t\t\t_this.setState({\n\t\t\t\t\tonsubmit:false\n\t\t\t\t})\n\n\t\t }).catch(function(err){\n\t\t \t//会员卡号未注册\n\t\t\t// \tconsole.log('ddddd',err.message);\n\t\t \t_this.setState({\n\t\t\t\tonsubmit:true\n\t\t\t})\n\t\t });\n\t }\n\t getCummityName=()=>{\n\t \tlet _this = this;\n\t \tlet communityName = '';\n\t \t//this.params.communityId\n\t \tconsole.log('getCummityNamegetCummityName');\n\t \tStore.dispatch(Actions.callAPI('searchCommunityByCommunityText')).then(function(response){\n\t\t\t\tresponse.forEach((item)=>{\n\t\t\t\t\tif(item.id == _this.params.communityId){\n\t\t\t\t\t\tcommunityName = item.communityname;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tconsole.log('getCummityName',communityName);\n\t\t\t\t_this.setState({\n\t\t\t\t\tcommunityName\n\t\t\t\t})\n\n\t\t }).catch(function(err){\n\t\t \t//会员卡号未注册\n\t\t\t// \tconsole.log(ddddd',err.message);\n\t\t \t_this.setState({\n\t\t\t\tonsubmitCode:true\n\t\t\t})\n\t\t });\n\t }\n\t foreignCodeBlur=(codes)=>{\n\t \tif(!codes){\n\t \t\treturn;\n\t \t}\n\t\t let params = {\n\t\t\t code :codes\n\t\t }\n\t\t let {code,phoneSame} = this.state;\n\t\t let _this = this;\n\t\t this.setState({\n\t \t\topen:true\n\t \t})\n\t\t if(phoneSame && codes == params.code){\n\t\t \t_this.setState({\n\t\t\t\tonsubmitCode:true\n\t\t\t})\n\t\t \treturn;\n\t\t }\n\n\t\t Store.dispatch(Actions.callAPI('membersByForeignCode',params)).then(function(response){\n\t\t\t\t//会员卡号已注册\n\t\t\t\tMessage.warn('此会员卡号已被绑定','error');\n\t\t\t\t_this.setState({\n\t\t\t\t\tonsubmitCode:false\n\t\t\t\t})\n\n\t\t }).catch(function(err){\n\t\t \t//会员卡号未注册\n\t\t\t// \tconsole.log('ddddd',err.message);\n\t\t \t_this.setState({\n\t\t\t\tonsubmitCode:true\n\t\t\t})\n\t\t });\n\t }\n\n\trender(){\n\t\tconst { error, handleSubmit, pristine, reset} = this.props;\n\t\tlet communityText = '';\n\t\tlet {selectOption,communityName} =this.state;\n\t\tconsole.log('ffffff',this.props.detail);\n\n\n\t\treturn (\n\t\t\t<div style={{padding:'10px 30px 10px 30px',textAlign:'left'}}>\n\t\t\t<form onSubmit={handleSubmit(this.onSubmit)} style={{marginTop:20}}>\n\t\t\t\t<KrField grid={1/2} name=\"phone\" type=\"text\" label=\"手机号\" right={20} requireLabel={true} style={{display:'block'}}\n\t\t\t\t   onBlur={this.onBlur}/>\n\t\t\t\t<div style={{width:'100%',textAlign:'center',height:25,marginBottom:8}}>\n\t\t\t\t\t\t<img src={imgLine}/>\n\t\t\t\t</div>\n\t\t\t\t<KrField grid={1/2} name=\"community\" component=\"labelText\" label=\"社区\" inline={false}  defaultValue={communityName} requireLabel={true} requiredValue={true} errors={{requiredValue:'社区为必填项'}}/>\n        \t\t<KrField grid={1/2} name=\"email\" type=\"text\" label=\"邮箱\"  left={20}  requireLabel={true} onBlur={this.EmailonBlur}/>\n\t\t\t\t<KrField grid={1/2} name=\"company\" inline={false} component=\"labelText\" label=\"公司\" defaultValue={this.props.detail.companyName} requireLabel={true} requiredValue={true} errors={{requiredValue:'社区为必填项'}}/>\n        \t\t<KrField name=\"jobId\"  grid={1/2} component=\"select\" label=\"职位\"  left={20} options={selectOption} />\n\t\t\t\t<KrField grid={1/2} name=\"name\" type=\"text\" label=\"姓名\" right={20}  requireLabel={true} requiredValue={true} errors={{requiredValue:'姓名为必填项'}}/>\n\t\t\t\t<KrField grid={1/2} name=\"sendMsg\" component=\"group\" left={20}  label=\"发送验证短信\" >\n\t\t\t\t\t<KrField name=\"sendMsg\" grid={1/2} label=\"是\" type=\"radio\" value=\"1\" style={{marginRight:'50px'}}/>\n\t\t\t\t\t<KrField name=\"sendMsg\" grid={1/2} label=\"否\" type=\"radio\" value=\"0\" />\n                </KrField>\n        \t\t<KrField grid={1/2} name=\"foreignCode\" type=\"text\" label=\"会员卡号\" right={20}  onBlur={this.foreignCodeBlur}/>\n\t\t\t\t<Grid style={{marginTop:30,marginBottom:20}}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t\t<ListGroupItem style={{width:'240px',textAlign:'right',padding:0,paddingRight:15}}><Button  label=\"确定\" type=\"submit\"/></ListGroupItem>\n\t\t\t\t\t\t\t\t<ListGroupItem style={{width:'200px',textAlign:'left',padding:0,paddingLeft:15}}><Button  label=\"取消\" type=\"button\"  cancle={true} onTouchTap={this.onCancel} /></ListGroupItem>\n\t\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</Row>\n\t\t\t\t</Grid>\n\t\t  </form>\n\t\t  </div>\n\t\t);\n\t}\n}\nconst validate = values => {\n\n\tconst errors = {}\n\tlet code = /^\\d{10}$/;\n\tlet phone = /(^((\\+86)|(86))?[1][3456789][0-9]{9}$)|(^(0\\d{2,3}-\\d{7,8})(-\\d{1,4})?$)/;\n\tlet email = /^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;\n\tif (!values.phone) {\n\t\terrors.phone = '请输入电话号码';\n\t}\n\n\tif (!values.communityId) {\n\t\terrors.communityId = '请输入社区名称';\n\t}\n\n\tif (!values.email) {\n\t\terrors.email = '请输入邮箱';\n\t}\n\tif (!values.companyId) {\n\t\terrors.companyId = '请输入公司';\n\t}\n\n\t// if (!values.jobId) {\n\t// \terrors.jobId = '请输入职位';\n\t// }\n\n\tif (!values.name) {\n\t\terrors.name = '请输入姓名';\n\t}\n\tif (!email.test(values.email) ) {\n        errors.email = '请填写正确邮箱';\n    }\n    if (!phone.test(values.phone) ) {\n        errors.phone = '请输入正确电话号';\n    }\n    if (values.foreignCode&&!code.test(values.foreignCode) ) {\n        errors.foreignCode = '会员卡号为10位纯数字';\n    }\n    if (!values.sendMsg ) {\n        errors.sendMsg = '请选择是否发送验证短信';\n    }\n    // if (!values.foreignCode) {\n    //     errors.foreignCode = '请输入会员卡号';\n    // }\n    \n\treturn errors\n}\nconst selector = formValueSelector('NewCreateForm');\nexport default NewCreateForm = reduxForm({\n\tform: 'NewCreateForm',\n\tvalidate,\n})(NewCreateForm);\n"]}