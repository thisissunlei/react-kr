{"version":3,"sources":["src/Containers/Finance/Manage/OrderBill/OrderBillDetail/AccountBtnForm.js"],"names":["actionCreators","AccountBtnForm","props","context","stationMoneyChange","value","undefined","blockStyle","display","contractRender","contractList","stationPayment","marginTop","marginBottom","propname","marginRight","moneyCheck","isNaN","error","onCancel","bind","onSubmit","state","Addaccount","values","initialValues","preCode","mainbillId","params","orderId","operatedate","accountId","dispatch","handleSubmit","pristine","reset","accountDetail","optionList","style","heightStyle","width","height","stationPaymentName","id","marginLeft","map","item","index","contextTypes","PropTypes","object","isRequired","func","array","validate","errors","contractId","form","enableReinitialize","keepDirtyOnReinitialize"],"mappings":"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","file":"AccountBtnForm.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import React,{Component} from 'react';\nimport { connect } from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {reduxForm,formValueSelector,initialize} from 'redux-form';\nimport * as actionCreators from 'kr-ui/../Redux/Actions';\nimport {Actions,Store} from 'kr/Redux';\nimport {\n\tTable,\n \tTableBody,\n\tTableHeader,\n\tTableHeaderColumn, \n\tTableRow,\n\tTableRowColumn,\n\tTableFooter,\n\tButton,\n\tSection,\n\tGrid,\n\tRow,\n\tCol,\n\tNotify,\n\tList,\n \tListItem,\n\tLabelText,\n\tForm,\n\tDialog,\n\tKrField,\n\tMessage,\n\tButtonGroup,\n} from 'kr-ui';\n\n\n\n\nclass AccountBtnForm extends Component{\n    static contextTypes = {\n\t  params: React.PropTypes.object.isRequired\n    }\n\tstatic PropTypes = {\n\t\tonSubmit:React.PropTypes.func,\n\t\tonCancel:React.PropTypes.func,\n\t\toptionList:React.PropTypes.array,\n\t\taccountDetail:React.PropTypes.array,\n\t\tcontractList:React.PropTypes.array,\n\t\tstationPayment:React.PropTypes.object,\n\t}\n\tconstructor(props,context){\n\t\tsuper(props,context);\n\t\tthis.onCancel=this.onCancel.bind(this);\n\t\tthis.onSubmit=this.onSubmit.bind(this);\n\t\tthis.state={\n          Addaccount:false,\n\t\t}\n\t\tthis.blockStyle={\n\t\t\tdisplay:'none'\n\t\t}\n\n\t};\n\tonCancel(){\n\t\tconst {onCancel} = this.props;\n\t\tonCancel && onCancel();\n\t};\n\tonSubmit(values){\n\t\tconst {onSubmit} = this.props;\n\t\tonSubmit && onSubmit(values);\n\t}\n\tcomponentDidMount() {  \n      let initialValues={\n       \t preCode:'0',\n       \t mainbillId:this.context.params.orderId,\n       \t operatedate:'',\n       \t accountId:''\n       }\n\t   Store.dispatch(initialize('AccountBtnForm',initialValues));\t\n\n\t}\n\n\tstationMoneyChange=(value)=>{\n      if(value!=undefined&&value!=''){\n      \tthis.blockStyle={\n\t\t\tdisplay:'inline-block',\n\t\t}\n      }else{\n      \tthis.blockStyle={\n\t\t\tdisplay:'none'\n\t\t}\n      }\n\t}\n\n    \n    contractRender=()=>{\n    \tif(this.props.contractList!='无'&&this.props.stationPayment!='无'){\n               return    <div style={{marginTop:3,marginBottom:6}}>\n                             <KrField grid={1/2} name=\"stationPaymentName\" right={42}  component=\"input\" label={this.props.stationPayment.propname} type=\"text\" style={{marginRight:-12}} onChange={this.stationMoneyChange}/> \n\t\t\t\t\t\t     <KrField grid={1/2} name=\"contractId\" right={42}  component=\"select\" label=\"工位合同\" style={this.blockStyle} options={this.props.contractList}/>\n\t\t\t\t\t\t </div>\n    \t}\n    }\n\n\tmoneyCheck=(value)=>{\n\t\tif(value&&isNaN(value)){\n          Message.error('金额只能为数字');\n          return ;\n\t\t}\n\t\tif(value&&value<=0){\n\t\t  Message.error('金额只能为正数');\n          return ;\t\n\t\t}\n\t}\n\t\n\trender(){\n\t\tconst {error,handleSubmit,pristine,reset,accountDetail,contractList,optionList,stationPayment} = this.props;\n\t\tlet style={\n       \t \n       }\n       let heightStyle={\n       \t width:'546',\n       \t height:'72'\n       }\n       \n        if(stationPayment!=[]){\n          let stationPaymentName=stationPayment.id;\t\n        }\n       \n\n\t\treturn(\n\t\t\t <div className='ui-quit-wrap' style={{marginLeft:3}}>\n\t\t\t\t<form  onSubmit={handleSubmit(this.onSubmit)} style={{marginLeft:31}}>\n\t\t\t\t\t<KrField  name=\"mainbillId\" type=\"hidden\"/>\n\t\t\t\t\t<KrField grid={1/2} name=\"accountId\" right={42} component=\"select\" label=\"支付方式\" options={optionList} requireLabel={true}/> \n\t\t\t\t\t<KrField name=\"preCode\" grid={1/2} component=\"group\" label=\"金额正负\" requireLabel={true} style={{marginLeft:-12}}>\n\t\t                <KrField name=\"preCode\" label=\"正\" type=\"radio\" value=\"0\" style={{marginTop:5,display:'inline-block',marginRight:-209}}/>\n\t\t                <KrField name=\"preCode\" label=\"负\" type=\"radio\" value=\"1\"/>\n\t\t            </KrField> \n\t\t\t\t\t<KrField grid={1/2} name=\"operatedate\" right={45} type=\"date\" component=\"date\" label=\"挂账日期\" requireLabel={true} style={{marginTop:3}}/> \n\t\t\t\t\t<KrField grid={1/2} name=\"fileids\"  component=\"file\" label=\"上传附件\" style={{marginLeft:-12}} defaultValue={[]}/>\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t   <div style={{marginTop:-8}}>\n\t\t\t\t\t\t      {accountDetail.map((item,index)=>{\n\t\t\t\t\t\t      \t \n\t\t\t\t\t\t      \tif(index%2==0){\n\t\t\t\t\t\t\t\t\treturn <KrField key={index}   grid={1/2} style={{marginTop:5,marginRight:-12}} right={42} label={item.propname} component=\"input\" name={'fix'+item.id} type=\"text\" onBlur={this.moneyCheck}/>\n\t\t\t\t\t\t\t\t\t        \n\t\t\t\t\t\t      \t}else{\n\t\t\t\t\t\t      \t\treturn <KrField key={index}   grid={1/2}  style={{marginTop:5}} right={42} label={item.propname} component=\"input\" name={'fix'+item.id} type=\"text\" onBlur={this.moneyCheck}/>\n\t\t\t\t\t\t      \t}\n\n\t\t\t\t\t\t        }\n\n\t\t\t\t\t\t       )}\n\t\t\t\t\t    </div>\n\t\t\t\t\t\n\t\t\t\t\t{this.contractRender()}\n\t\t\n\t\t\t\t\n\t\t\t\t\t<KrField grid={1} style={style} label=\"备注\" name=\"finaflowdesc\"  type=\"text\" heightStyle={heightStyle} component=\"textarea\"  placeholder='请输入备注,文字不能超过100字' maxSize={100} lengthClass='ui-length-text'/> \n\n\n\t\t\t\t\t\n\t\t\t\t\t<Grid style={{marginBottom:5,marginLeft:-30}}>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col md={12} align=\"center\">\n\t\t\t\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t\t\t\t<div  className='ui-btn-center'><Button  label=\"确定\" type=\"submit\" joinEditForm /></div> \n\t\t\t\t\t\t\t\t\t<Button  label=\"取消\" type=\"button\" cancle={true} onTouchTap={this.onCancel} /> \n\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t</form>\n\t\t\t  </div>\n\n\t\t\t);\n\t}\n}\n\nconst validate = values =>{\n\n\t\tconst errors = {}\n\n\t\tif(!values.accountId){\n\t\t\terrors.accountId = '请填写支付方式';\n\t\t}\n\t\tif(!values.operatedate){\n\t\t\terrors.operatedate = '请填写挂帐日期';\n\t\t}\n\t\tif (!values.stationPaymentName&&values.contractId) {\n\t\t\terrors.stationPaymentName = '必须填写工位服务费金额';\n\t\t}\n\t\tif (values.stationPaymentName&&!values.contractId) {\n\t\t\terrors.contractId = '必须选择工位合同';\n\t\t}\n\t\n\t\n\t\treturn errors\n\t}\n\nexport default reduxForm({\n\tform: 'AccountBtnForm',\n\tvalidate,enableReinitialize:true,keepDirtyOnReinitialize:true\n})(AccountBtnForm);\n\n\n\n\n"]}