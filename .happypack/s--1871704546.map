{"version":3,"sources":["src/Containers/Operation/BasicConfig/EquipmentDefinition/EquipmentAdvancedQueryForm.js"],"names":["EquipmentAdvancedQueryForm","props","onSubmit","values","content","filter","searchForm","state","type","value","onReset","dispatch","refs","IndexsearchForm","componentSearchInput","onFilter","search","console","log","setState","onSearchFloor","community","_this","CommunityId","communityId","id","callAPI","then","response","arrNew","i","whereFloors","length","label","floorsOptions","catch","err","error","handleSubmit","options","typeOptions","propertyOption","correspondingFunction","marginTop","marginLeft","marginBottom","width","onChangeSearchCommunity","margin","requiredValue","onchooseType","onchooseProperty","onchooseCorrespondingFunction","textAlign","padding","paddingRight","paddingLeft","form"],"mappings":"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","file":"EquipmentAdvancedQueryForm.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["\nimport React, {Component, PropTypes} from 'react';\nimport {connect} from 'kr/Redux';\nimport {reduxForm,formValueSelector,change,initialize,arrayPush,arrayInsert,FieldArray,reset} from 'redux-form';\nimport {Actions,Store} from 'kr/Redux';\nimport {\n\tKrField,\n\tGrid,\n\tRow,\n\tCol,\n\tButton,\n\tNotify,\n\tButtonGroup,\n  \tListGroup,\n  \tListGroupItem,\n\tSearchForm,\n\tMessage,\n} from 'kr-ui';\nclass EquipmentAdvancedQueryForm extends Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state={\n\t\t\tsearchForm: false,\n\t\t\tfloorsOptions:[{label:\"\",value:\"\"}],\n\t\t}\n\t}\n\tcomponentWillReceiveProps(){\n\t}\n\tcomponentDidMount(){\n\t\tlet _this = this;\n\t\tStore.dispatch(change('EquipmentAdvancedQueryForm','type',this.props.filter));\n\t\tStore.dispatch(change('EquipmentAdvancedQueryForm','value',this.props.content));\n\t}\n\t// 提交\n\tonSubmit=(values)=>{\n\t\t// console.log(\"values\",values);\n\t\tlet {content,filter} = this.props;\n\t\tlet {searchForm} = this.state;\n\t\tif (!searchForm){\n\t\t\tvalues.type = filter;\n\t\t\tvalues.value = content;\n\t\t}\n\t\tif(!values.type){\n\t\t\tvalues.type = filter;\n\t\t}\n\t\t// console.log(\"values\",values);\n\t\tconst {onSubmit} =this.props;\n\t\tonSubmit && onSubmit(values);\n\t}\n\t// 重置\n\tonReset=()=>{\n\t\tStore.dispatch(reset('EquipmentAdvancedQueryForm',''));\n\t\t// console.log(\"this.refs.IndexsearchForm.refs.componentSearchInput\",this.refs.IndexsearchForm.refs.componentSearchInput)\n\t\tthis.refs.IndexsearchForm.refs.componentSearchInput.value = \"\";\n\t\tStore.dispatch(change('EquipmentAdvancedQueryForm','type',\"deviceCode\"));\n\t\tconst {onReset} = this.props;\n\t\tonReset && onReset();\n\n\t}\n\t// 过滤器失去焦点执行\n\tonFilter=(search)=>{\n\t\tconsole.log(\"search\",search);\n\t\tthis.setState({searchForm:true});\n\t\tif(search.content){\n\t\t\tStore.dispatch(change('EquipmentAdvancedQueryForm','type',search.value));\n\t\t\tStore.dispatch(change('EquipmentAdvancedQueryForm','value',search.content));\n\n\t\t}else{\n\t\t\tStore.dispatch(change('EquipmentAdvancedQueryForm','type',search.value));\n\t\t\tStore.dispatch(change('EquipmentAdvancedQueryForm','value',''));\n\t\t}\n\t}\n\t// 查询楼层\n\tonSearchFloor=(community)=>{\n\t\tlet _this = this;\n\t\tif(community == null){\n\t\t\treturn;\n\t\t}\n\t\tlet CommunityId = {\n\t\t\tcommunityId : community.id\n\t\t}\n    \tStore.dispatch(Actions.callAPI('getFloorByComunity',CommunityId))\n    \t.then(function(response){\n    \t\tvar arrNew = []\n    \t\tfor (var i=0;i<response.whereFloors.length;i++){\n    \t\t\tarrNew[i] = {label:response.whereFloors[i],value:response.whereFloors[i]}\n    \t\t}\n    \t\t_this.setState({\n    \t\t\tfloorsOptions : arrNew\n    \t\t})\n    \t}).catch(function(err){\n    \t})\n\t}\n\n\trender(){\n\t\tlet {floorsOptions}=this.state;\n\t\tconst { error, handleSubmit,content,filter} = this.props;\n\t\tlet options=[{\n\t      label:\"门编号\",\n\t      value:\"deviceCode\"\n\t    },{\n\t      label:\"硬件编号\",\n\t      value:\"hardwareId\"\n\t    }]\n\t    // 类型待选项\n\t\tlet typeOptions = [{\n\t\t\tlabel: '门禁',\n\t\t\tvalue: 1\n\t\t}];\n\t\t// 属性待选项\n\t\tlet propertyOption=[{\n\t\t\tlabel: '大门',\n\t\t\tvalue: 1\n\t\t},{\n\t\t\tlabel: '会议室',\n\t\t\tvalue: 2\n\t\t},{\n\t\t\tlabel: '功能室',\n\t\t\tvalue: 3\n\t\t}]\n\t\t// 对应功能选项\n\t\tlet correspondingFunction =[{\n\t\t\tlabel: '开门',\n\t\t\tvalue: 1\n\t\t},{\n\t\t\tlabel: '开门／预定',\n\t\t\tvalue: 2\n\t\t},{\n\t\t\tlabel: '预定',\n\t\t\tvalue: 3\n\t\t}]\n\t\treturn (\n\t\t\t<form onSubmit={handleSubmit(this.onSubmit)} style={{marginTop:'37px',marginLeft:'40px'}}>\n\t\t\t\t<ListGroup >\n\t\t\t\t\t<ListGroupItem style={{marginBottom:5}}>\n\t\t\t\t\t\t<SearchForm \n\t\t\t\t\t\t\tsearchFilter={options} \n\t\t\t\t\t\t\tstyle={{width:252,marginBottom:10}} \n\t\t\t\t\t\t\tdefaultFilter={filter} \n\t\t\t\t\t\t\tdefaultContent={content} \n\t\t\t\t\t\t\tonSubmit={this.onFilter}\n\t\t\t\t\t\t\tref =\"IndexsearchForm\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ListGroupItem>\n\t\t\t\t</ListGroup>\n\t\t\t\t<KrField name=\"communityId\" \n\t\t\t\t\tcomponent=\"searchCommunity\" \n\t\t\t\t\tonChange = {this.onChangeSearchCommunity}\n\t\t\t\t\tlabel=\"社区名称\"    \n\t\t\t\t\tstyle={{width:'252px',margin:'0 35px 5px 0'}}\n\t\t\t\t\tonChange = {this.onSearchFloor}\n\t\t\t\t/>\n\t\t\t\t<KrField name=\"floor\" \n\t\t\t\t\tcomponent=\"select\" \n\t\t\t\t\tlabel=\"楼层\" \n\t\t\t\t\toptions = {floorsOptions}\n\t\t\t\t\terrors={{requiredValue:'社区为必填项'}} \n\t\t\t\t\tstyle={{width:'252px'}}\n\t\t\t\t/>\n\t\t\t\t<KrField name=\"typeId\" \n\t\t\t\t\tcomponent=\"select\" \n\t\t\t\t\tlabel=\"类型\" \n\t\t\t\t\tonChange = {this.onchooseType}\n\t\t\t\t\toptions={typeOptions} \n\t\t\t\t\tstyle={{width:'252px',margin:'0 35px 5px 0'}}\n\t\t\t\t/>\n\t\t\t\t<KrField name=\"propertyId\" \n\t\t\t\t\tcomponent=\"select\" \n\t\t\t\t\tlabel=\"属性\"\n\t\t\t\t\tonChange = {this.onchooseProperty}\n\t\t\t\t\toptions={propertyOption}  \n\t\t\t\t\tstyle={{width:'252px'}}\n\t\t\t\t/>\n\t\t\t\t<KrField name=\"functionId\" \n\t\t\t\t\tcomponent=\"select\" \n\t\t\t\t\toptions={correspondingFunction}\n\t\t\t\t\tlabel=\"对应功能\"\n\t\t\t\t\tonChange = {this.onchooseCorrespondingFunction}\n\t\t\t\t\tstyle={{width:'252px',margin:'0 35px 5px 0'}}\n\t\t\t\t/>\n\t\t\t\t<Grid style={{margin:\"20px 0 3px -10px\"}}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t<ListGroupItem style={{width:'269px',textAlign:'right',padding:0,paddingRight:15}}>\n\t\t\t\t\t\t\t\t<Button  label=\"确定\" type=\"submit\"/>\n\t\t\t\t\t\t\t</ListGroupItem>\n\t\t\t\t\t\t\t<ListGroupItem style={{width:'254px',textAlign:'left',padding:0,paddingLeft:15}}>\n\t\t\t\t\t\t\t\t<Button  label=\"重置\" type=\"button\"  cancle={true} onTouchTap={this.onReset} />\n\t\t\t\t\t\t\t</ListGroupItem>\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</Row>\n\t\t\t\t</Grid>\n\t\t  </form>\n\t\t);\n\t}\n}\nexport default EquipmentAdvancedQueryForm = reduxForm({\n\tform: 'EquipmentAdvancedQueryForm',\n\t// validate,\n\t// enableReinitialize: true,\n\t// keepDirtyOnReinitialize: true,\n})(EquipmentAdvancedQueryForm);\n"]}