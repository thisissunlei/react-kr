{"version":3,"sources":["src/Components/Select/Creatable.js"],"names":["Creatable","createClass","displayName","propTypes","children","PropTypes","func","filterOptions","any","isOptionUnique","isValidNewOption","menuRenderer","newOptionCreator","onInputChange","onInputKeyDown","onNewOptionClick","options","array","promptTextCreator","shouldKeyDownEventCreateNewOption","statics","getDefaultProps","createNewOption","props","label","inputValue","option","labelKey","valueKey","unshift","select","selectValue","excludeOptions","filteredOptions","concat","prompt","_createPlaceholderOption","params","onSelect","onOptionSelect","input","event","focusedOption","getFocusedOption","keyCode","preventDefault","render","defaultChildren","restProps","allowCreate","ref","filter","existingOption","length","className","module","exports"],"mappings":"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","file":"Creatable.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["import React from 'react';\nimport Select from './Select';\nimport defaultFilterOptions from './utils/defaultFilterOptions';\nimport defaultMenuRenderer from './utils/defaultMenuRenderer';\n\nconst Creatable = React.createClass({\n\tdisplayName: 'CreatableSelect',\n\n\tpropTypes: {\n\t\t// Child function responsible for creating the inner Select component\n\t\t// This component can be used to compose HOCs (eg Creatable and Async)\n\t\t// (props: Object): PropTypes.element\n\t\tchildren: React.PropTypes.func,\n\n\t\t// See Select.propTypes.filterOptions\n\t\tfilterOptions: React.PropTypes.any,\n\n\t\t// Searches for any matching option within the set of options.\n\t\t// This function prevents duplicate options from being created.\n\t\t// ({ option: Object, options: Array, labelKey: string, valueKey: string }): boolean\n\t\tisOptionUnique: React.PropTypes.func,\n\n    // Determines if the current input text represents a valid option.\n    // ({ label: string }): boolean\n    isValidNewOption: React.PropTypes.func,\n\n\t\t// See Select.propTypes.menuRenderer\n\t\tmenuRenderer: React.PropTypes.any,\n\n    // Factory to create new option.\n    // ({ label: string, labelKey: string, valueKey: string }): Object\n\t\tnewOptionCreator: React.PropTypes.func,\n\n\t\t// input change handler: function (inputValue) {}\n\t\tonInputChange: React.PropTypes.func,\n\n\t\t// input keyDown handler: function (event) {}\n\t\tonInputKeyDown: React.PropTypes.func,\n\n\t\t// new option click handler: function (option) {}\n\t\tonNewOptionClick: React.PropTypes.func,\n\n\t\t// See Select.propTypes.options\n\t\toptions: React.PropTypes.array,\n\n    // Creates prompt/placeholder option text.\n    // (filterText: string): string\n\t\tpromptTextCreator: React.PropTypes.func,\n\n\t\t// Decides if a keyDown event (eg its `keyCode`) should result in the creation of a new option.\n\t\tshouldKeyDownEventCreateNewOption: React.PropTypes.func,\n\t},\n\n\t// Default prop methods\n\tstatics: {\n\t\tisOptionUnique,\n\t\tisValidNewOption,\n\t\tnewOptionCreator,\n\t\tpromptTextCreator,\n\t\tshouldKeyDownEventCreateNewOption\n\t},\n\n\tgetDefaultProps () {\n\t\treturn {\n\t\t\tfilterOptions: defaultFilterOptions,\n\t\t\tisOptionUnique,\n\t\t\tisValidNewOption,\n\t\t\tmenuRenderer: defaultMenuRenderer,\n\t\t\tnewOptionCreator,\n\t\t\tpromptTextCreator,\n\t\t\tshouldKeyDownEventCreateNewOption,\n\t\t};\n\t},\n\n\tcreateNewOption () {\n\t\tconst {\n\t\t\tisValidNewOption,\n\t\t\tnewOptionCreator,\n\t\t\tonNewOptionClick,\n\t\t\toptions = [],\n\t\t\tshouldKeyDownEventCreateNewOption\n\t\t} = this.props;\n\n\t\tif (isValidNewOption({ label: this.inputValue })) {\n\t\t\tconst option = newOptionCreator({ label: this.inputValue, labelKey: this.labelKey, valueKey: this.valueKey });\n\t\t\tconst isOptionUnique = this.isOptionUnique({ option });\n\n\t\t\t// Don't add the same option twice.\n\t\t\tif (isOptionUnique) {\n\t\t\t\tif (onNewOptionClick) {\n\t\t\t\t\tonNewOptionClick(option);\n\t\t\t\t} else {\n\t\t\t\t\toptions.unshift(option);\n\n\t\t\t\t\tthis.select.selectValue(option);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tfilterOptions (...params) {\n\t\tconst { filterOptions, isValidNewOption, options, promptTextCreator } = this.props;\n\n\t\t// TRICKY Check currently selected options as well.\n\t\t// Don't display a create-prompt for a value that's selected.\n\t\t// This covers async edge-cases where a newly-created Option isn't yet in the async-loaded array.\n\t\tconst excludeOptions = params[2] || [];\n\n\t\tconst filteredOptions = filterOptions(...params) || [];\n\n\t\tif (isValidNewOption({ label: this.inputValue })) {\n\t\t\tconst { newOptionCreator } = this.props;\n\n\t\t\tconst option = newOptionCreator({\n\t\t\t\tlabel: this.inputValue,\n\t\t\t\tlabelKey: this.labelKey,\n\t\t\t\tvalueKey: this.valueKey\n\t\t\t});\n\n\t\t\t// TRICKY Compare to all options (not just filtered options) in case option has already been selected).\n\t\t\t// For multi-selects, this would remove it from the filtered list.\n\t\t\tconst isOptionUnique = this.isOptionUnique({\n\t\t\t\toption,\n\t\t\t\toptions: excludeOptions.concat(filteredOptions)\n\t\t\t});\n\n\t\t\tif (isOptionUnique) {\n\t\t\t\tconst prompt = promptTextCreator(this.inputValue);\n\n\t\t\t\tthis._createPlaceholderOption = newOptionCreator({\n\t\t\t\t\tlabel: prompt,\n\t\t\t\t\tlabelKey: this.labelKey,\n\t\t\t\t\tvalueKey: this.valueKey\n\t\t\t\t});\n\n\t\t\t\tfilteredOptions.unshift(this._createPlaceholderOption);\n\t\t\t}\n\t\t}\n\n\t\treturn filteredOptions;\n\t},\n\n\tisOptionUnique ({\n\t\toption,\n\t\toptions\n\t}) {\n\t\tconst { isOptionUnique } = this.props;\n\n\t\toptions = options || this.select.filterOptions();\n\n\t\treturn isOptionUnique({\n\t\t\tlabelKey: this.labelKey,\n\t\t\toption,\n\t\t\toptions,\n\t\t\tvalueKey: this.valueKey\n\t\t});\n\t},\n\n\tmenuRenderer (params) {\n\t\tconst { menuRenderer } = this.props;\n\n\t\treturn menuRenderer({\n\t\t\t...params,\n\t\t\tonSelect: this.onOptionSelect,\n\t\t\tselectValue: this.onOptionSelect\n\t\t});\n\t},\n\n\tonInputChange (input) {\n\t\tconst { onInputChange } = this.props;\n\n\t\tif (onInputChange) {\n\t\t\tonInputChange(input);\n\t\t}\n\n\t\t// This value may be needed in between Select mounts (when this.select is null)\n\t\tthis.inputValue = input;\n\t},\n\n\tonInputKeyDown (event) {\n\t\tconst { shouldKeyDownEventCreateNewOption, onInputKeyDown } = this.props;\n\t\tconst focusedOption = this.select.getFocusedOption();\n\n\t\tif (\n\t\t\tfocusedOption &&\n\t\t\tfocusedOption === this._createPlaceholderOption &&\n\t\t\tshouldKeyDownEventCreateNewOption({ keyCode: event.keyCode })\n\t\t) {\n\t\t\tthis.createNewOption();\n\n\t\t\t// Prevent decorated Select from doing anything additional with this keyDown event\n\t\t\tevent.preventDefault();\n\t\t} else if (onInputKeyDown) {\n\t\t\tonInputKeyDown(event);\n\t\t}\n\t},\n\n\tonOptionSelect (option, event) {\n\t\tif (option === this._createPlaceholderOption) {\n\t\t\tthis.createNewOption();\n\t\t} else {\n\t\t\tthis.select.selectValue(option);\n\t\t}\n\t},\n\n\trender () {\n\t\tconst {\n\t\t\tchildren = defaultChildren,\n\t\t\tnewOptionCreator,\n\t\t\tshouldKeyDownEventCreateNewOption,\n\t\t\t...restProps\n\t\t} = this.props;\n\n\t\tconst props = {\n\t\t\t...restProps,\n\t\t\tallowCreate: true,\n\t\t\tfilterOptions: this.filterOptions,\n\t\t\tmenuRenderer: this.menuRenderer,\n\t\t\tonInputChange: this.onInputChange,\n\t\t\tonInputKeyDown: this.onInputKeyDown,\n\t\t\tref: (ref) => {\n\t\t\t\tthis.select = ref;\n\n\t\t\t\t// These values may be needed in between Select mounts (when this.select is null)\n\t\t\t\tif (ref) {\n\t\t\t\t\tthis.labelKey = ref.props.labelKey;\n\t\t\t\t\tthis.valueKey = ref.props.valueKey;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn children(props);\n\t}\n});\n\nfunction defaultChildren (props) {\n\treturn (\n\t\t<Select {...props} />\n\t);\n};\n\nfunction isOptionUnique ({ option, options, labelKey, valueKey }) {\n\treturn options\n\t\t.filter((existingOption) =>\n\t\t\texistingOption[labelKey] === option[labelKey] ||\n\t\t\texistingOption[valueKey] === option[valueKey]\n\t\t)\n\t\t.length === 0;\n};\n\nfunction isValidNewOption ({ label }) {\n\treturn !!label;\n};\n\nfunction newOptionCreator ({ label, labelKey, valueKey }) {\n\tconst option = {};\n\toption[valueKey] = label;\n \toption[labelKey] = label;\n \toption.className = 'Select-create-option-placeholder';\n \treturn option;\n};\n\nfunction promptTextCreator (label) {\n\treturn `Create option \"${label}\"`;\n}\n\nfunction shouldKeyDownEventCreateNewOption ({ keyCode }) {\n\tswitch (keyCode) {\n\t\tcase 9:   // TAB\n\t\tcase 13:  // ENTER\n\t\tcase 188: // COMMA\n\t\t\treturn true;\n\t}\n\n\treturn false;\n};\n\nmodule.exports = Creatable;\n"]}