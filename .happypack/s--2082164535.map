{"version":3,"sources":["src/Components/InputDate/CalendarInput/index.js"],"names":["CalendarInput","props","year","month","date","value","state","nextProps","temp","Date","getDate","setState","onChange","onSubmit","Component","displayName","propTypes","className","PropTypes","string","style","object","contextTypes","onSetDate","func","isRequired","openCalendarDialog","event","target","length","split","context","window","keyCode"],"mappings":"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","file":"index.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import React, {\n\tComponent\n} from 'react';\n\n\nexport default class CalendarInput extends React.Component {\n\n\tstatic displayName = 'CalendarInput';\n\n\tstatic propTypes = {\n\t\t/**\n\t\t*样式class类名\n\t\t*/\n\t\tclassName: React.PropTypes.string,\n\t\t/**\n\t\t* 样式\n\t\t*/\n\t\tstyle: React.PropTypes.object,\n\t}\n\n\t\tstatic contextTypes =  {\n\t\t\t\t\tonSetDate:React.PropTypes.func.isRequired,\n\t\t\t\t\topenCalendarDialog: React.PropTypes.func.isRequired,\n\t\t\t\t\tonChange: React.PropTypes.func.isRequired,\n\t\t}\n\n\tconstructor(props) {\n\t\tsuper(props)\n\n\n\t\tlet {year,month,date} = this.props;\n\t\tlet value = year+'-'+month+'-'+date;\n\t\tthis.state = {\n\t\t\tvalue:value\n\t\t}\n\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\n\t\tlet {year,month,date} = nextProps;\n\n\t\tvar temp = new Date(year,month,0);\n\t\tdate = (date<temp.getDate())?date:temp.getDate();\n\n\t\tlet value = year+'-'+month+'-'+date;\n\n\t\tthis.setState({\n\t\t\tvalue\n\t\t});\n\t}\n\n\n\tonChange = (event)=>{\n\t\tvar value = event.target.value;\n\n\t\tif(value.length>10){\n\t\t\t\treturn ;\n\t\t}\n\t\tlet [year,month,date] = value.split('-');\n\t\tconst {onSetDate} = this.context;\n\t\t//校验正确性\n\t\tif(month<1 || month>12){\n\t\t\treturn ;\n\t\t}\n\n\t\tif(date>31){\n\t\t\treturn ;\n\t\t}\n\t\t\n\t\tthis.setState({\n\t\t\tvalue\n\t\t});\n\n\t\tif(year && month && date){\n\t\t\tonSetDate && onSetDate(year,month,date);\n\t\t}\n\t}\n\n\tonSubmit = (event)=>{\n\n\t\tvar event = event || window.event;\n\n\t\tconst {onSetDate,onChange,openCalendarDialog} = this.context;\n\t\tvar value = event.target.value;\n\n\t  if(event.keyCode == 13){\n\t\t\tonChange && onChange(value);\n\t\t\topenCalendarDialog && openCalendarDialog();\n\t  }\n\n\t}\n\n\trender() {\n\n\t\tlet {value} = this.state;\n\n\t\treturn (\n\t\t\t\t<div className=\"calendar-input\" >\n\t\t\t\t\t\t\t <input type=\"text\"  onChange={this.onChange} value={value} onKeyDown={this.onSubmit} />\n\t\t\t\t\t\t<div className=\"line\"></div>\n        </div>\n\t\t);\n\n\t}\n\n\n}\n"]}