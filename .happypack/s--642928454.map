{"version":3,"sources":["src/Containers/Member/MemberManage/Setting/NewActivation.js"],"names":["NewActivation","props","InterCodeFocus","values","setState","clearInterCodeStyle","display","clearInterCode","detail","interCode","foreignCode","state","dispatch","foreignCodeBlur","cardChange","value","cReg","RegExp","test","error","onSubmit","bind","onCancel","communityList","mainbilltypeList","navigator","onLine","handleSubmit","pristine","reset","marginTop","marginBottom","propTypes","PropTypes","func","validate","reg","errors","length","isNaN","selector","form"],"mappings":"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","file":"NewActivation.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["import React, {\n\tComponent,\n\tPropTypes\n} from 'react';\nimport {\n\tconnect\n} from 'kr/Redux';\n\nimport {\n\tActions,\n\tStore\n} from 'kr/Redux';\nimport {reduxForm,formValueSelector,initialize,change} from 'redux-form';\n\nimport {\n\tKrField,\n\tGrid,\n\tRow,\n\tCol,\n\tButton,\n\tButtonGroup,\n\tListGroup,\n\tListGroupItem,\n\tMessage\n} from 'kr-ui';\n\n\nclass NewActivation extends Component {\n\n\tstatic propTypes = {\n\t\tonSubmit: React.PropTypes.func,\n\t\tonCancel: React.PropTypes.func,\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.onSubmit = this.onSubmit.bind(this);\n\t\tthis.onCancel = this.onCancel.bind(this);\n\n\t\tthis.state = {\n\t\t\tcommunityList: [],\n\t\t\tmainbilltypeList: [],\n\t\t\tclearInterCodeStyle:{\n\t\t\t\tdisplay:'none'\n\t\t\t},\n\t\t\tforeignCode:\"\"\n\t\t}\n\n\t}\n\tonSubmit(values) {\n\t\tif (navigator.onLine) \n\t\t{ //正常工作\n\t\t} \n\t\telse { //执行离线状态时的任务\n\t\t \t\tMessage.error(\"网络已断开\")\n\t\t \t\treturn;\n\t\t} \n\t\tconst {\n\t\t\tonSubmit\n\t\t} = this.props;\n\t\tonSubmit && onSubmit(values);\n\t}\n\n\tonCancel() {\n\t\tconst {\n\t\t\tonCancel\n\t\t} = this.props;\n\n\t\tonCancel && onCancel();\n\n\t}\n\tInterCodeFocus=(values)=>{\n\t\tif(true){\n\t\t\tthis.setState({\n\t\t\t\tclearInterCodeStyle:{\n\t\t\t\t\tdisplay:'block'\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tclearInterCode=()=>{\n\t\tconst detail={};\n\t\tdetail.interCode=\"\";\n\t\tdetail.foreignCode=this.state.foreignCode;\n\t\tStore.dispatch(initialize('NewActivation',detail));\n\t\tthis.setState({\n\t\t\t\tclearInterCodeStyle:{\n\t\t\t\t\tdisplay:'none'\n\t\t\t\t}\n\t\t\t})\n\t}\n\tforeignCodeBlur=(values)=>{\n\t\tthis.setState({\n\t\t\t\tforeignCode:values\n\t\t\t})\n\t}\n\tcardChange=(value)=>{\n\t\tvar cReg=new RegExp(\"[\\\\u4E00-\\\\u9FFF]+\",\"g\");\n\n\t\tif(cReg.test(value)){\n\t\t\tMessage.error('卡内码内含有中文请切换英文输入法！');\n\t\t\treturn;\n\t\t}\n\t\t\n\t}\n\trender() {\n\t\tconst {\n\t\t\terror,\n\t\t\thandleSubmit,\n\t\t\tpristine,\n\t\t\treset\n\t\t} = this.props;\n\n\t\treturn (\n\n\t\t\t<form onSubmit={handleSubmit(this.onSubmit)} style={{marginTop:0}}>\n\n\t\t\t\t<KrField  right={27}  left={42} right={42} name=\"foreignCode\" type=\"text\" label=\"会员卡号\" onBlur={this.foreignCodeBlur}/>\n\t\t\t\t<div className=\"clearInterCode\">\n\t\t\t\t\t<KrField  right={27}  left={42} right={42} style={{marginTop:5}} name=\"interCode\" component=\"input\" type=\"text\" label=\"会员卡内码\" onChange={this.cardChange} onFocus={this.InterCodeFocus}/>\n\t\t\t\t\t<div className=\"x\" style={this.state.clearInterCodeStyle} onClick={this.clearInterCode}></div>\n\t\t\t\t</div>\n\t\t\t\t<Grid style={{marginTop:20,marginBottom:5}}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col md={12} align=\"center\">\n\t\t\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t\t\t<div  className='ui-btn-center'><Button  label=\"确定\" type=\"submit\" joinEditForm /></div>\n\t\t\t\t\t\t\t\t<Button  label=\"取消\" type=\"button\" cancle={true} onTouchTap={this.onCancel} />\n\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Grid>\n\n\t\t\t</form>\n\t\t);\n\t}\n}\n\nconst validate = values =>{\n\t\tvar foreignCode=values.foreignCode;\n\t\tvar reg=/^[0-9a-fA-F]{8}$/;\n\t\tconst errors = {}\n\t\tif(!values.foreignCode){\n\t\t\terrors.foreignCode = '请输入会员卡号';\n\t\t}\n\t\tif(foreignCode&&foreignCode.length!=10){\n\t\t\terrors.foreignCode = '请输入10位会员卡号';\n\t\t}\n\t\tif (isNaN(+foreignCode) ) {\n\t\t\terrors.foreignCode = '卡号由十位数字的卡号组成';\n\n\t\t}\n\t\tif(!values.interCode){\n\t\t\terrors.interCode = '请输入会员卡内码';\n\n\t\t}else if (!reg.test(values.interCode)) {\n\n\t\t\terrors.interCode = '内码为8位16进制数';\n\t\t}\n\t\treturn errors\n\t}\nconst selector = formValueSelector('NewActivation');\n\n\n\nexport default reduxForm({\n\tform: 'NewActivation',validate\n})(NewActivation);\n"]}