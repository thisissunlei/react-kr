{"version":3,"sources":["src/Containers/Operation/CustomerManage/CustomerList/Personal/State.js"],"names":["State","searchParams","page","openNewMerchants","openLookMerchants","openSearchUpper","openEditCustomerList","openSwitch","openQuit","openPersonDialog","openNewCustomerIndent","openNewIndent","openEditIndent","listId","companyName","openDelete","editIndentData","editIndentId","deleteId","customerName","orderCount","mainbillname","cityname","isOpenIndent","ishasOffice","editCity","editprojectName","cityNameIndent","hasOfficeChange","params","switchNewCustomerList","switchLookCustomerList","switchEditCustomerList","switchCustomerIndent","switchNewIndent","switchEditIndent","searchUpperCustomer","openSwitchGoDialog","openQuitContinue","openDeleteOrder","editIndentIdChange","orderNameChange","orderName","orderNameInit","value","_this","data","customerId","dispatch","callAPI","then","response","catch","err","error","message","exportData","search","company","createEndDate","createStartDate","intentionCityId","intentionCommunityId","levelId","sourceId","customerIds","length","map","item","push","id","url","window","location","href","switchSureSubmit","success","time","Date","quitSubmit","arrItem","ids","cityChange","closeAllMerchants","MerchantsListId","module","exports"],"mappings":"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","file":"State.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["import mobx, {\n\tobservable,\n\taction,\n\tasMap,\n\tcomputed,\n\textendObservable\n} from 'mobx';\nimport {\n\tActions,\n\tStore\n} from 'kr/Redux';\nimport {\n    Message\n} from 'kr-ui';\n\nlet State = observable({\n\t\tsearchParams:{\n\t\t\tpage:1,\n\t\t},\n\t\topenNewMerchants:false,\n\t\topenLookMerchants:false,\n\t\topenSearchUpper:false,\n\t\topenEditCustomerList:false,\n\t\topenSwitch:false,\n\t\topenQuit:false,\n\t\topenPersonDialog:false,\n\t\topenNewCustomerIndent:false,\n\t\topenNewIndent:false,\n\t\topenEditIndent:false,\n\t\tlistId:\"\",\n\t\tcompanyName:'',\n\t\topenDelete:false,\n\t\teditIndentData:{},\n\t\teditIndentId:'',\n\t\tdeleteId:'',\n\n\t\tcustomerName:\"\",\n\t\torderCount:\"\",\n\t\tmainbillname:\"\",\n\n\t\tcityname:\"\",\n\t\tisOpenIndent:false,\n\t\tishasOffice:false,\n\t\teditCity:'',\n\t\teditprojectName:'',\n\t\tcityNameIndent:\"\",\n});\nState.hasOfficeChange=action(function(params){\n\tthis.ishasOffice=params;\n})\n//新建页的开关\nState.switchNewCustomerList = action(function() {\n\tthis.openNewMerchants=!this.openNewMerchants;\n});\n//查看页面的开关\nState.switchLookCustomerList = action(function() {\n\tthis.openLookMerchants=!this.openLookMerchants;\n});\n//编辑页面的开关\nState.switchEditCustomerList = action(function() {\n\tthis.openEditCustomerList=!this.openEditCustomerList;\n})\n//新增排放记录的开关\nState.switchCustomerIndent = action(function() {\n\tthis.openNewCustomerIndent=!this.openNewCustomerIndent;\n})\n//新建订单的开关\nState.switchNewIndent = action(function() {\n\tthis.openNewIndent=!this.openNewIndent;\n\n})\n//编辑订单的开关\nState.switchEditIndent=action(function() {\n\tthis.openEditIndent=!this.openEditIndent;\n})\n//高级查询的开关\nState.searchUpperCustomer = action(function() {\n\tthis.openSearchUpper=!this.openSearchUpper;\n});\n//转移开关\nState.openSwitchGoDialog= action(function() {\n\tthis.openSwitch=!this.openSwitch;\n});\n//取消客户跟进\nState.openQuitContinue= action(function() {\n\tthis.openQuit=!this.openQuit;\n});\n//删除订单\nState.openDeleteOrder= action(function() {\n\tthis.openDelete=!this.openDelete;\n})\n//编辑定点id\nState.editIndentIdChange=action(function(params){\n\tthis.editIndentId=params;\n})\n\n//订单名称\nState.orderNameChange=action(function(params){\n\tthis.orderName=params;\n})\n\n//获取订单名称\nState.orderNameInit= action(function(value) {\n\tvar _this=this;\n\tlet data={};\n\t\n\tdata.customerId=value;\n\n\tStore.dispatch(Actions.callAPI('get-customName-orderName',data)).then(function(response) {\n\t\t_this.customerName=response.customerName;\n\t\t_this.orderCount=response.orderCount;\n\t}).catch(function(err) {\n\t\t Message.error(err.message);\n\t});\t\t\n});\n\n//导出\nState.exportData = action(function(value) {\n\t    var search={};\n\t    search.company= this.searchParams.company;\n\t    search.createEndDate=this.searchParams.createEndDate;\n\t    search.createStartDate=this.searchParams.createStartDate;\n\t    search.intentionCityId=this.searchParams.intentionCityId;\n\t    search.intentionCommunityId=this.searchParams.intentionCommunityId;\n\t    search.levelId=this.searchParams.levelId;\n\t    search.sourceId=this.searchParams.sourceId;\n\t    if(!search.company){\n\t    \tsearch.company='';\n\t    }\n\t    if(!search.createEndDate){\n\t    \tsearch.createEndDate='';\n\t    }\n\t    if(!search.createStartDate){\n\t    \tsearch.createStartDate='';\n\t    }\n\t    if(!search.intentionCityId){\n\t    \tsearch.intentionCityId='';\n\t    }\n\t    if(!search.intentionCommunityId){\n\t    \tsearch.intentionCommunityId='';\n\t    }\n\t    if(!search.levelId){\n\t    \tsearch.levelId='';\n\t    }\n\t    if(!search.sourceId){\n\t    \tsearch.sourceId='';\n\t    }\n\t\tlet customerIds = [];\n\t\tif (value.length != 0) {\n\t\t\tvalue.map((item, value) => {\n\t\t\t\tcustomerIds.push(item.id)\n\t\t\t});\n\t\t}\n\t\tvar url = `/api/krspace-finance-web/customer/personal-customers-export?customerIds=${customerIds}&company=${search.company}&createEndDate=${search.createEndDate}&createStartDate=${search.createStartDate}&intentionCityId=${search.intentionCityId}&intentionCommunityId=${search.intentionCommunityId}&levelId=${search.levelId}&sourceId=${search.sourceId}`\n\t\twindow.location.href = url;\n});\n\n//转移提交\nState.switchSureSubmit= action(function(value) {\n\tvar _this=this;\n\tStore.dispatch(Actions.callAPI('customerTransfer',{},value)).then(function(response) {\n\t\t _this.openSwitch=false;\n         Message.success('转移成功');\n         _this.openPersonDialog=false;\n         _this.searchParams={\n         \tpage:1,\n\t\t\ttime:+new Date()\n         }\n\t}).catch(function(err) {\n\t\t Message.error(err.message);\n\t});\t\t\n});\n//取消客户跟进提交\nState.quitSubmit= action(function(arrItem) {\n\tvar ids=arrItem;\n\tvar _this=this;\n\tStore.dispatch(Actions.callAPI('customerGiveBack',{},{ids})).then(function(response) {\n\t\t _this.openQuit=false;\n         Message.success('取消成功');\n         _this.openPersonDialog=false;\n          _this.searchParams={\n         \tpage:1,\n\t\t\ttime:+new Date()\n         }\n\t}).catch(function(err) {\n\t\t Message.error(err.message);\n\t});\t\t\n});\n//城市改变\nState.cityChange=action(function(params){\n\tthis.cityname=params;\n})\n\n\nState.closeAllMerchants = action(function() {\n\tthis.openLookMerchants=false;\n\tthis.openNewMerchants=false;\n\tthis.openSearchUpper=false;\n\tthis.openEditCustomerList=false;\n\tthis.openNewCustomerIndent=false;\n\tthis.openNewIndent=false;\n\tthis.openEditIndent=false;\n});\nState.MerchantsListId = action(function(params) {\n\tthis.listId=params;\n\t\n});\nmodule.exports = State;\n"]}