{"version":3,"sources":["src/Components/DatePicker/internal/RenderToLayer.js"],"names":["RenderToLayer","onClickAway","event","defaultPrevented","props","componentClickAway","open","el","layer","target","window","document","documentElement","contains","isDescendant","renderLayer","unrenderLayer","useLayerForClickAway","style","position","removeEventListener","body","removeChild","render","createElement","appendChild","addEventListener","top","bottom","left","right","zIndex","context","muiTheme","setTimeout","layerElement","propTypes","func","bool","isRequired","defaultProps","contextTypes","object"],"mappings":"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","file":"RenderToLayer.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["import {Component, PropTypes} from 'react';\nimport {unstable_renderSubtreeIntoContainer, unmountComponentAtNode} from 'react-dom';\n\nimport Dom from '../utils/dom';\n\n// heavily inspired by https://github.com/Khan/react-components/blob/master/js/layered-component-mixin.jsx\nclass RenderToLayer extends Component {\n  static propTypes = {\n    componentClickAway: PropTypes.func,\n    open: PropTypes.bool.isRequired,\n    render: PropTypes.func.isRequired,\n    useLayerForClickAway: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    useLayerForClickAway: true,\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object.isRequired,\n  };\n\n  componentDidMount() {\n    this.renderLayer();\n  }\n\n  componentDidUpdate() {\n    this.renderLayer();\n  }\n\n  componentWillUnmount() {\n    this.unrenderLayer();\n  }\n\n  onClickAway = (event) => {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    if (!this.props.componentClickAway) {\n      return;\n    }\n\n    if (!this.props.open) {\n      return;\n    }\n\n    const el = this.layer;\n    if (event.target !== el && event.target === window ||\n      (document.documentElement.contains(event.target) && !Dom.isDescendant(el, event.target))) {\n      this.props.componentClickAway(event);\n    }\n  };\n\n  getLayer() {\n    return this.layer;\n  }\n\n  unrenderLayer() {\n    if (!this.layer) {\n      return;\n    }\n\n    if (this.props.useLayerForClickAway) {\n      this.layer.style.position = 'relative';\n      this.layer.removeEventListener('touchstart', this.onClickAway);\n      this.layer.removeEventListener('click', this.onClickAway);\n    } else {\n      window.removeEventListener('touchstart', this.onClickAway);\n      window.removeEventListener('click', this.onClickAway);\n    }\n\n    unmountComponentAtNode(this.layer);\n    document.body.removeChild(this.layer);\n    this.layer = null;\n  }\n\n  /**\n   * By calling this method in componentDidMount() and\n   * componentDidUpdate(), you're effectively creating a \"wormhole\" that\n   * funnels React's hierarchical updates through to a DOM node on an\n   * entirely different part of the page.\n   */\n  renderLayer() {\n    const {\n      open,\n      render,\n    } = this.props;\n\n    if (open) {\n      if (!this.layer) {\n        this.layer = document.createElement('div');\n        document.body.appendChild(this.layer);\n\n        if (this.props.useLayerForClickAway) {\n          this.layer.addEventListener('touchstart', this.onClickAway);\n          this.layer.addEventListener('click', this.onClickAway);\n          this.layer.style.position = 'fixed';\n          this.layer.style.top = 0;\n          this.layer.style.bottom = 0;\n          this.layer.style.left = 0;\n          this.layer.style.right = 0;\n          this.layer.style.zIndex = this.context.muiTheme.zIndex.layer;\n        } else {\n          setTimeout(() => {\n            window.addEventListener('touchstart', this.onClickAway);\n            window.addEventListener('click', this.onClickAway);\n          }, 0);\n        }\n      }\n\n      const layerElement = render();\n      this.layerElement = unstable_renderSubtreeIntoContainer(this, layerElement, this.layer);\n    } else {\n      this.unrenderLayer();\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default RenderToLayer;\n"]}