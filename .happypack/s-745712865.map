{"version":3,"sources":["src/Containers/Operation/CustomerManage/CustomerList/EditIndent/index.js"],"names":["EditIndent","props","onSubmit","values","cityid","customerid","listId","id","editIndentId","mainbillname","orderName","mainbillcode","_this","dispatch","callAPI","then","response","orderList","onCancel","catch","err","error","message","hasOfficeClick","params","value","showMatureTime","noShowMatureTime","communityChange","community","orderReady","communityCity","i","length","communityName","label","cityId","cityLableChange","cityName","mainbilltypeChange","customerName","orderCount","selectDatas","communityBaselist","customerSourceList","giveupList","levelList","roundList","stationTypeList","visitTypeList","selectData","selectDataInit","nextProps","isInit","handleSubmit","pristine","reset","companyName","cityNameIndent","citys","cityLable","paddingLeft","marginTop","width","marginLeft","orderFound","height","marginRight","PropTypes","func","validate","errors","mainbilltype","communityid","form"],"mappings":"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","file":"index.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["\nimport React, {Component, PropTypes} from 'react';\nimport {connect} from 'kr/Redux';\n\nimport {reduxForm,formValueSelector,initialize,change} from 'redux-form';\nimport {Actions,Store} from 'kr/Redux';\nimport {\n\tobserver\n} from 'mobx-react';\nimport {\n\tKrField,\n\tGrid,\n\tRow,\n\tCol,\n\tButton,\n\tNotify,\n\tButtonGroup,\n\tMessage\n} from 'kr-ui';\nimport State from './State';\nimport flushData from \"../LookCustomerList/State\";\nimport './index.less'\n@observer\n class EditIndent extends Component{\n\n\t\t\n\n\tstatic PropTypes = {\n\t\tonSubmit:React.PropTypes.func,\n\t\tonCancel:React.PropTypes.func,\n\t}\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tlet selectDatas={\n\t\t\tcommunityBaselist:[],\n\t\t\tcustomerSourceList:[],\n\t\t\tgiveupList:[],\n\t\t\tlevelList:[],\n\t\t\troundList:[],\n\t\t\tstationTypeList:[],\n\t\t\tvisitTypeList:[]\n\t\t};\n\t\tlet selectData=props.selectData||selectDatas;\n\t\tState.selectDataInit(selectData);\n\t}\n\n\n\n\tonSubmit = (values) => {\n\t\tdelete values.cityid;\n\t\tvalues.customerid=this.props.listId;\n\t\tvalues.id=this.props.editIndentId;\n\t\tvalues.mainbillname=State.orderName||this.props.mainbillname;\n\t\tvalues.mainbillcode=\"\";\n\t\tlet _this=this;\n\t\tStore.dispatch(Actions.callAPI('edit-order',{},values)).then(function(response) {\n\t\t\t flushData.orderList(_this.props.listId);\n         \t_this.onCancel();\n\t\t}).catch(function(err) {\n\t\t\tMessage.error(err.message);\n\t\t});\n\t}\n\n\tonCancel = () => {\n\t\tconst {onCancel} = this.props;\n\t\tonCancel && onCancel();\n\t}\n\n\thasOfficeClick = (params) =>{\n\t\tif(params.value==\"HAS\"){\n\t\t\tState.showMatureTime();\n\t\t}else if(params.value==\"NOHAS\"){\n\t\t\tState.noShowMatureTime();\n\n\t\t}\n\t}\n\tcomponentWillReceiveProps(nextProps){\n\n\t\t\tif(typeof(nextProps.orderReady)==\"function\"){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(State.isInit){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tState.orderReady(nextProps.orderReady)\n\t}\n\tcommunityChange=(value)=>{ \n\t\tif(!value){\n\t\t\treturn;\n\t\t}\n\t\tvar community=State.orderReady.communityCity\n\t\tfor(var i=0;i<community.length;i++){\n\t\t\tif(community[i].communityName==value.label){\n\t\t\t\tStore.dispatch(change('EditIndent','cityid',community[i].cityId));\n\t\t\t\tState.cityLableChange(community[i].cityName)\n\n\t\t\t}\n\n\t\t}\n\t}\n\tmainbilltypeChange=(value)=>{\n\t\tState.orderName=this.props.customerName+value.label+this.props.orderCount;\n\n\t}\n\t\n\n\trender(){\n\t\tconst { error, handleSubmit, pristine, reset,companyName,customerName,orderCount,mainbillname,cityNameIndent} = this.props;\n\t\tlet citys=State.cityLable||cityNameIndent;\n\t\t\tcitys=!citys?\"无\":citys;\n\t\treturn (\n\n\t\t\t<form className=\"m-newMerchants\" onSubmit={handleSubmit(this.onSubmit)} style={{paddingLeft:7}}>\n\t\t\t\t<div className=\"title\">\n\t\t\t\t\t\t<div><span className=\"order-new-icon\"></span><label className=\"title-text\">{companyName}</label></div>\n\t\t\t\t\t\t<div className=\"order-close\" onClick={this.onCancel}></div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div className=\"kk\" style={{marginTop:30,paddingLeft:20}}>\t\t\n\t\t\t\t\t<KrField grid={1/2} label=\"订单类型\" name=\"mainbilltype\" style={{width:262,marginLeft:15}} component=\"select\" \n\t\t\t\t\t\t\toptions={State.orderFound}\n\t\t\t\t\t\t\trequireLabel={true}\n\t\t\t\t\t\t\tonChange={this.mainbilltypeChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<KrField grid={1/2} label=\"所在社区\" name=\"communityid\" component=\"select\" style={{width:262,marginLeft:30}} \n\t\t\t\t\t\t\toptions={State.community}\n\t\t\t\t\t\t\trequireLabel={true}\n\t\t\t\t\t\t\tonChange={this.communityChange}\n\t\t\t\t\t/>\n\t\t\t\t\t\n\t\t\t\t\t<KrField grid={1/2} label=\"所在城市\" name=\"cityid\" component=\"labelText\" style={{width:262,marginLeft:15}} value={citys} inline={false}/>\n\t\t\t\t\t<KrField grid={1/2} label=\"订单名称\" name=\"mainbillname\" style={{width:262,marginLeft:30}} component=\"labelText\" value={State.orderName?State.orderName:mainbillname} requireLabel={true} inline={false}/>\n\t\t\t\t\t<KrField grid={1/2} label=\"订单描述\" name=\"mainbilldesc\" style={{width:555,marginLeft:15,marginTop:-5}} heightStyle={{height:\"80px\"}}  component=\"textarea\"  maxSize={100} requireLabel={false} />\n\t\t\t\t</div>\t\t\n\t\t\t\t<Grid style={{marginTop:0,marginRight:40}}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col md={12} align=\"center\">\n\t\t\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t\t\t<div  className='ui-btn-center'><Button  label=\"确定\" type=\"submit\" joinEditForm /></div>\n\t\t\t\t\t\t\t\t<Button  label=\"取消\" type=\"button\" cancle={true} onTouchTap={this.onCancel} />\n\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Grid>\n\t\t\t\t\t\t\n\t\t\t\t\t\t    \n\t\t\t\t</form>\n\t\t);\n\t}\n}\nconst validate = values =>{\n\n\t\tconst errors = {};\n\t\t\n\t\tif(!values.mainbilltype){\n\t\t\terrors.mainbilltype = '请选择订单类型';\n\t\t}\n\t\tif(!values.communityid){\n\t\t\terrors.communityid = '请选择所在社区';\n\t\t}\n\t\treturn errors\n\t}\nexport default reduxForm({ form: 'EditIndent',validate})(EditIndent);\n"]}