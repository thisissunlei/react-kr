{"version":3,"sources":["src/Components/KrForm/FieldControl/DateComponent/index.js"],"names":["DateComponent","props","onChange","bind","setDefaultDate","supplementZero","formatDate","setInputValue","isInit","state","value","Date","parse","setState","input","nextProps","dt","year","getFullYear","month","getMonth","date","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","result","event","label","type","meta","touched","error","requireLabel","disabled","search","placeholder","style","defaultValue","inline","contentStyle","styles","border","height","borderRadius","paddingLeft","color","backgroundColor","opacity","name","Component","displayName","defaultProps","PropTypes","string","func","bool"],"mappings":"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","file":"index.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import React from 'react';\nimport {\n\tField,\n\treduxForm\n} from 'redux-form';\n\n//import DatePicker from 'material-ui/DatePicker';\nimport DatePicker from '../../../DatePicker';\n\nimport {\n\tDateFormat\n} from 'kr/Utils';\n\nimport './index.less';\n\nimport WrapComponent from '../WrapComponent';\n\nexport default class DateComponent extends React.Component {\n\n\tstatic displayName = 'DateComponent';\n\n\tstatic defaultProps = {\n\t\tinline: false\n\t}\n\n\tstatic PropTypes = {\n\t\tdefaultValue: React.PropTypes.string,\n\t\tonChange: React.PropTypes.func,\n\t\tinline: React.PropTypes.bool,\n\t\tsearch: React.PropTypes.bool\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.setDefaultDate = this.setDefaultDate.bind(this);\n\t\tthis.supplementZero = this.supplementZero.bind(this);\n\n\t\tthis.formatDate = this.formatDate.bind(this);\n\t\tthis.setInputValue = this.setInputValue.bind(this);\n\n\t\tthis.isInit = false;\n\t\tthis.state = {\n\t\t\tvalue: ''\n\t\t}\n\n\t}\n\n\tsetDefaultDate(value) {\n\n\t\tif (!value) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof value === 'string') {\n\t\t\tvalue = new Date(Date.parse(value));\n\t\t\tthis.setInputValue(value);\n\t\t}\n\n\t\tif (typeof value === 'number') {\n\t\t\tthis.setInputValue(value);\n\t\t\tvalue = new Date(value);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tvalue\n\t\t});\n\n\t\tthis.isInit = true;\n\t}\n\n\tsetInputValue(value) {\n\t\tlet {\n\t\t\tinput\n\t\t} = this.props;\n\t\tvalue = DateFormat(value, \"yyyy-mm-dd\") + ' 00:00:00';\n\t\tinput.onChange(value);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setDefaultDate(this.props.input.value);\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (!this.isInit && nextProps.input.value) {\n\t\t\tthis.setDefaultDate(nextProps.input.value);\n\t\t}\n\t}\n\n\tsupplementZero(value) {\n\t\tif (value < 10) {\n\t\t\tvalue = '0' + value;\n\t\t}\n\t\treturn value\n\t}\n\n\tformatDate(value) {\n\n\t\tvar dt = new Date(value);\n\t\tvar year = dt.getFullYear();\n\t\tvar month = this.supplementZero(1 + dt.getMonth());\n\t\tvar date = this.supplementZero(dt.getDate());\n\t\tvar hours = this.supplementZero(dt.getHours());\n\t\tvar minutes = this.supplementZero(dt.getMinutes());\n\t\tvar seconds = this.supplementZero(dt.getSeconds());\n\n\t\tvar result = `${year}-${month}-${date} ${hours}:${minutes}:${seconds}`;\n\n\t\treturn result;\n\t}\n\n\tonChange(event, value) {\n\n\t\tif (!value) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tvalue\n\t\t});\n\n\t\tlet {\n\t\t\tinput,\n\t\t\tonChange\n\t\t} = this.props;\n\n\t\tvar result = this.formatDate(value);\n\n\t\tthis.setInputValue(result);\n\n\t\tonChange && onChange(result);\n\t}\n\n\trender() {\n\n\n\t\tlet {\n\t\t\tinput,\n\t\t\tlabel,\n\t\t\ttype,\n\t\t\tmeta: {\n\t\t\t\ttouched,\n\t\t\t\terror\n\t\t\t},\n\t\t\trequireLabel,\n\t\t\tdisabled,\n\t\t\tsearch,\n\t\t\tplaceholder,\n\t\t\tstyle,\n\t\t\tdefaultValue,\n\t\t\tinline,\n\t\t\tcontentStyle\n\t\t} = this.props;\n\n\t\tconst styles = {\n\t\t\tborder: '1px solid #ddd',\n\t\t\theight: 40,\n\t\t\tborderRadius: '4px',\n\t\t\tpaddingLeft: 10,\n\t\t\tcolor: '#fff',\n\t\t\tbackgroundColor: 'transparent',\n\t\t\topacity: 0\n\t\t}\n\n\t\treturn (\n\n\t\t\t<WrapComponent label={label} wrapStyle={style} contentStyle={contentStyle} requireLabel={requireLabel} inline={inline} search={search}>\n\t\t\t\t\t<div className=\"date-component\">\n\n\t\t\t\t\t\t\t<span className=\"date-input\"> {(input.value && DateFormat(input.value,\"yyyy-mm-dd\")) || placeholder || '日期'} <span className=\"icon\"></span></span>\n\n\t\t\t\t\t\t\t\t<span className=\"date-operation\">\n\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker\n\t\t\t\t\t\t\t\t\t\t\t\tokLabel=\"确定\"\n\t\t\t\t\t\t\t\t\t\t\t\tcancelLabel=\"取消\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue = {this.state.value}\n\t\t\t\t\t\t\t\t\t\t\t\thintText={placeholder}\n\t\t\t\t\t\t\t\t\t\t\t\ttextFieldStyle={styles}\n\t\t\t\t\t\t\t\t\t\t\t\tname={input.name}\n\t\t\t\t\t\t\t\t\t\t\t\tautoOk={true}\n\t\t\t\t\t\t\t\t\t\t\t\tcontainer=\"inline\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.onChange}/>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t{touched && error && <div className=\"error-wrap error-tip\"> <span>{error}</span></div> }\n\t\t\t\t</WrapComponent>\n\t\t);\n\t}\n\n}\n"]}