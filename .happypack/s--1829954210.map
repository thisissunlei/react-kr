{"version":3,"sources":["src/Containers/Operation/CommunityManage/Detail/Schedule/DismantlingForm.js"],"names":["DismantlingForm","props","context","getBasicData","_this","dispatch","callAPI","billId","then","response","setState","detail","catch","err","console","log","onSubmit","bind","onCancel","state","form","formValues","actualLeaveDate","mainBillId","show","message","type","window","setTimeout","location","reload","error","handleSubmit","pristine","reset","submitting","initialValues","time","actualLeavedate","textAlign","marginBottom","paddingTop","color","fontSize","companyName","endTime","editFlag","marginTop","defaultProps"],"mappings":"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","file":"DismantlingForm.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import React, {\n\tComponent,\n\tPropTypes\n} from 'react';\nimport {\n\tconnect\n} from 'kr/Redux';\nimport {\n\tDateFormat\n} from 'kr/Utils';\n\nimport {\n\treduxForm,\n\tformValueSelector,\n\tinitialize\n} from 'redux-form';\nimport {\n\tActions,\n\tStore\n} from 'kr/Redux';\nimport {\n\tfindDOMNode\n} from 'react-dom'\nimport dateFormat from 'dateformat';\nimport ReactTooltip from 'react-tooltip'\nimport {\n\tMenu,\n\tMenuItem,\n\tDropDownMenu,\n\tIconMenu,\n\tDialog,\n\n\tTable,\n\tTableBody,\n\tTableHeader,\n\tTableHeaderColumn,\n\tTableRow,\n\tTableRowColumn,\n\tTableFooter,\n\tSection,\n\tKrField,\n\tGrid,\n\tRow,\n\tCol,\n\tButton,\n\tNotify,\n\tButtonGroup\n} from 'kr-ui';\n\n\nclass DismantlingForm extends Component {\n\tstatic defaultProps = {\n\t\tmainBillId: 290,\n\t}\n\n\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\n\t\tthis.onSubmit = this.onSubmit.bind(this);\n\t\tthis.onCancel = this.onCancel.bind(this);\n\t\tthis.billId = this.props.detail.billId;\n\t\tthis.state = {\n\t\t\tdetail :{}\n\t\t}\n\t\tthis.getBasicData();\n\n\n\t}\n\n\tcomponentDidMount() {\n\t\t//const {detail}= this.props;\n\n\t}\n\tgetBasicData=()=>{\n\t\tlet _this = this;\n\t\tStore.dispatch(Actions.callAPI('getLeaveDate',{billId:_this.billId})).then(function(response) {\n\n\t      \n\n\t      _this.setState({\n\t        detail:response,\n\t      });\n\t      \n\n\n\t    }).catch(function(err) {\n\t    \tconsole.log(err,err);\n\t    });\n\t}\n\n\n\n\tonSubmit(form) {\n\t\tconst formValues = {\n\t\t\tactualLeaveDate: form.actualLeaveDate,\n\t\t\tmainBillId: this.props.detail.billId\n\t\t}\n\n\t\tStore.dispatch(Actions.callAPI('updateLeaveDate', {}, formValues)).then(function(response) {\n\t\t\tNotify.show([{\n\t\t\t\tmessage: '修改成功',\n\t\t\t\ttype: 'success',\n\t\t\t}]);\n\t\t\twindow.setTimeout(function() {\n\t\t\t\twindow.location.reload();\n\n\t\t\t}, 2000);\n\n\t\t}).catch(function(err) {\n\t\t\tNotify.show([{\n\t\t\t\tmessage: err.message,\n\t\t\t\ttype: 'danger',\n\t\t\t}]);\n\t\t});\n\n\n\n\t}\n\n\tonCancel() {\n\t\tconst {\n\t\t\tonCancel\n\t\t} = this.props;\n\t\tonCancel && onCancel();\n\t}\n\n\trender() {\n\n\t\tlet {\n\t\t\terror,\n\t\t\thandleSubmit,\n\t\t\tpristine,\n\t\t\treset,\n\t\t\tsubmitting,\n\t\t\tinitialValues\n\t\t} = this.props;\n\t\tlet {detail} = this.state;\n\n\t\tlet time = DateFormat(detail.actualLeavedate, \"yyyy-mm-dd\")\n\t\treturn (\n\n\t\t\t<form className=\"DismantlingForm\" onSubmit={handleSubmit(this.onSubmit)}> \n\t\t\t<div style={{textAlign:'center',marginBottom:'14px',paddingTop:'20px',color:'#333333',fontSize:'14px'}}>{detail.companyName}</div>\n\t\t\t<div style={{textAlign:'center',marginBottom:'14px',color:'#333333',fontSize:'14px',fontSize:'14px'}}>合同到期时间为：{dateFormat(detail.endTime,\"yyyy.mm.dd\")}</div>\n\t\t\t{detail.editFlag?<KrField name=\"actualLeaveDate\"component=\"date\"  label=\"实际撤场时间：\" value=\"\" inline={true}/>:<KrField component=\"labelText\"  label=\"实际的撤场时间为：\" value={time} />}\n\t\t\t{detail.editFlag?<Grid>\n\t\t\t\t<Row style={{marginTop:30,marginBottom:15}}>\n\t\t\t\t<Col md={12} align=\"center\"> \n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<div  className='ui-btn-center'><Button  label=\"确定\" type=\"submit\" joinEditForm height={34} width={90}/></div>\n\t\t\t\t\t\t<Button  label=\"取消\" type=\"button\"  onTouchTap={this.onCancel} cancle={true} height={33} width={90}/>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\n\t\t\t\t </Col>\n\t\t\t\t </Row>\n\t\t\t</Grid>:<p style={{marginBottom:30}}></p>}\n\t\t</form>\n\n\n\t\t);\n\t}\n}\n\nexport default reduxForm({\n\tform: 'DismantlingForm'\n})(DismantlingForm);"]}