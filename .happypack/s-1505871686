'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactRedux = require('react-redux');

var _reactAddonsPureRenderMixin = require('react-addons-pure-render-mixin');

var _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);

var _Redux = require('kr/Redux');

var _mobxReact = require('mobx-react');

var _Utils = require('kr/Utils');

var _krUi = require('kr-ui');

require('./index.less');

var _State = require('./State');

var _State2 = _interopRequireDefault(_State);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var LookDetail = (0, _mobxReact.observer)(_class = function (_Component) {
	_inherits(LookDetail, _Component);

	function LookDetail(props, context) {
		_classCallCheck(this, LookDetail);

		var _this = _possibleConstructorReturn(this, (LookDetail.__proto__ || Object.getPrototypeOf(LookDetail)).call(this, props, context));

		_this.onSubmit = function (values) {
			var onSubmit = _this.props.onSubmit;

			onSubmit && onSubmit(values);
		};

		_this.onCancel = function () {
			var onCancel = _this.props.onCancel;

			onCancel && onCancel();
		};

		_this.isDevelopClick = function () {

			_State2.default.recordDevelopChange();
		};

		_this.switchEditCustomerList = function () {
			_State2.default.switchEditCustomerList();
		};

		_this.everyTd = function (value) {
			var show = false;
			if (!value) {
				return;
			}
			if (value.length == 0) {
				show = false;
			} else {
				show = true;
			}
			return _react2.default.createElement(
				_krUi.Tooltip,
				{ className: 'tooltipTextStyle', style: { padding: 10, maxWidth: 224 }, offsetTop: 5, place: 'top' },
				_react2.default.createElement(
					'div',
					{ style: { width: 160, minHeight: 20, wordWrap: "break-word", padding: "10px", whiteSpace: "normal", lineHeight: "22px" } },
					value
				)
			);
		};

		_this.visitRecordList = function () {
			if (!_State2.default.detail.records) {
				return;
			}

			var tr = [];

			var records = _State2.default.detail.records;
			var len = records.length;
			if (_State2.default.recordDevelop && records.length > _State2.default.visitLen) {
				len = _State2.default.visitLen;
			}

			for (var i = 0; i < len; i++) {

				var tds = [];
				var everyTr = records[i];
				var text = everyTr.isContinue;
				if (text == "YES") {
					text = "是";
				} else {
					text = "否";
				}
				tds.push(_react2.default.createElement(
					'div',
					{ className: 'div-td' },
					_react2.default.createElement(
						'span',
						{ className: 'tableOver' },
						everyTr.visitTypeName
					),
					_this.everyTd(everyTr.visitTypeName)
				));
				tds.push(_react2.default.createElement(
					'div',
					{ className: 'div-td' },
					_react2.default.createElement(
						'span',
						{ className: 'tableOver' },
						(0, _Utils.DateFormat)(everyTr.visitTime, "yyyy-mm-dd")
					),
					_this.everyTd((0, _Utils.DateFormat)(everyTr.visitTime, "yyyy-mm-dd"))
				));
				tds.push(_react2.default.createElement(
					'div',
					{ className: 'div-td' },
					_react2.default.createElement(
						'span',
						{ className: 'tableOver' },
						everyTr.linkName
					),
					_this.everyTd(everyTr.linkName)
				));
				tds.push(_react2.default.createElement(
					'div',
					{ className: 'div-td' },
					_react2.default.createElement(
						'span',
						{ className: 'tableOver' },
						everyTr.linkTel
					),
					_this.everyTd(everyTr.linkTel)
				));
				tds.push(_react2.default.createElement(
					'div',
					{ className: 'div-td' },
					_react2.default.createElement(
						'span',
						{ className: 'tableOver' },
						everyTr.levelName
					),
					_this.everyTd(everyTr.levelName)
				));
				tds.push(_react2.default.createElement(
					'div',
					{ className: 'div-td' },
					_react2.default.createElement(
						'span',
						{ className: 'tableOver' },
						everyTr.visitDetail
					),
					_this.everyTd(everyTr.visitDetail)
				));
				tds.push(_react2.default.createElement(
					'div',
					{ className: 'div-td' },
					_react2.default.createElement(
						'span',
						{ className: 'tableOver' },
						text
					)
				));
				tds.push(_react2.default.createElement(
					'div',
					{ className: 'div-td' },
					_react2.default.createElement(
						'span',
						{ className: 'tableOver' },
						everyTr.reasonName
					),
					_this.everyTd(everyTr.reasonName)
				));

				tr.push(_react2.default.createElement(
					'div',
					{ className: 'tr-content' },
					tds
				));
			}

			return _react2.default.createElement(
				'div',
				{ className: 'tableDiv' },
				_react2.default.createElement(
					'div',
					{ className: 'tr-title' },
					_react2.default.createElement(
						'span',
						null,
						'\u62DC\u8BBF\u65B9\u5F0F'
					),
					_react2.default.createElement(
						'span',
						null,
						'\u62DC\u8BBF\u65F6\u95F4'
					),
					_react2.default.createElement(
						'span',
						null,
						'\u8054\u7CFB\u4EBA'
					),
					_react2.default.createElement(
						'span',
						null,
						'\u8054\u7CFB\u65B9\u5F0F'
					),
					_react2.default.createElement(
						'span',
						null,
						'\u5BA2\u6237\u5206\u7C7B'
					),
					_react2.default.createElement(
						'span',
						null,
						'\u6C9F\u901A\u60C5\u51B5'
					),
					_react2.default.createElement(
						'span',
						null,
						'\u662F\u5426\u8DDF\u8FDB'
					),
					_react2.default.createElement(
						'span',
						null,
						'\u539F\u56E0'
					)
				),
				tr
			);
		};

		var comeFrom = _this.props.comeFrom;


		_State2.default.initComeFrom(comeFrom);

		return _this;
	}

	_createClass(LookDetail, [{
		key: 'render',
		value: function render() {

			var evenStyle = { width: '280px', marginLeft: -10 };
			var oddStyle = { width: '290px', marginLeft: -10 };
			var unifyStyle = {};
			var uniStyle = {};
			var detail = _State2.default.detail;
			var isDeadline = false;
			var _props = this.props,
			    editsSwitch = _props.editsSwitch,
			    IndentSwitch = _props.IndentSwitch;

			var recordDevelop = _State2.default.recordDevelop;
			var hasOffice = detail.hasOffice;
			if (hasOffice == "YES") {
				hasOffice = "是 ";
				isDeadline = true;
			} else {
				hasOffice = "否";
				isDeadline = false;
			}

			if (detail.stationNum == '0') {
				detail.stationNum = '0';
			}
			if (detail.staionPrice == '0') {
				detail.staionPrice = '0';
			}
			if (detail.teamNum == '0') {
				detail.teamNum = '0';
			}
			if (detail.amount == '0') {
				detail.amount = '0';
			}

			if (isDeadline) {
				unifyStyle = oddStyle;
				uniStyle = evenStyle;
			} else {
				unifyStyle = evenStyle;
				uniStyle = oddStyle;
			}

			var tooltipTextStyle = { maxWidth: "224px", whiteSpace: "normal", wordWrap: "break-word", height: "auto", lineHeight: "22px", overflow: "hidden" };
			return _react2.default.createElement(
				'div',
				{ className: 'm-LookDetailed', style: { marginTop: 8 } },
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u5BA2\u6237\u6765\u6E90:', style: oddStyle, component: 'labelText', value: detail.sourceName, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u610F\u5411\u5DE5\u4F4D\u6570:', style: evenStyle, component: 'labelText', value: detail.stationNum == '' ? detail.stationNum : detail.stationNum + "个", inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u8054\u7CFB\u4EBA\u59D3\u540D:', style: oddStyle, component: 'labelText', value: detail.name, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u610F\u5411\u5DE5\u4F4D\u7C7B\u578B:', style: evenStyle, component: 'labelText', value: detail.staionTypeName, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u8054\u7CFB\u4EBA\u7535\u8BDD:', style: oddStyle, component: 'labelText', value: detail.tel, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u610F\u5411\u5DE5\u4F4D\u4EF7\u683C:', style: evenStyle, component: 'labelText', value: detail.staionPrice == '' ? detail.staionPrice : detail.staionPrice + "元", inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u8054\u7CFB\u4EBA\u90AE\u7BB1:', style: oddStyle, component: 'labelText', value: detail.mail, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u610F\u5411\u5165\u9A7B\u793E\u533A:', style: evenStyle, component: 'labelText', value: detail.intentionCommunityName, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u8054\u7CFB\u4EBA\u5FAE\u4FE1:', style: oddStyle, component: 'labelText', value: detail.wechat, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u9884\u8BA1\u5165\u9A7B\u65F6\u95F4:', style: evenStyle, component: 'labelText', value: _react2.default.createElement(_krUi.KrDate, { style: { marginTop: 5 }, value: detail.inTime, format: 'yyyy-mm-dd' }), inline: true })
				),
				_react2.default.createElement('div', { className: 'bottomWire' }),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u516C\u53F8\u540D\u79F0:', style: oddStyle, component: 'labelText', value: detail.company, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u878D\u8D44\u8F6E\u6B21:', style: evenStyle, component: 'labelText', value: detail.roundName, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u516C\u53F8\u89C4\u6A21:', style: oddStyle, component: 'labelText', value: detail.teamNum == '' ? detail.teamNum : detail.teamNum + "人", inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u878D\u8D44\u91D1\u989D:', style: evenStyle, component: 'labelText', value: detail.amount == '' ? detail.amount : detail.amount + "元", inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u529E\u516C\u5BA4\u60C5\u51B5:', style: oddStyle, component: 'labelText', value: hasOffice, inline: true })
				),
				isDeadline && _react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u5230\u671F\u65F6\u95F4:', style: evenStyle, component: 'labelText', value: (0, _Utils.DateFormat)(detail.deadline, "yyyy-mm-dd"), inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u9879\u76EE\u540D\u79F0:', style: unifyStyle, component: 'labelText', value: detail.projectName, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u6240\u5C5E\u5730\u533A:', style: uniStyle, component: 'labelText', value: detail.distinctName, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u9879\u76EE\u7C7B\u578B:', style: unifyStyle, component: 'labelText', value: detail.projectCategoryName, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u8BE6\u7EC6\u5730\u5740:', style: uniStyle, component: 'labelText', value: detail.detailAddress, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText' },
					_react2.default.createElement('span', { className: 'blueDrop' }),
					_react2.default.createElement(_krUi.KrField, { grid: 1 / 2, label: '\u516C\u53F8\u7F51\u5740:', style: unifyStyle, component: 'labelText', value: detail.website, inline: true })
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText', style: { width: 660, marginTop: 7, paddingLeft: 0 } },
					_react2.default.createElement('span', { className: 'blueDrop', style: { height: 5 } }),
					_react2.default.createElement(
						'span',
						{ style: { display: "inline-block", paddingLeft: 5 } },
						'\u516C\u53F8\u7B80\u4ECB:'
					),
					_react2.default.createElement(
						'p',
						{ style: { padding: "0 10px 0 15px", color: "#666666" } },
						detail.companyIntroduce
					)
				),
				_react2.default.createElement(
					'li',
					{ className: 'everyText', style: { width: 660, paddingLeft: 0 } },
					_react2.default.createElement('span', { className: 'blueDrop', style: { height: 5 } }),
					_react2.default.createElement(
						'span',
						{ style: { display: "inline-block", paddingLeft: 5 } },
						'\u5907\u6CE8:'
					),
					_react2.default.createElement(
						'p',
						{ style: { padding: "0 10px 0 15px", color: '#666' } },
						detail.remark
					)
				),
				detail.showEdit && _react2.default.createElement(
					'div',
					{ style: { textAlign: "center", marginTop: 15 } },
					_react2.default.createElement(_krUi.Button, { className: 'd-editBtn', label: '\u7F16\u8F91', type: 'submit', style: { margin: "auto", minWidth: '80px', height: '30px' }, onTouchTap: editsSwitch })
				),
				_react2.default.createElement(
					'span',
					{ className: 'visitRecordTitle' },
					'\u62DC\u8BBF\u8BB0\u5F55'
				),
				_react2.default.createElement(
					'div',
					{ className: 'visitRecord' },
					this.visitRecordList(),
					_react2.default.createElement(
						'div',
						{ className: 'isDevelop', onClick: this.isDevelopClick },
						_State2.default.isDevelop && _react2.default.createElement(
							'span',
							{ className: 'recordDevelop' },
							'\u5C55\u5F00'
						),
						!_State2.default.isDevelop && _react2.default.createElement(
							'span',
							{ className: 'recordClose' },
							'\u6536\u8D77'
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'look-addVisitBtn', style: { textAlign: "center", marginTop: 30 } },
					_react2.default.createElement(_krUi.Button, { label: '\u65B0\u589E\u62DC\u8BBF\u8BB0\u5F55', type: 'button', style: { width: 120 }, onTouchTap: IndentSwitch })
				)
			);
		}
	}]);

	return LookDetail;
}(_react.Component)) || _class;

var _default = LookDetail;
exports.default = _default;
;

var _temp = function () {
	if (typeof __REACT_HOT_LOADER__ === 'undefined') {
		return;
	}

	__REACT_HOT_LOADER__.register(LookDetail, 'LookDetail', '/Users/dongfanai/Desktop/project/kr-admin/src/Containers/Operation/CustomerManage/CustomerList/LookCustomerList/LookDetailed.js');

	__REACT_HOT_LOADER__.register(_default, 'default', '/Users/dongfanai/Desktop/project/kr-admin/src/Containers/Operation/CustomerManage/CustomerList/LookCustomerList/LookDetailed.js');
}();

;