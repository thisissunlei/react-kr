'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _Button = require('../../Button');

var _Button2 = _interopRequireDefault(_Button);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TableRow = function (_React$Component) {
	_inherits(TableRow, _React$Component);

	function TableRow(props) {
		_classCallCheck(this, TableRow);

		var _this2 = _possibleConstructorReturn(this, (TableRow.__proto__ || Object.getPrototypeOf(TableRow)).call(this, props));

		_this2.onCellClick = _this2.onCellClick.bind(_this2);
		_this2.onCellHover = _this2.onCellHover.bind(_this2);
		_this2.onCellHoverExit = _this2.onCellHoverExit.bind(_this2);
		_this2.onRowHover = _this2.onRowHover.bind(_this2);
		_this2.onRowHoverExit = _this2.onRowHoverExit.bind(_this2);
		_this2.onRowClick = _this2.onRowClick.bind(_this2);
		_this2.onOperation = _this2.onOperation.bind(_this2);

		_this2.renderRow = _this2.renderRow.bind(_this2);
		_this2.createRowColumn = _this2.createRowColumn.bind(_this2);
		return _this2;
	}

	_createClass(TableRow, [{
		key: 'onCellClick',
		value: function onCellClick(event) {
			this.onRowClick(event);
		}
	}, {
		key: 'onCellHover',
		value: function onCellHover() {}
	}, {
		key: 'onOperation',
		value: function onOperation(event) {
			var onOperation = this.props.onOperation;

			var type = '';

			try {
				type = event.target.getAttribute('data-operation');
			} catch (err) {
				console.log("file:TableRow/index.js 53行 浏览器不支持getAttribute DOM方法");
			}
			onOperation && onOperation(type, this.props.itemData);
		}
	}, {
		key: 'onCellHoverExit',
		value: function onCellHoverExit() {}
	}, {
		key: 'onRowHover',
		value: function onRowHover() {}
	}, {
		key: 'onRowHoverExit',
		value: function onRowHoverExit() {}
	}, {
		key: 'onRowClick',
		value: function onRowClick(event) {
			if (this.props.onRowClick) {
				this.props.onRowClick(event, this.props.rowNumber);
			}
		}
	}, {
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentWillUpdate',
		value: function componentWillUpdate(nextProps, nextState, nextContext) {}
	}, {
		key: 'createRowColumn',
		value: function createRowColumn(basic, columnNumber, rowNumber) {
			var itemData = this.props.itemData;
			var _basic$props = basic.props,
			    name = _basic$props.name,
			    actions = _basic$props.actions;

			var value = '';

			if (name && itemData && itemData.hasOwnProperty(name)) {
				value = itemData[name];
				value = value.toString();
			}
			var _this = this;
			var children = _react2.default.Children.map(basic.props.children, function (child, index) {
				if (_react2.default.isValidElement(child)) {
					var operation = child.props.operation;

					if (operation) {
						return _react2.default.cloneElement(child, {
							onClick: _this.onOperation,
							'data-operation': operation,
							'data-row': rowNumber
						});
					}
					return _react2.default.cloneElement(child);
				} else {
					return child;
				}
			});

			return _react2.default.cloneElement(basic, {
				columnNumber: columnNumber,
				hoverable: this.props.hoverable,
				key: this.props.rowNumber + '-' + columnNumber,
				onCellClick: this.onCellClick,
				onHover: this.onCellHover,
				onHoverExit: this.onCellHoverExit,
				value: value,
				itemData: itemData
			}, children);
		}
	}, {
		key: 'renderRow',
		value: function renderRow() {
			var _this3 = this;

			var _props = this.props,
			    className = _props.className,
			    hovered = _props.hovered,
			    onCellClick = _props.onCellClick,
			    onCellHover = _props.onCellHover,
			    onCellHoverExit = _props.onCellHoverExit,
			    onRowClick = _props.onRowClick,
			    onRowHover = _props.onRowHover,
			    onRowHoverExit = _props.onRowHoverExit,
			    rowNumber = _props.rowNumber,
			    selectable = _props.selectable,
			    selected = _props.selected,
			    visibility = _props.visibility,
			    style = _props.style,
			    itemData = _props.itemData,
			    other = _objectWithoutProperties(_props, ['className', 'hovered', 'onCellClick', 'onCellHover', 'onCellHoverExit', 'onRowClick', 'onRowHover', 'onRowHoverExit', 'rowNumber', 'selectable', 'selected', 'visibility', 'style', 'itemData']);

			var rowColumns = _react2.default.Children.map(this.props.children, function (child, columnNumber) {
				if (_react2.default.isValidElement(child)) {
					return _this3.createRowColumn(child, columnNumber, rowNumber);
				}
			});

			return rowColumns;
		}
	}, {
		key: 'render',
		value: function render() {
			var _props2 = this.props,
			    className = _props2.className,
			    visibility = _props2.visibility,
			    other = _objectWithoutProperties(_props2, ['className', 'visibility']);

			if (visibility) {
				return _react2.default.createElement(
					'tr',
					_extends({ className: className }, other),
					this.renderRow()
				);
			}

			return _react2.default.createElement('tr', null);
		}
	}]);

	return TableRow;
}(_react2.default.Component);

TableRow.displayName = 'TableRow';
TableRow.PropTypes = {
	className: _react2.default.PropTypes.string,
	children: _react2.default.PropTypes.node,
	onCellClick: _react2.default.PropTypes.func,
	onCellHover: _react2.default.PropTypes.func,
	onCellHoverExit: _react2.default.PropTypes.func,
	onRowClick: _react2.default.PropTypes.func,
	onRowHover: _react2.default.PropTypes.func,
	onRowHoverExit: _react2.default.PropTypes.func,
	rowNumber: _react2.default.PropTypes.number,
	selected: _react2.default.PropTypes.bool,
	visibility: _react2.default.PropTypes.bool,
	itemData: _react2.default.PropTypes.object,
	onOperation: _react2.default.PropTypes.func
};
exports.default = TableRow;
;

var _temp = function () {
	if (typeof __REACT_HOT_LOADER__ === 'undefined') {
		return;
	}

	__REACT_HOT_LOADER__.register(TableRow, 'TableRow', '/Users/liuyihao/Code/kr-admin/src/Components/Table/TableRow/index.js');
}();

;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Db21wb25lbnRzL1RhYmxlL1RhYmxlUm93L2luZGV4LmpzIl0sIm5hbWVzIjpbIlRhYmxlUm93IiwicHJvcHMiLCJvbkNlbGxDbGljayIsImJpbmQiLCJvbkNlbGxIb3ZlciIsIm9uQ2VsbEhvdmVyRXhpdCIsIm9uUm93SG92ZXIiLCJvblJvd0hvdmVyRXhpdCIsIm9uUm93Q2xpY2siLCJvbk9wZXJhdGlvbiIsInJlbmRlclJvdyIsImNyZWF0ZVJvd0NvbHVtbiIsImV2ZW50IiwidHlwZSIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJpdGVtRGF0YSIsInJvd051bWJlciIsIm5leHRQcm9wcyIsIm5leHRDb250ZXh0IiwibmV4dFN0YXRlIiwiYmFzaWMiLCJjb2x1bW5OdW1iZXIiLCJuYW1lIiwiYWN0aW9ucyIsInZhbHVlIiwiaGFzT3duUHJvcGVydHkiLCJ0b1N0cmluZyIsIl90aGlzIiwiY2hpbGRyZW4iLCJDaGlsZHJlbiIsIm1hcCIsImNoaWxkIiwiaW5kZXgiLCJpc1ZhbGlkRWxlbWVudCIsIm9wZXJhdGlvbiIsImNsb25lRWxlbWVudCIsIm9uQ2xpY2siLCJob3ZlcmFibGUiLCJrZXkiLCJvbkhvdmVyIiwib25Ib3ZlckV4aXQiLCJjbGFzc05hbWUiLCJob3ZlcmVkIiwic2VsZWN0YWJsZSIsInNlbGVjdGVkIiwidmlzaWJpbGl0eSIsInN0eWxlIiwib3RoZXIiLCJyb3dDb2x1bW5zIiwiQ29tcG9uZW50IiwiZGlzcGxheU5hbWUiLCJQcm9wVHlwZXMiLCJzdHJpbmciLCJub2RlIiwiZnVuYyIsIm51bWJlciIsImJvb2wiLCJvYmplY3QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7SUFFcUJBLFE7OztBQW9CcEIsbUJBQVlDLEtBQVosRUFBa0I7QUFBQTs7QUFBQSxtSEFDWEEsS0FEVzs7QUFHakIsU0FBS0MsV0FBTCxHQUFtQixPQUFLQSxXQUFMLENB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QzFELFE7Ozs7Ozs7OytCQUFBQSxRIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9saXV5aWhhby9Db2RlL2tyLWFkbWluIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vLi4vQnV0dG9uJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFibGVSb3cgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG5cdHN0YXRpYyBkaXNwbGF5TmFtZSA9ICdUYWJsZVJvdyc7XG5cblx0c3RhdGljIFByb3BUeXBlcyA9IHtcblx0XHRjbGFzc05hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG5cdFx0Y2hpbGRyZW46IFJlYWN0LlByb3BUeXBlcy5ub2RlLFxuXHRcdG9uQ2VsbENsaWNrOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcblx0XHRvbkNlbGxIb3ZlcjpSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcblx0XHRvbkNlbGxIb3ZlckV4aXQ6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxuXHRcdG9uUm93Q2xpY2s6UmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG5cdFx0b25Sb3dIb3ZlcjpSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcblx0XHRvblJvd0hvdmVyRXhpdDogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG5cdFx0cm93TnVtYmVyOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxuXHRcdHNlbGVjdGVkOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcblx0XHR2aXNpYmlsaXR5OiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcblx0XHRpdGVtRGF0YTpSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuXHRcdG9uT3BlcmF0aW9uOlJlYWN0LlByb3BUeXBlcy5mdW5jXG5cdH1cblxuXHRjb25zdHJ1Y3Rvcihwcm9wcyl7XG5cdFx0c3VwZXIocHJvcHMpO1xuXG5cdFx0dGhpcy5vbkNlbGxDbGljayA9IHRoaXMub25DZWxsQ2xpY2suYmluZCh0aGlzKTtcblx0XHR0aGlzLm9uQ2VsbEhvdmVyID0gdGhpcy5vbkNlbGxIb3Zlci5iaW5kKHRoaXMpO1xuXHRcdHRoaXMub25DZWxsSG92ZXJFeGl0ID0gdGhpcy5vbkNlbGxIb3ZlckV4aXQuYmluZCh0aGlzKTtcblx0XHR0aGlzLm9uUm93SG92ZXIgPSB0aGlzLm9uUm93SG92ZXIuYmluZCh0aGlzKTtcblx0XHR0aGlzLm9uUm93SG92ZXJFeGl0ID0gdGhpcy5vblJvd0hvdmVyRXhpdC5iaW5kKHRoaXMpO1xuXHRcdHRoaXMub25Sb3dDbGljayA9IHRoaXMub25Sb3dDbGljay5iaW5kKHRoaXMpO1xuXHRcdHRoaXMub25PcGVyYXRpb24gPSB0aGlzLm9uT3BlcmF0aW9uLmJpbmQodGhpcyk7XG5cblx0XHR0aGlzLnJlbmRlclJvdyA9IHRoaXMucmVuZGVyUm93LmJpbmQodGhpcyk7XG5cdFx0dGhpcy5jcmVhdGVSb3dDb2x1bW4gPSB0aGlzLmNyZWF0ZVJvd0NvbHVtbi5iaW5kKHRoaXMpO1xuXHR9XG5cblx0b25DZWxsQ2xpY2soZXZlbnQpe1xuXHRcdHRoaXMub25Sb3dDbGljayhldmVudCk7XG5cdH1cblxuXHRvbkNlbGxIb3Zlcigpe1xuXG5cdH1cblxuXHRvbk9wZXJhdGlvbihldmVudCl7XG5cdFx0Y29uc3Qge29uT3BlcmF0aW9ufSAgPSB0aGlzLnByb3BzO1xuXHRcdGxldCB0eXBlID0gJyc7XG5cblx0XHR0cnl7XG5cdFx0ICAgdHlwZSA9IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3BlcmF0aW9uJyk7XG5cdFx0fWNhdGNoKGVycil7XG5cdFx0XHRjb25zb2xlLmxvZyhcImZpbGU6VGFibGVSb3cvaW5kZXguanMgNTPooYwg5rWP6KeI5Zmo5LiN5pSv5oyBZ2V0QXR0cmlidXRlIERPTeaWueazlVwiKVxuXHRcdH1cblx0XHRvbk9wZXJhdGlvbiAmJiBvbk9wZXJhdGlvbih0eXBlLHRoaXMucHJvcHMuaXRlbURhdGEpO1xuXHR9XG5cblx0b25DZWxsSG92ZXJFeGl0KCl7XG5cblx0fVxuXG5cdG9uUm93SG92ZXIoKXtcblxuXHR9XG5cblx0b25Sb3dIb3ZlckV4aXQoKXtcblxuXHR9XG5cblx0b25Sb3dDbGljayhldmVudCl7XG5cdFx0aWYgKHRoaXMucHJvcHMub25Sb3dDbGljaykge1xuXHRcdFx0dGhpcy5wcm9wcy5vblJvd0NsaWNrKGV2ZW50LCB0aGlzLnByb3BzLnJvd051bWJlcik7XG5cdFx0fVxuXHR9XG5cblxuXHRjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcyxuZXh0Q29udGV4dCl7XG5cblx0fVxuXG5cdGNvbXBvbmVudFdpbGxVcGRhdGUobmV4dFByb3BzLG5leHRTdGF0ZSxuZXh0Q29udGV4dCl7XG5cblx0fVxuXG5cdGNyZWF0ZVJvd0NvbHVtbihiYXNpYyxjb2x1bW5OdW1iZXIscm93TnVtYmVyKXtcblxuXHRcdGNvbnN0IHtpdGVtRGF0YX0gPSB0aGlzLnByb3BzO1xuXHRcdGxldCB7bmFtZSxhY3Rpb25zfSA9IGJhc2ljLnByb3BzO1xuXHRcdGxldCB2YWx1ZSA9ICcnO1xuXG5cdFx0aWYobmFtZSAmJiBpdGVtRGF0YSAmJiBpdGVtRGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSl7XG5cdFx0XHR2YWx1ZSA9IGl0ZW1EYXRhW25hbWVdO1xuXHRcdFx0dmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuXHRcdH1cblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdGxldCBjaGlsZHJlbiA9IFJlYWN0LkNoaWxkcmVuLm1hcChiYXNpYy5wcm9wcy5jaGlsZHJlbixmdW5jdGlvbihjaGlsZCxpbmRleCl7XG5cdFx0XHRpZiAoUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGQpKSB7XG5cdFx0XHRcdGxldCB7b3BlcmF0aW9ufSA9IGNoaWxkLnByb3BzO1xuXHRcdFx0XHRpZihvcGVyYXRpb24pe1xuXHRcdFx0XHRcdHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQse1xuXHRcdFx0XHRcdFx0b25DbGljazpfdGhpcy5vbk9wZXJhdGlvbixcblx0XHRcdFx0XHRcdCdkYXRhLW9wZXJhdGlvbic6b3BlcmF0aW9uLFxuXHRcdFx0XHRcdFx0J2RhdGEtcm93Jzpyb3dOdW1iZXJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkKTtcblx0XHRcdH1lbHNle1xuXHRcdFx0XHRyZXR1cm4gY2hpbGQ7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KGJhc2ljLCB7XG5cdFx0XHRjb2x1bW5OdW1iZXI6IGNvbHVtbk51bWJlcixcblx0XHRcdGhvdmVyYWJsZTogdGhpcy5wcm9wcy5ob3ZlcmFibGUsXG5cdFx0XHRrZXk6IGAke3RoaXMucHJvcHMucm93TnVtYmVyfS0ke2NvbHVtbk51bWJlcn1gLFxuXHRcdFx0b25DZWxsQ2xpY2s6IHRoaXMub25DZWxsQ2xpY2ssXG5cdFx0XHRvbkhvdmVyOiB0aGlzLm9uQ2VsbEhvdmVyLFxuXHRcdFx0b25Ib3ZlckV4aXQ6IHRoaXMub25DZWxsSG92ZXJFeGl0LFxuXHRcdFx0dmFsdWUsXG5cdFx0XHRpdGVtRGF0YSxcblx0XHR9LGNoaWxkcmVuKTtcblx0fVxuXG5cdHJlbmRlclJvdygpe1xuXHRcdGNvbnN0IHtcblx0XHRcdGNsYXNzTmFtZSxcblx0XHRcdGhvdmVyZWQsXG5cdFx0XHRvbkNlbGxDbGljayxcblx0XHRcdG9uQ2VsbEhvdmVyLFxuXHRcdFx0b25DZWxsSG92ZXJFeGl0LFxuXHRcdFx0b25Sb3dDbGljayxcblx0XHRcdG9uUm93SG92ZXIsXG5cdFx0XHRvblJvd0hvdmVyRXhpdCxcblx0XHRcdHJvd051bWJlcixcblx0XHRcdHNlbGVjdGFibGUsXG5cdFx0XHRzZWxlY3RlZCxcblx0XHRcdHZpc2liaWxpdHksXG5cdFx0XHRzdHlsZSxcblx0XHRcdGl0ZW1EYXRhLFxuXHRcdFx0Li4ub3RoZXIsXG5cdFx0fSA9IHRoaXMucHJvcHM7XG5cblx0XHRsZXQgcm93Q29sdW1ucyA9IFJlYWN0LkNoaWxkcmVuLm1hcCh0aGlzLnByb3BzLmNoaWxkcmVuLCAoY2hpbGQsIGNvbHVtbk51bWJlcikgPT4ge1xuXHRcdFx0aWYgKFJlYWN0LmlzVmFsaWRFbGVtZW50KGNoaWxkKSkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5jcmVhdGVSb3dDb2x1bW4oY2hpbGQsY29sdW1uTnVtYmVyLHJvd051bWJlcik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcm93Q29sdW1ucztcblx0fVxuXG5cblx0cmVuZGVyKCkge1xuXG5cdFx0Y29uc3Qge1xuXHRcdFx0Y2xhc3NOYW1lLFxuXHRcdFx0dmlzaWJpbGl0eSxcblx0XHRcdC4uLm90aGVyLFxuXHRcdH0gPSB0aGlzLnByb3BzO1xuXG5cdFx0aWYodmlzaWJpbGl0eSl7XG5cdFx0XHRyZXR1cm4gKFxuXHRcdFx0PHRyIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSB7Li4ub3RoZXJ9PlxuXHRcdFx0XHRcdHt0aGlzLnJlbmRlclJvdygpfVxuXHRcdFx0XHQ8L3RyPlxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gKFxuXHRcdFx0PHRyPjwvdHI+XG5cdFx0KTtcblxuXG5cdH1cbn1cbiJdfQ==