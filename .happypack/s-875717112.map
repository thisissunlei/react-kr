{"version":3,"sources":["src/Components/KrField/SearchListComponent/index.js"],"names":["SelectComponent","props","getMenberList","_this","dispatch","callAPI","then","response","console","log","option","map","item","value","id","label","name","setState","options","optionsList","state","catch","err","onfocus","showCity","bodyEvent","onChange","e","target","key","forEach","indexOf","push","selected","selectList","innerHTML","select","refs","input","nameId","split","onSubmit","onBlur","click","event","handleChange","bind","setInitValue","isInit","nextProps","inline","search","type","meta","touched","error","children","disabled","style","requireLabel","multi","other","cityDiv","display","Component","defaultProps","PropTypes","func","bool"],"mappings":"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","file":"index.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import React from 'react';\n\nimport ReactSelect from '../../Select/Select';\nimport Input from '../../Input';\nimport {Actions,Store} from 'kr/Redux';\nimport WrapComponent from '../WrapComponent';\nimport './index.less';\nimport $ from 'jquery';\nimport {ShallowEqual} from 'kr/Utils';\n//import 'react-select/dist/react-select.css';\n\nexport default class SelectComponent extends React.Component {\n\n\n\tstatic defaultProps = {\n\t\tinline: false\n\t}\n\n\tstatic PropTypes = {\n\t\tonChange: React.PropTypes.func,\n\t\tinline: React.PropTypes.bool,\n\t\tsearch: React.PropTypes.bool\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.handleChange = this.handleChange.bind(this);\n\n\t\tthis.setInitValue = this.setInitValue.bind(this);\n\n\t\tthis.isInit = false;\n\n\t\tthis.state = {\n\t\t\tvalue: '',\n\t\t\toptions:[],\n\t\t\tshowCity:false,\n\t\t\toptionsList:[],\n\t\t\tname:'',\n\t\t\tselected:false\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setInitValue(this.props.input.value);\n\t\tthis.getMenberList();\n\t}\n\tgetMenberList=()=>{\n\t\tlet _this = this;\n\t\tStore.dispatch(Actions.callAPI('memberRecvList'))\n\t\t.then(function(response){\n\t\t\tconsole.log('response',response);\n\t\t\tlet option = [];\n\t\t\toption = response.map((item)=>{\n\t\t\t\titem.value = item.id ;\n\t\t\t\titem.label = item.name;\n\t\t\t\treturn item;\n\t\t\t})\n\t\t\t_this.setState({\n\t\t\t\toptions:option,\n\t\t\t\toptionsList:option\n\t\t\t},function(){\n\t\t\t\tconsole.log('dddddd',_this.state)\n\t\t\t})\n\t\t}).catch(function(err){\n\t\t\tconsole.log('err',err);\n\t\t});\n\t}\n\n\n\tcomponentWillReceiveProps(nextProps){\n\t}\n\n\tsetInitValue(value) {\n\n\t\tif (!value) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tvalue\n\t\t});\n\t\tthis.isInit = true;\n\t}\n\n\thandleChange(value) {\n\n\t\tlet {\n\t\t\tinput\n\t\t} = this.props;\n\t\tthis.setState({\n\t\t\tvalue\n\t\t});\n\t\tinput.onChange(value);\n\t}\n\n\t\n\n\tonfocus=()=>{\n\t\tlet {showCity} = this.state;\n\t\tif(showCity){\n\t\t\treturn;\n\t\t}\n\t\tthis.bodyEvent();\n\t\tthis.setState({\n\t\t\tshowCity:true\n\t\t})\n\t\tconsole.log('onfocus');\n\t}\n\tonChange=(e)=>{\n\t\tconsole.log('onChange',e.target.value);\n\t\tlet key = e.target.value;\n\t\tlet {options} = this.state;\n\t\tlet optionsList = [];\n\t\toptions.forEach((item)=>{\n\t\t\tif(item.label.indexOf(key)>=0){\n\t\t\t\toptionsList.push(item)\n\t\t\t}\n\t\t})\n\t\tthis.setState({\n\t\t\toptionsList,\n\t\t\tselected:false\n\t\t})\n\t}\n\tselectList=(e)=>{\n\t\tconsole.log(e.target.id,e.target.innerHTML);\n\t\tlet select = this.refs.input;\n\t\tlet nameId = e.target.id.split('-')[2];\n\t\tconsole.log(select.value);\n\t\tselect.value = e.target.innerHTML;\n\n\t\tthis.setState({\n\t\t\tshowCity:false,\n\t\t\tvalue:nameId,\n\t\t\tname:e.target.innerHTML,\n\t\t\tselected:true\n\t\t});\n\t\tlet {onSubmit} = this.props;\n\t\tonSubmit && onSubmit(nameId);\n\t}\n\tonBlur=()=>{\n\t\tlet {value} = this.state;\n\t\tlet select = this.refs.input;\n\t\tif(!value){\n\t\t\tselect.value = '';\n\t\t}\n\t}\n\tbodyEvent=()=>{\n\t\tlet _this = this;\n\t\tlet select = this.refs.input;\n\t\tlet {onSubmit} = this.props;\n\t\t$('body').click(function(event){\n\t\t\tif(event.target.id.indexOf('ui-selectlist')){\n\t\t\t\tif(!_this.state.selected){\n\t\t\t\t\tselect.value = null;\n\t\t\t\t\t_this.setState({\n\t\t\t\t\t\tvalue:''\n\t\t\t\t\t},function(){\n\t\t\t\t\t\tonSubmit && onSubmit(0);\n\t\t\t\t\t})\n\n\t\t\t\t}\n\t\t\t\t_this.setState({\n\t\t\t\t\tshowCity:false\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\nrender() {\n\n\t\tlet {input, label, inline, search, type, meta: {touched, error}, children, disabled, style, requireLabel, multi, ...other} = this.props;\n\t\tlet {options,optionsList} = this.state;\n\t\tconsole.log('options',optionsList);\n\t\tlet {showCity} = this.state;\n\t\tlet cityDiv = {};\n\t\tcityDiv.display = showCity?'block':'none';\n\n\t\treturn (\n\t\t\t<WrapComponent label={label} wrapStyle={style} requireLabel={requireLabel} inline={inline} search={search}>\n\t\t\t\t<div className=\"ui-list-compontent\">\n\t\t\t\t\t<input ref='input' id='ui-selectlist-input' autoComplete=\"off\" onFocus={this.onfocus} onChange={this.onChange} placeholder=\"请输入...\" onBlur={this.onBlur}/>\n\t\t\t\t\t<span className=\"arrow\"></span>\n\n\t\t\t\t\t<div className=\"ui-list-cantainer\" style={cityDiv}>\n\t\t\t\t\t{optionsList.map(item=>{\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"ui-list-content\" id={`ui-selectlist-${item.value}`} onClick={this.selectList} ref='selectContent'>{item.label}</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\t{touched && error && <div className=\"error-wrap\"> <span>{error}</span> </div> }\n\t\t\t</WrapComponent>\n\n\t\t);\n\t}\n}\n"]}