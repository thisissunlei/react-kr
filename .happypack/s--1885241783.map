{"version":3,"sources":["src/Components/KrField/UploadImageComponent/index.js"],"names":["UploadImageComponent","props","context","operationImg","state","imgUpload","setState","operateImg","notOperateImg","onError","message","show","type","progress","onChange","event","imgSrc","errorHide","_this","file","target","files","timer","window","setInterval","clearInterval","imgType","imgSize","Math","round","size","refs","inputImg","value","inputImgNew","uploadImage","src","errorTip","form","FormData","append","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","data","token","docTypeCode","operater","onTokenSuccess","sourceservicetoken","xhrfile","fileResponse","code","functionHeightWidth","msg","onerror","e","console","error","statusText","open","responseType","send","onTokenError","fileData","reader","FileReader","onload","result","image","Image","width","height","imageStatus","input","readAsDataURL","deleteImg","nextProps","children","className","style","name","disabled","photoSize","pictureFormat","pictureMemory","requestURI","other","display","reFreshImg","defaultProps","PropTypes","string"],"mappings":"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","file":"index.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import React, {\n\tComponent\n} from 'react';\nimport {\n\tField,\n\treduxForm\n} from 'redux-form';\nimport Notify from '../../Notify';\nimport ReactDOM from 'react-dom';\nimport './index.less';\nimport refresh from \"./images/refresh.svg\";\nimport deleteImg from \"./images/deleteImg.svg\";\nimport {Actions,Store} from 'kr/Redux';\nexport default class UploadImageComponent extends Component {\n\tstatic defaultProps = {\n\t\t\n\t}\n\tstatic PropTypes = {\n\t\tclassName: React.PropTypes.string\n\t}\n\tconstructor(props,context){\n\t\tsuper(props,context);\n\t\tthis.state={\n\t\t\timgSrc:'',\n\t\t\terrorHide: true,\n\t\t\terrorTip:'',\n\t\t\t// 图片是否已经上传到界面\n\t\t\timgUpload: false,\n\t\t\ttimer :\"\",\n\t\t\toperateImg :false,\n\t\t\tfiles :{},\n\t\t\timageStatus : true\n\t\t}\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.setState({\n\t\t\tfiles: []\n\t\t});\n\t}\n\tcomponentDidMount() {\n\n\t}\n\tcomponentWillReceiveProps(nextProps){\n\t}\n\tonTokenError() {\n\t\tNotify.show([{\n\t\t\tmessage: '初始化上传文件失败,请重新上传',\n\t\t\ttype: 'danger',\n\t\t}]);\n\t}\n\toperationImg=()=>{\n\t\t// console.log(\"this.state.imgUpload)\",this.state.imgUpload);\n\t\tif(this.state.imgUpload){\n\t\t\tthis.setState({\n\t\t\t\toperateImg :true\n\t\t\t})\n\t\t}\n\t}\n\tnotOperateImg=()=>{\n\t\tif(this.state.imgUpload){\n\t\t\tthis.setState({\n\t\t\t\toperateImg :false\n\t\t\t})\n\t\t}\n\t}\n\tonTokenSuccess(form) {\n\t\tthis.setState({\n\t\t\tform\n\t\t});\n\t}\n\tonError=(message)=>{\n\t\tmessage = message || '上传文件失败，请重新上传';\n\t\tNotify.show([{\n\t\t\tmessage: message,\n\t\t\ttype: 'danger',\n\t\t}]);\n\n\t\tthis.setState({\n\t\t\tprogress: 0,\n\t\t\timgUpload: false\n\t\t});\n\t}\n\tonChange=(event)=>{\n\t\tthis.setState({\n\t\t\timgSrc: \"\",\n\t\t\toperateImg :false,\n\t\t\timgUpload :false,\n\t\t\terrorHide: true\n\t\t})\n\t\tlet _this = this;\n\t\tlet file = event.target.files[0];\n\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\t\t\n\t\tif (file) {\n\t\t\tvar progress = 0;\n\t\t\tvar timer = window.setInterval(function() {\n\t\t\t\tif (progress >= 100) {\n\t\t\t\t\twindow.clearInterval(timer);\n\t\t\t\t\t// _this.setState({\n\t\t\t\t\t// \tprogress: 0,\n\t\t\t\t\t// \tisUploading: false\n\t\t\t\t\t// });\n\t\t\t\t}\n\t\t\t\tprogress += 10;\n\t\t\t\t_this.setState({\n\t\t\t\t\tprogress\n\t\t\t\t});\n\t\t\t}, 300);\n\t\t}\n\t\tlet imgType = file.type;\n\t\tlet imgSize = Math.round(file.size/1024*100)/100;\n\t\tif(imgType!== \"image/jpg\" && imgType!== \"image/jpeg\"){\n\t\t\tthis.refs.inputImg.value =\"\";\n\t\t\tthis.refs.inputImgNew.value =\"\";\n\t\t\tthis.refs.uploadImage.src=\"\";\n\t\t\t_this.setState({\n  \t\t\t\terrorHide: false,\n  \t\t\t\terrorTip:\"请上传正确格式的图片\"\n  \t\t\t})\n  \t\t\treturn;\n\t\t}\n\t\tif(imgSize>32){\n\t\t\tthis.refs.inputImg.value =\"\";\n\t\t\tthis.refs.inputImgNew.value =\"\";\n\t\t\tthis.refs.uploadImage.src=\"\";\n\t\t\t_this.setState({\n\t\t\t\terrorHide: false,\n\t\t\t\terrorTip:\"图片尺寸不得大于32K\"\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\t\tvar form = new FormData();\n\t\tform.append('file', file);\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.onreadystatechange = function() {\n\t\t\tif (xhr.readyState === 4) {\n\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\tvar response = xhr.response.data;\n\t\t\t\t\t// console.log(\"response\",response);\n\t\t\t\t\tform.append('sourceservicetoken', response.token);\n\t\t\t\t\tform.append('docTypeCode', response.docTypeCode);\n\t\t\t\t\tform.append('operater', response.operater);\n\t\t\t\t\t_this.onTokenSuccess({\n\t\t\t\t\t\tsourceservicetoken: response.token,\n\t\t\t\t\t\tdocTypeCode: response.docTypeCode,\n\t\t\t\t\t\toperater: response.operater\n\t\t\t\t\t});\n\t\t\t\t\tvar xhrfile = new XMLHttpRequest();\n\t\t\t\t\txhrfile.onreadystatechange = function() {\n\t\t\t\t\t\tif (xhrfile.readyState === 4) {\n\t\t\t\t\t\t\tvar fileResponse = xhrfile.response;\n\t\t\t\t\t\t\tif (xhrfile.status === 200) {\n\t\t\t\t\t\t\t\tif (fileResponse && fileResponse.code > 0) {\n\t\t\t\t\t\t\t\t\t_this.functionHeightWidth(file,xhrfile);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t_this.onError(fileResponse.msg);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (xhrfile.status == 413) {\n\t\t\t\t\t\t\t\t_this.onError('您上传的文件过大！');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_this.onError('后台报错请联系管理员！');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\txhrfile.onerror = function(e) {\n\t\t\t\t\t\tconsole.error(xhr.statusText);\n\t\t\t\t\t};\n\t\t\t\t\txhrfile.open('POST', '/api/krspace-finance-web/community/sysDeviceDefinition/upload-pic', true);\n\t\t\t\t\txhrfile.responseType = 'json';\n\t\t\t\t\txhrfile.send(form);\n\t\t\t\t} else {\n\t\t\t\t\t_this.onTokenError();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\txhr.onerror = function(e) {\n\t\t\tconsole.error(xhr.statusText);\n\t\t};\n\t\txhr.open('GET', '/api/krspace-finance-web/finacontractdetail/getSourceServiceToken', true);\n\t\txhr.responseType = 'json';\n\t\txhr.send(null);\n\t\t// 暂时觉得此处用不着了，等连上服务器需要再检查一下\n\t\t_this.setState({\n\t\t\timgUpload: true,\n\t\t\toperateImg : false\n\t\t});\n\t}\n\t// 校验宽高\n\tfunctionHeightWidth=(file,xhrfile)=>{\n\t\tlet _this = this;\n\t\tif(file ){\n                var fileData = file;\n                 //读取图片数据\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                 \t// console.log(\"e\",e);\n                    var data = e.target.result;\n                     //加载图片获取图片真实宽度和高度\n                    var image = new Image();\n                    image.onload=function(){\n                         var width = image.width;\n                         var height = image.height;\n                         if(width !== 212 || height !== 136){\n                         \t_this.refs.inputImg.value =\"\";\n\t\t\t\t\t\t\t_this.refs.inputImgNew.value =\"\";\n\t\t\t\t\t\t\t_this.refs.uploadImage.src=\"\";\n                         \t_this.setState({\n\t\t\t\t\t\t\t\terrorHide: false,\n\t\t\t\t\t\t\t\terrorTip:\"图片宽度必须是212*136\",\n\t\t\t\t\t\t\t\timageStatus : false,\n\t\t\t\t\t\t\t\timgUpload : false\n\t\t\t\t\t\t\t});\n                        }else{\n                        \t_this.refs.uploadImage.src = xhrfile.response.data;\n                        \t_this.setState({\n\t\t\t\t\t\t\t\timageStatus : true,\n\t\t\t\t\t\t\t\timgUpload : true,\n\t\t\t\t\t\t\t\toperateImg : false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst {input}=_this.props;\n\t\t\t\t\t\t\tinput.onChange(xhrfile.response.data);\n                        }\n\n                    };\n                    image.src= data;\n                 };\n                 reader.readAsDataURL(fileData);\n \n             }\n\t}\n\t// 删除图片\n\tdeleteImg=()=>{\n\t\tthis.setState({\n\t\t\timgSrc: \"\",\n\t\t\timgUpload: false,\n\t\t\toperateImg :false\n\t\t})\n\t\tthis.refs.inputImg.value =\"\";\n\t\tthis.refs.inputImgNew.value =\"\";\n\t\tthis.refs.uploadImage.src=\"\";\n\t\tconst {input}=this.props;\n\t\tinput.onChange(\"\");\n\t}\n\trender() {\n\t\tlet {children,className,style,type,name,disabled,photoSize,pictureFormat,pictureMemory,requestURI,...other} = this.props;\n\t\tlet {operateImg} = this.state;\n\t\t// console.log(\"this.state.operateImg\",this.state.operateImg)\n\t\treturn(\n\t\t\t<div className=\"ui-uploadimg-box\" style={style}>\n\t\t\t\t<div className='ui-uploadimg-outbox' >\n\t\t\t\t\t<div className='ui-uploadimg-innerbox' onMouseEnter={this.operationImg} onMouseLeave={this.notOperateImg}>\n\t\t\t\t\t\t<div className='ui-uploadimg-inner' >\n\t\t\t\t\t\t\t<img className=\"image\"  src={this.state.imgSrc}  ref=\"uploadImage\" />\n\t\t\t\t\t\t\t<span className='ui-uploadimg-button'>+</span>\n\t\t\t\t\t\t\t<input type='file' onChange={this.onChange} ref=\"inputImg\"/>\n\t\t\t\t\t\t\t<span className='ui-uploadimg-tip'>上传图片</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"ui-uploadimg-fresh-delete\" style={{display:this.state.operateImg?\"block\":\"none\"}}>\n\t\t\t\t\t\t\t<div className=\"ui-uploadimg-operateimg ui-uploadimg-operateimg-left\" onClick={this.reFreshImg}>\n\t\t\t\t\t\t\t\t<img src={refresh} className=\"ui-uploadimg-operateimg-btn ui-uploadimg-operateimg-refresh\"/>\n\t\t\t\t\t\t\t\t<input type='file' onChange={this.onChange} ref=\"inputImgNew\" className=\"ui-refreshImgBtn\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"ui-uploadimg-operateimg ui-uploadimg-operateimg-right\" onClick={this.deleteImg}>\n\t\t\t\t\t\t\t\t<img src={deleteImg} className=\"ui-uploadimg-operateimg-btn ui-uploadimg-operateimg-delete\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<p className=\"ui-uploadimg-notice\">\n\t\t\t\t\t提示：图片尺寸为{photoSize}，图片小于{pictureMemory},格式为{pictureFormat}\n\t\t\t\t</p>\n\t\t\t\t<p className=\"ui-uploadimg-error\" style={{display:this.state.errorHide?\"none\":\"block\"}} >\n\t\t\t\t\t{this.state.errorTip}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]}