{"version":3,"sources":["src/Containers/Member/MemberManage/Setting/EditDetail.js"],"names":["EditDetail","props","onSubmit","bind","onCancel","state","detail","mainbilltypeList","clearInterCodeStyle","display","console","log","dispatch","values","oldInterCode","interCode","navigator","onLine","error","handleSubmit","pristine","reset","marginTop","foreignCode","InterCodeFocus","cardChange","clearInterCode","marginBottom","propTypes","PropTypes","func","setState","value","cReg","RegExp","test","validate","reg","errors","length","isNaN","selector","form"],"mappings":"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","file":"EditDetail.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["import React, {\n\tComponent,\n\tPropTypes\n} from 'react';\nimport {\n\tconnect\n} from 'kr/Redux';\n\nimport {\n\treduxForm,\n\tformValueSelector,\n\tinitialize\n} from 'redux-form';\nimport {\n\tActions,\n\tStore\n} from 'kr/Redux';\nimport {\n\tKrField,\n\tGrid,\n\tRow,\n\tCol,\n\tButton,\n\tButtonGroup,\n\tListGroup,\n\tListGroupItem,\n\tMessage\n} from 'kr-ui';\n\n\nclass EditDetail extends Component {\n\n\tstatic propTypes = {\n\t\tonSubmit: React.PropTypes.func,\n\t\tonCancel: React.PropTypes.func,\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.onSubmit = this.onSubmit.bind(this);\n\t\tthis.onCancel = this.onCancel.bind(this);\n\n\t\tthis.state = {\n\t\t\tdetail:props.detail,\n\t\t\tmainbilltypeList: [],\n\t\t\tclearInterCodeStyle:{\n\t\t\t\tdisplay:'none'\n\t\t\t}\n\t\t}\n\t\tconst detail=props.detail;\n\t\tconsole.log(detail,\">>>>>>\")\n\t\tStore.dispatch(initialize('EditDetail',detail));\n\t}\n\n\tonSubmit(values) {\n\t\tvar oldInterCode=this.props.detail.interCode;\n\t\tconsole.log(\"99\",oldInterCode)\n\n\t\tif (navigator.onLine) \n\t\t{ //正常工作\n\t\t} \n\t\telse { //执行离线状态时的任务\n\t\t \t\tMessage.error(\"网络已断开\")\n\t\t \t\treturn;\n\t\t} \n\t\t\n\t\tconst {\n\t\t\tonSubmit\n\t\t} = this.props;\n\t\tonSubmit && onSubmit(values);\n\t}\n\n\tonCancel() {\n\t\tconst {\n\t\t\tonCancel\n\t\t} = this.props;\n\t\tonCancel && onCancel();\n\t}\n\tInterCodeFocus=(values)=>{\n\t\tif(true){\n\t\t\tthis.setState({\n\t\t\t\tclearInterCodeStyle:{\n\t\t\t\t\tdisplay:'block'\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tclearInterCode=()=>{\n\t\tconst detail={};\n\t\tdetail.interCode=\"\";\n\t\tdetail.foreignCode=this.props.detail.foreignCode;\n\t\tStore.dispatch(initialize('EditDetail',detail));\n\t\tthis.setState({\n\t\t\t\tclearInterCodeStyle:{\n\t\t\t\t\tdisplay:'none'\n\t\t\t\t}\n\t\t\t})\n\t}\n\tcardChange=(value)=>{\n\t\tvar cReg=new RegExp(\"[\\\\u4E00-\\\\u9FFF]+\",\"g\");\n\n\t\tif(cReg.test(value)){\n\t\t\tMessage.error('卡内码内含有中文请切换英文输入法！');\n\t\t\treturn;\n\t\t}\n\t\t\n\t}\n\trender() {\n\t\tconst {\n\t\t\terror,\n\t\t\thandleSubmit,\n\t\t\tpristine,\n\t\t\treset\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<form onSubmit={handleSubmit(this.onSubmit)} style={{marginTop:0}}>\n\t\t\t\t<KrField  right={27}  left={42} right={42} name=\"foreignCode\" component=\"labelText\" label=\"会员卡号\" value={this.state.detail.foreignCode} inline={false} />\n\t\t\t\t<div className=\"clearInterCode\">\n\t\t\t\t\t<KrField  right={27}  left={42} right={42} style={{marginTop:5}} name=\"interCode\" component=\"input\" type=\"text\" label=\"会员卡内码\" onFocus={this.InterCodeFocus} onChange={this.cardChange} />\n\t\t\t\t\t<div className=\"x\" style={this.state.clearInterCodeStyle} onClick={this.clearInterCode}></div>\n\t\t\t\t</div>\n\t\t\t\t<Grid style={{marginTop:19,marginBottom:5}}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col md={12} align=\"center\">\n\t\t\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t\t\t<div  className='ui-btn-center'><Button  label=\"确定\" type=\"submit\" joinEditForm /></div>\n\t\t\t\t\t\t\t\t<Button  label=\"取消\" type=\"button\" cancle={true} onTouchTap={this.onCancel} />\n\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t);\n\t}\n}\n\nconst validate = values =>{\n\tvar foreignCode=values.foreignCode;\n\tvar reg=/^[0-9a-fA-F]{8}$/;\n\tconst errors = {}\n\n\tif(!values.foreignCode){\n\t\terrors.foreignCode = '请输入会员卡号';\n\t}\n\tif(foreignCode&&foreignCode.length!=10){\n\t\terrors.foreignCode = '请输入10位会员卡号';\n\t}\n\tif (isNaN(+foreignCode) ) {\n\t\terrors.foreignCode = '卡号由十位数字的卡号组成';\n\n\t}\n\tif(!values.interCode){\n\t\terrors.interCode = '请输入会员卡内码';\n\n\t}else if (!reg.test(values.interCode)) {\n\n\t\terrors.interCode = '内码为8位16进制数';\n\t}\n\treturn errors\n\n}\nconst selector = formValueSelector('EditDetail');\n\n\n\nexport default reduxForm({\n\tform: 'EditDetail',validate\n})(EditDetail);\n"]}