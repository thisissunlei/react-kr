'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _simpleAssign = require('simple-assign');

var _simpleAssign2 = _interopRequireDefault(_simpleAssign);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _redux = require('redux');

var _reactRedux = require('react-redux');

var _reactRouter = require('react-router');

var _Redux = require('kr/Redux');

var _Actions = require('../../../Redux/Actions');

var actionCreators = _interopRequireWildcard(_Actions);

var _materialUi = require('material-ui');

var _moreVert = require('material-ui/svg-icons/navigation/more-vert');

var _moreVert2 = _interopRequireDefault(_moreVert);

require('./index.less');

var _SidebarNav = require('../SidebarNav');

var _SidebarNav2 = _interopRequireDefault(_SidebarNav);

var _InfoList = require('../InfoList');

var _InfoList2 = _interopRequireDefault(_InfoList);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Header = function (_Component) {
	_inherits(Header, _Component);

	function Header(props, context) {
		_classCallCheck(this, Header);

		var _this2 = _possibleConstructorReturn(this, (Header.__proto__ || Object.getPrototypeOf(Header)).call(this, props, context));

		_this2.getUnReadInfo = function () {
			var _this = _this2;
			_Redux.Store.dispatch(_Redux.Actions.callAPI('getUnReadInfo', {
				startTime: '', endTime: ''
			})).then(function (response) {
				if (response.msgCount) {
					_this.setState({
						hasUnRead: response.msgCount
					});
				} else {
					_this.setState({
						hasUnRead: 0
					});
				}
			}).catch(function (err) {
				console.log(err);
			});
		};

		_this2.showInfo = function () {
			var _this2$props = _this2.props,
			    actions = _this2$props.actions,
			    sidebar_nav = _this2$props.sidebar_nav,
			    flag = _this2$props.flag,
			    right_bar = _this2$props.right_bar;

			actions.switchRightBar(!!!right_bar.switch_value);
		};

		_this2.onClose = function () {
			_this2.setState({
				right_bar: !_this2.state.right_bar.switch_value
			});
		};

		_this2.changeCount = function () {
			var hasUnRead = --_this2.state.hasUnRead;
			_this2.setState({
				hasUnRead: hasUnRead
			});
		};

		_this2.handleToggle = _this2.handleToggle.bind(_this2);
		_this2.showBottomNav = _this2.showBottomNav.bind(_this2);
		_this2.handleRequestClose = _this2.handleRequestClose.bind(_this2);
		_this2.touchTitle = _this2.touchTitle.bind(_this2);
		_this2.inforShowList = _this2.inforShowList.bind(_this2);
		_this2.state = {
			bottomNav: false,
			toggle: true,
			right_bar: { switch_value: false },
			inforLogoShow: false,
			url: window.location.hash,
			infoTab: '',
			hasUnRead: 0
		};
		_this2.hasInfoListTab = [{ url: 'community', code: '111' }];
		// this.inforShowList();

		return _this2;
	}

	_createClass(Header, [{
		key: 'componentWillMount',
		value: function componentWillMount() {
			this.inforShowList();
		}
	}, {
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(next, state) {
			this.inforShowList();
		}
	}, {
		key: 'inforShowList',
		value: function inforShowList() {
			var url = window.location.hash;
			url = url.split('/')[1];
			var _this = this;
			var currentTab = false;
			this.hasInfoListTab.map(function (item) {
				if (item.url == url) {
					currentTab = true;
				}
			});
			if (currentTab) {
				_this.getUnReadInfo();
				_this.setState({
					inforLogoShow: true,
					infoTab: url,
					right_bar: { switch_value: false }
				});
			} else {
				_this.setState({
					inforLogoShow: false,
					right_bar: { switch_value: false },
					infoTab: 'local'
				});
			}
		}
		//获取未读消息数

	}, {
		key: 'handleToggle',
		value: function handleToggle() {
			var _props = this.props,
			    actions = _props.actions,
			    sidebar_nav = _props.sidebar_nav,
			    flag = _props.flag;


			actions.switchSidebarNav(!!!sidebar_nav.switch_value);
		}
	}, {
		key: 'showBottomNav',
		value: function showBottomNav(event) {
			event.preventDefault();

			var _props2 = this.props,
			    actions = _props2.actions,
			    bottom_nav = _props2.bottom_nav;

			actions.switchBottomNav({
				switch_value: !!!bottom_nav.switch_value,
				anchor_el: event.currentTarget
			});
		}
	}, {
		key: 'handleRequestClose',
		value: function handleRequestClose() {
			var _props3 = this.props,
			    actions = _props3.actions,
			    bottom_nav = _props3.bottom_nav;

			actions.switchBottomNav({
				switch_value: !!!bottom_nav.switch_value,
				anchor_el: event.currentTarget
			});
		}
	}, {
		key: 'touchTitle',
		value: function touchTitle() {
			window.location.href = 'http://krspace.cn';
		}
	}, {
		key: 'renderHeaderNav',
		value: function renderHeaderNav(item, index) {

			if (!item.permission) {
				return null;
			}

			var styles = {
				color: '#666666',
				width: 'auto',
				height: 60
			};

			if (!item) {
				return;
			}

			if (item.active) {
				styles.color = '#394457';
				styles.fontWeight = '600';
			}

			var jumpUrl = '';

			if (item.originUrl) {
				jumpUrl = item.originUrl;
			} else {
				jumpUrl = './#' + item.router;
			}

			return _react2.default.createElement(_materialUi.FlatButton, { label: item.primaryText, key: index, style: styles, href: jumpUrl, labelStyle: { lineHeight: '60px', fontSize: "16px", fontWeight: 0 } });
		}
	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var styles = {
				paddingLeft: 0,
				position: 'fixed',
				top: 0,
				left: 0,
				right: 0,
				backgroundColor: '#FFFFFF',
				height: "60px",
				zIndex: 10
			};

			var width = 570;

			var switch_value = this.props.sidebar_nav.switch_value;
			var _state = this.state,
			    inforLogoShow = _state.inforLogoShow,
			    infoTab = _state.infoTab,
			    hasUnRead = _state.hasUnRead;

			var showInfoLogo = inforLogoShow ? 'inline-block' : 'none';
			var HeaderBar = function HeaderBar(props) {

				var iconClassName = '';
				var sidebarNavSwitch = _this3.props.sidebar_nav.switch_value;
				if (sidebarNavSwitch) {
					iconClassName = "hide-heng";
				} else {
					iconClassName = "hide-shu";
				}
				return _react2.default.createElement(_materialUi.AppBar, { style: styles,
					onLeftIconButtonTouchTap: _this3.handleToggle,
					iconStyleLeft: {
						marginTop: 0
					},

					iconElementLeft: _react2.default.createElement(
						'div',
						{ className: 'main-navs' },
						_react2.default.createElement(_materialUi.FlatButton, { onTouchTap: _this3.handleToggle, icon: _react2.default.createElement(_materialUi.FontIcon, { className: iconClassName }), style: { color: '#fff', height: 60, width: 200 } }),
						_react2.default.createElement(_materialUi.FlatButton, { onTouchTap: _this3.touchTitle, icon: _react2.default.createElement(_materialUi.FontIcon, { className: 'new-logo' }), style: { height: "60px" } }),
						_this3.props.navs_items.map(function (item, index) {
							return _this3.renderHeaderNav(item, index);
						})
					),

					iconElementRight: _react2.default.createElement(
						'div',
						{ style: { minWidth: 70, textAlign: 'right' } },
						_react2.default.createElement(
							'div',
							{ style: { display: showInfoLogo, position: 'relative', marginRight: 10, cursor: 'pointer' }, onClick: _this3.showInfo },
							_react2.default.createElement('span', { className: 'icon-info information-logo' }),
							_react2.default.createElement(
								'span',
								{ className: 'ui-un-read-count', style: { visibility: hasUnRead > 0 ? 'visible' : 'hidden' } },
								hasUnRead
							)
						),
						_react2.default.createElement(
							_materialUi.IconMenu,
							{
								iconStyle: { fill: '#394457' },
								iconButtonElement: _react2.default.createElement(
									_materialUi.IconButton,
									null,
									_react2.default.createElement(_moreVert2.default, { color: '#fff' })
								),
								targetOrigin: {
									horizontal: 'right',
									vertical: 'top'
								},
								anchorOrigin: {
									horizontal: 'right',
									vertical: 'top'
								} },
							_this3.props.user.nick && _react2.default.createElement(_materialUi.MenuItem, { primaryText: _this3.props.user.nick, onTouchTap: function onTouchTap(event) {
									window.location.hash = 'permission/personalCenter';
								} }),
							_react2.default.createElement(_materialUi.MenuItem, { primaryText: '\u9000\u51FA',
								onTouchTap: function onTouchTap(event) {
									window.location.href = '/logout/logout';
								}
							})
						)
					)
				});
			};

			return _react2.default.createElement(
				'div',
				{ className: 'no-print' },
				this.props.header_nav.switch_value && _react2.default.createElement(HeaderBar, null),
				_react2.default.createElement(
					_materialUi.Drawer,
					{ open: this.props.sidebar_nav.switch_value, width: 180, containerStyle: { marginTop: 60, boxShadow: '0 1px 1px rgba(0, 0, 0, 0.16), 0 1px 1px rgba(0, 0, 0, 0.23)', zIndex: 10, background: '#394457' } },
					_react2.default.createElement(_SidebarNav2.default, { items: this.props.navs_current_items, current_router: this.props.current_router, current_parent: this.props.current_parent, current_child: this.props.current_child })
				),
				_react2.default.createElement(
					_materialUi.Drawer,
					{ open: this.props.right_bar.switch_value, width: width, openSecondary: true, containerStyle: { marginTop: 60, boxShadow: '0 1px 1px rgba(0, 0, 0, 0.16), 0 1px 1px rgba(0, 0, 0, 0.23)', zIndex: 10 } },
					_react2.default.createElement(_InfoList2.default, { onClose: this.onClose, infoTab: infoTab, changeCount: this.changeCount })
				)
			);
		}
	}]);

	return Header;
}(_react.Component);

Header.contextTypes = {
	router: _react.PropTypes.object.isRequired
};


function mapStateToProps(state) {

	return {
		header_nav: state.header_nav,
		sidebar_nav: state.sidebar_nav,
		right_bar: state.right_bar,
		navs_items: state.navs.items,
		navs_current_items: state.navs.current_items,
		bottom_nav: state.bottom_nav,
		current_router: state.navs.current_router,
		current_parent: state.navs.current_parent,
		current_child: state.navs.current_child,
		user: state.user
	};
}

function mapDispatchToProps(dispatch) {
	return {
		actions: (0, _redux.bindActionCreators)((0, _simpleAssign2.default)({}, actionCreators), dispatch)
	};
}

var _default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Header);

exports.default = _default;
;

var _temp = function () {
	if (typeof __REACT_HOT_LOADER__ === 'undefined') {
		return;
	}

	__REACT_HOT_LOADER__.register(Header, 'Header', '/Users/tmac_zc/Code/kr-admin/src/Components/Global/Header/index.js');

	__REACT_HOT_LOADER__.register(mapStateToProps, 'mapStateToProps', '/Users/tmac_zc/Code/kr-admin/src/Components/Global/Header/index.js');

	__REACT_HOT_LOADER__.register(mapDispatchToProps, 'mapDispatchToProps', '/Users/tmac_zc/Code/kr-admin/src/Components/Global/Header/index.js');

	__REACT_HOT_LOADER__.register(_default, 'default', '/Users/tmac_zc/Code/kr-admin/src/Components/Global/Header/index.js');
}();

;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Db21wb25lbnRzL0dsb2JhbC9IZWFkZXIvaW5kZXguanMiXSwibmFtZXMiOlsiYWN0aW9uQ3JlYXRvcnMiLCJIZWFkZXIiLCJwcm9wcyIsImNvbnRleHQiLCJnZXRVblJlYWRJbmZvIiwiX3RoaXMiLCJkaXNwYXRjaCIsImNhbGxBUEkiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwidGhlbiIsInJlc3BvbnNlIiwibXNnQ291bnQiLCJzZXRTdGF0ZSIsImhhc1VuUmVhZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInNob3dJbmZvIiwiYWN0aW9ucyIsInNpZGViYXJfbmF2IiwiZmxhZyIsInJpZ2h0X2JhciIsInN3aXRjaFJpZ2h0QmFyIiwic3dpdGNoX3ZhbHVlIiwib25DbG9zZSIsInN0YXRlIiwiY2hhbmdlQ291bnQiLCJoYW5kbGVUb2dnbGUiLCJiaW5kIiwic2hvd0JvdHRvbU5hdiIsImhhbmRsZVJlcXVlc3RDbG9zZSIsInRvdWNoVGl0bGUiLCJpbmZvclNob3dMaXN0IiwiYm90dG9tTmF2IiwidG9nZ2xlIiwiaW5mb3JMb2dvU2hvdyIsInVybCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaGFzaCIsImluZm9UYWIiLCJoYXNJbmZvTGlzdFRhYiIsImNvZGUiLCJuZXh0Iiwic3BsaXQiLCJjdXJyZW50VGFiIiwibWFwIiwiaXRlbSIsInN3aXRjaFNpZGViYXJOYXYiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiYm90dG9tX25hdiIsInN3aXRjaEJvdHRvbU5hdiIsImFuY2hvcl9lbCIsImN1cnJlbnRUYXJnZXQiLCJocmVmIiwiaW5kZXgiLCJwZXJtaXNzaW9uIiwic3R5bGVzIiwiY29sb3IiLCJ3aWR0aCIsImhlaWdodCIsImFjdGl2ZSIsImZvbnRXZWlnaHQiLCJqdW1wVXJsIiwib3JpZ2luVXJsIiwicm91dGVyIiwicHJpbWFyeVRleHQiLCJsaW5lSGVpZ2h0IiwiZm9udFNpemUiLCJwYWRkaW5nTGVmdCIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsInJpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwiekluZGV4Iiwic2hvd0luZm9Mb2dvIiwiSGVhZGVyQmFyIiwiaWNvbkNsYXNzTmFtZSIsInNpZGViYXJOYXZTd2l0Y2giLCJtYXJnaW5Ub3AiLCJuYXZzX2l0ZW1zIiwicmVuZGVySGVhZGVyTmF2IiwibWluV2lkdGgiLCJ0ZXh0QWxpZ24iLCJkaXNwbGF5IiwibWFyZ2luUmlnaHQiLCJjdXJzb3IiLCJ2aXNpYmlsaXR5IiwiZmlsbCIsImhvcml6b250YWwiLCJ2ZXJ0aWNhbCIsInVzZXIiLCJuaWNrIiwiaGVhZGVyX25hdiIsImJveFNoYWRvdyIsImJhY2tncm91bmQiLCJuYXZzX2N1cnJlbnRfaXRlbXMiLCJjdXJyZW50X3JvdXRlciIsImN1cnJlbnRfcGFyZW50IiwiY3VycmVudF9jaGlsZCIsImNvbnRleHRUeXBlcyIsIm9iamVjdCIsImlzUmVxdWlyZWQiLCJtYXBTdGF0ZVRvUHJvcHMiLCJuYXZzIiwiaXRlbXMiLCJjdXJyZW50X2l0ZW1zIiwibWFwRGlzcGF0Y2hUb1Byb3BzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztJQUFZQSxjOztBQUVaOztBQUlBOzs7O0FBRUE7O0FBR0E7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7SUFHTUMsTTs7O0FBT0wsaUJBQVlDLEtBQVosRUFBbUJDLE9BQW5CLEVBQTRCO0FBQUE7O0FBQUEsK0dBQ3JCRCxLQURxQixFQUNkQyxPQURjOztBQUFBLFNBd0Q1QkMsYUF4RDRCLEdBd0RkLFlBQUk7QUFDakIsT0FBSUMsY0FBSjtBQUNBLGdCQUFNQyxRQUFOLENBQWUsZUFBUUMsT0FBUixDQUFnQixlQUFoQixFQUFpQztBQUN0Q0MsZUFBVyxFQUQyQixFQUN4QkMsU0FBUTtBQURnQixJQUFqQyxDQUFmLEVBRVVDLElBRlYsQ0FFZSxVQUFTQyxRQUFULEVBQW1CO0FBQ3hCLFFBQUdBLFNBQVNDLFFBQVosRUFBcUI7QUFDcEJQLFdBQU1RLFFBQU4sQ0FBZTtBQUNkQyxpQkFBVUgsU0FBU0M7QUFETCxNQUFmO0FBR0EsS0FKRCxNQUlLO0FBQ0pQLFdBQU1RLFFBQU4sQ0FBZTtBQUNkQyxpQkFBVTtBQURJLE1BQWY7QUFHQTtBQUNKLElBWlAsRUFZU0MsS0FaVCxDQVllLFVBQVNDLEdBQVQsRUFBYztBQUNuQkMsWUFBUUMsR0FBUixDQUFZRixHQUFaO0FBQ0gsSUFkUDtBQWVBLEdBekUyQjs7QUFBQSxTQTRKNUJHLFFBNUo0QixHQTRKbkIsWUFBSTtBQUFBLHNCQU1SLE9BQUtqQixLQU5HO0FBQUEsT0FFWGtCLE9BRlcsZ0JBRVhBLE9BRlc7QUFBQSxPQUdYQyxXQUhXLGdCQUdYQSxXQUhXO0FBQUEsT0FJWEMsSUFKVyxnQkFJWEEsSUFKVztBQUFBLE9BS1hDLFNBTFcsZ0JBS1hBLFNBTFc7O0FBT1pILFdBQVFJLGNBQVIsQ0FBdUIsQ0FBQyxDQUFDLENBQUNELFVBQVVFLFlBQXBDO0FBQ0EsR0FwSzJCOztBQUFBLFNBcUs1QkMsT0FySzRCLEdBcUtwQixZQUFJO0FBQ1gsVUFBS2IsUUFBTCxDQUFjO0FBQ2JVLGVBQVUsQ0FBQyxPQUFLSSxLQUFMLENBQVdKLFNBQVgsQ0FBcUJFO0FBRG5CLElBQWQ7QUFHQSxHQXpLMkI7O0FBQUEsU0EwSzVCRyxXQTFLNEIsR0EwS2hCLFlBQUk7QUFDZixPQUFJZCxZQUFZLEVBQUUsT0FBS2EsS0FBTCxDQUFXYixTQUE3QjtBQUNBLFVBQUtELFFBQUwsQ0FBYztBQUNiQyxlQUFVQTtBQURHLElBQWQ7QUFHQSxHQS9LMkI7O0FBRzNCLFNBQUtlLFlBQUwsR0FBb0IsT0FBS0EsWUFBTCxDQUFrQkMsSUFBbEIsUUFBcEI7QUFDQSxTQUFLQyxhQUFMLEdBQXFCLE9BQUtBLGFBQUwsQ0FBbUJELElBQW5CLFFBQXJCO0FBQ0EsU0FBS0Usa0JBQUwsR0FBMEIsT0FBS0Esa0JBQUwsQ0FBd0JGLElBQXhCLFFBQTFCO0FBQ0EsU0FBS0csVUFBTCxHQUFrQixPQUFLQSxVQUFMLENBQWdCSCxJQUFoQixRQUFsQjtBQUNBLFNBQUtJLGFBQUwsR0FBcUIsT0FBS0EsYUFBTCxDQUFtQkosSUFBbkIsUUFBckI7QUFDQSxTQUFLSCxLQUFMLEdBQWE7QUFDWlEsY0FBVyxLQURDO0FBRVpDLFdBQVEsSUFGSTtBQUdaYixjQUFVLEVBQUNFLGNBQWEsS0FBZCxFQUhFO0FBSVpZLGtCQUFjLEtBSkY7QUFLWkMsUUFBSUMsT0FBT0MsUUFBUCxDQUFnQkMsSUFMUjtBQU1aQyxZQUFRLEVBTkk7QUFPWjVCLGNBQVU7QUFQRSxHQUFiO0FBU0EsU0FBSzZCLGNBQUwsR0FBc0IsQ0FDckIsRUFBQ0wsS0FBSSxXQUFMLEVBQWlCTSxNQUFLLEtBQXRCLEVBRHFCLENBQXRCO0FBR0E7O0FBcEIyQjtBQXNCM0I7Ozs7dUNBQ29CO0FBQ3BCLFFBQUtWLGFBQUw7QUFDRTs7OzRDQUN5QlcsSSxFQUFLbEIsSyxFQUFNO0FBQ3BDLFFBQUtPLGFBQUw7QUFDQTs7O2tDQUVZO0FBQ2QsT0FBSUksTUFBTUMsT0FBT0MsUUFBUCxDQUFnQkMsSUFBMUI7QUFDQUgsU0FBTUEsSUFBSVEsS0FBSixDQUFVLEdBQVYsRUFBZSxDQUFmLENBQU47QUFDQSxPQUFJekMsUUFBUSxJQUFaO0FBQ0EsT0FBSTBDLGFBQWEsS0FBakI7QUFDQSxRQUFLSixjQUFMLENBQW9CSyxHQUFwQixDQUF3QixVQUFDQyxJQUFELEVBQVE7QUFDL0IsUUFBR0EsS0FBS1gsR0FBTCxJQUFZQSxHQUFmLEVBQW1CO0FBQ2xCUyxrQkFBYSxJQUFiO0FBQ0E7QUFDRCxJQUpEO0FBS0EsT0FBR0EsVUFBSCxFQUFjO0FBQ2IxQyxVQUFNRCxhQUFOO0FBQ0FDLFVBQU1RLFFBQU4sQ0FBZTtBQUNkd0Isb0JBQWMsSUFEQTtBQUVkSyxjQUFRSixHQUZNO0FBR2RmLGdCQUFVLEVBQUNFLGNBQWEsS0FBZDtBQUhJLEtBQWY7QUFLQSxJQVBELE1BT0s7QUFDSnBCLFVBQU1RLFFBQU4sQ0FBZTtBQUNkd0Isb0JBQWMsS0FEQTtBQUVkZCxnQkFBVSxFQUFDRSxjQUFhLEtBQWQsRUFGSTtBQUdkaUIsY0FBUTtBQUhNLEtBQWY7QUFLQTtBQUNEO0FBQ0Q7Ozs7aUNBcUJlO0FBQUEsZ0JBTVYsS0FBS3hDLEtBTks7QUFBQSxPQUdia0IsT0FIYSxVQUdiQSxPQUhhO0FBQUEsT0FJYkMsV0FKYSxVQUliQSxXQUphO0FBQUEsT0FLYkMsSUFMYSxVQUtiQSxJQUxhOzs7QUFRZEYsV0FBUThCLGdCQUFSLENBQXlCLENBQUMsQ0FBQyxDQUFDN0IsWUFBWUksWUFBeEM7QUFFQTs7O2dDQUVhMEIsSyxFQUFPO0FBQ3BCQSxTQUFNQyxjQUFOOztBQURvQixpQkFNaEIsS0FBS2xELEtBTlc7QUFBQSxPQUluQmtCLE9BSm1CLFdBSW5CQSxPQUptQjtBQUFBLE9BS25CaUMsVUFMbUIsV0FLbkJBLFVBTG1COztBQU9wQmpDLFdBQVFrQyxlQUFSLENBQXdCO0FBQ3ZCN0Isa0JBQWMsQ0FBQyxDQUFDLENBQUM0QixXQUFXNUIsWUFETDtBQUV2QjhCLGVBQVdKLE1BQU1LO0FBRk0sSUFBeEI7QUFNQTs7O3VDQUVvQjtBQUFBLGlCQUtoQixLQUFLdEQsS0FMVztBQUFBLE9BR25Ca0IsT0FIbUIsV0FHbkJBLE9BSG1CO0FBQUEsT0FJbkJpQyxVQUptQixXQUluQkEsVUFKbUI7O0FBTXBCakMsV0FBUWtDLGVBQVIsQ0FBd0I7QUFDdkI3QixrQkFBYyxDQUFDLENBQUMsQ0FBQzRCLFdBQVc1QixZQURMO0FBRXZCOEIsZUFBV0osTUFBTUs7QUFGTSxJQUF4QjtBQUlBOzs7K0JBRVk7QUFDWmpCLFVBQU9DLFFBQVAsQ0FBZ0JpQixJQUFoQixHQUF1QixtQkFBdkI7QUFDQTs7O2tDQUVlUixJLEVBQU1TLEssRUFBTzs7QUFFNUIsT0FBRyxDQUFDVCxLQUFLVSxVQUFULEVBQW9CO0FBQ25CLFdBQU8sSUFBUDtBQUNBOztBQUVELE9BQUlDLFNBQVM7QUFDWkMsV0FBTyxTQURLO0FBRVpDLFdBQU8sTUFGSztBQUdaQyxZQUFRO0FBSEksSUFBYjs7QUFNQSxPQUFHLENBQUNkLElBQUosRUFBUztBQUNSO0FBQ0E7O0FBRUQsT0FBSUEsS0FBS2UsTUFBVCxFQUFpQjtBQUNoQkosV0FBT0MsS0FBUCxHQUFlLFNBQWY7QUFDQUQsV0FBT0ssVUFBUCxHQUFrQixLQUFsQjtBQUNBOztBQUdELE9BQUlDLFVBQVUsRUFBZDs7QUFFQSxPQUFJakIsS0FBS2tCLFNBQVQsRUFBb0I7QUFDbkJELGNBQVVqQixLQUFLa0IsU0FBZjtBQUNBLElBRkQsTUFFTztBQUNORCxjQUFVLFFBQVFqQixLQUFLbUIsTUFBdkI7QUFDQTs7QUFHRCxVQUNDLHdEQUFZLE9BQU9uQixLQUFLb0IsV0FBeEIsRUFBcUMsS0FBS1gsS0FBMUMsRUFBaUQsT0FBT0UsTUFBeEQsRUFBZ0UsTUFBTU0sT0FBdEUsRUFBK0UsWUFBWSxFQUFDSSxZQUFXLE1BQVosRUFBbUJDLFVBQVMsTUFBNUIsRUFBbUNOLFlBQVcsQ0FBOUMsRUFBM0YsR0FERDtBQUlBOzs7MkJBdUJRO0FBQUE7O0FBRVIsT0FBSUwsU0FBUztBQUNaWSxpQkFBYSxDQUREO0FBRVpDLGNBQVUsT0FGRTtBQUdaQyxTQUFLLENBSE87QUFJWkMsVUFBTSxDQUpNO0FBS1pDLFdBQU8sQ0FMSztBQU1aQyxxQkFBaUIsU0FOTDtBQU9aZCxZQUFRLE1BUEk7QUFRWmUsWUFBUTtBQVJJLElBQWI7O0FBV0EsT0FBSWhCLFFBQVEsR0FBWjs7QUFiUSxPQWdCUHJDLFlBaEJPLEdBaUJKLEtBQUt2QixLQUFMLENBQVdtQixXQWpCUCxDQWdCUEksWUFoQk87QUFBQSxnQkFtQmdDLEtBQUtFLEtBbkJyQztBQUFBLE9BbUJIVSxhQW5CRyxVQW1CSEEsYUFuQkc7QUFBQSxPQW1CV0ssT0FuQlgsVUFtQldBLE9BbkJYO0FBQUEsT0FtQm1CNUIsU0FuQm5CLFVBbUJtQkEsU0FuQm5COztBQW9CUixPQUFJaUUsZUFBZTFDLGdCQUFjLGNBQWQsR0FBNkIsTUFBaEQ7QUFDQSxPQUFNMkMsWUFBWSxTQUFaQSxTQUFZLENBQUM5RSxLQUFELEVBQVc7O0FBRTVCLFFBQUkrRSxnQkFBZ0IsRUFBcEI7QUFDQSxRQUFJQyxtQkFBbUIsT0FBS2hGLEtBQUwsQ0FBV21CLFdBQVgsQ0FBdUJJLFlBQTlDO0FBQ0EsUUFBSXlELGdCQUFKLEVBQXNCO0FBQ3JCRCxxQkFBZ0IsV0FBaEI7QUFDQSxLQUZELE1BRU87QUFDTkEscUJBQWdCLFVBQWhCO0FBRUE7QUFDRCxXQUFTLG9EQUFTLE9BQ2hCckIsTUFETztBQUdSLCtCQUNDLE9BQUsvQixZQUpFO0FBTVIsb0JBQ0M7QUFDQ3NELGlCQUFXO0FBRFosTUFQTzs7QUFZUixzQkFFQztBQUFBO0FBQUEsUUFBSyxXQUFVLFdBQWY7QUFDRSw4REFBWSxZQUFZLE9BQUt0RCxZQUE3QixFQUEyQyxNQUFNLHNEQUFVLFdBQVdvRCxhQUFyQixHQUFqRCxFQUF5RixPQUFPLEVBQUNwQixPQUFNLE1BQVAsRUFBY0UsUUFBTyxFQUFyQixFQUF3QkQsT0FBTSxHQUE5QixFQUFoRyxHQURGO0FBRUUsOERBQVksWUFBWSxPQUFLN0IsVUFBN0IsRUFBMEMsTUFBTSxzREFBVSxXQUFVLFVBQXBCLEdBQWhELEVBQW1GLE9BQU8sRUFBQzhCLFFBQU8sTUFBUixFQUExRixHQUZGO0FBR0UsYUFBSzdELEtBQUwsQ0FBV2tGLFVBQVgsQ0FBc0JwQyxHQUF0QixDQUEwQixVQUFDQyxJQUFELEVBQU1TLEtBQU47QUFBQSxjQUFjLE9BQUsyQixlQUFMLENBQXFCcEMsSUFBckIsRUFBMEJTLEtBQTFCLENBQWQ7QUFBQSxPQUExQjtBQUhGLE1BZE87O0FBcUJSLHVCQUNDO0FBQUE7QUFBQSxRQUFLLE9BQU8sRUFBQzRCLFVBQVMsRUFBVixFQUFhQyxXQUFVLE9BQXZCLEVBQVo7QUFDQTtBQUFBO0FBQUEsU0FBSyxPQUFPLEVBQUNDLFNBQVFULFlBQVQsRUFBc0JOLFVBQVMsVUFBL0IsRUFBMENnQixhQUFZLEVBQXRELEVBQXlEQyxRQUFRLFNBQWpFLEVBQVosRUFBeUYsU0FBUyxPQUFLdkUsUUFBdkc7QUFDQywrQ0FBTSxXQUFVLDRCQUFoQixHQUREO0FBRUM7QUFBQTtBQUFBLFVBQU0sV0FBVSxrQkFBaEIsRUFBbUMsT0FBTyxFQUFDd0UsWUFBVzdFLFlBQVUsQ0FBVixHQUFZLFNBQVosR0FBc0IsUUFBbEMsRUFBMUM7QUFBd0ZBO0FBQXhGO0FBRkQsT0FEQTtBQUtBO0FBQUE7QUFBQTtBQUNBLG1CQUFXLEVBQUM4RSxNQUFLLFNBQU4sRUFEWDtBQUVBLDJCQUNDO0FBQUE7QUFBQTtBQUFhLDZEQUFjLE9BQU0sTUFBcEI7QUFBYixTQUhEO0FBS0Esc0JBQ0M7QUFDQ0MscUJBQVksT0FEYjtBQUVDQyxtQkFBVTtBQUZYLFNBTkQ7QUFXQSxzQkFDQztBQUNDRCxxQkFBWSxPQURiO0FBRUNDLG1CQUFVO0FBRlgsU0FaRDtBQWlCQyxjQUFLNUYsS0FBTCxDQUFXNkYsSUFBWCxDQUFnQkMsSUFBaEIsSUFBeUIsc0RBQVUsYUFBYSxPQUFLOUYsS0FBTCxDQUFXNkYsSUFBWCxDQUFnQkMsSUFBdkMsRUFBNkMsWUFBWSxvQkFBQzdDLEtBQUQsRUFBUztBQUMzRlosZ0JBQU9DLFFBQVAsQ0FBZ0JDLElBQWhCLEdBQXVCLDJCQUF2QjtBQUNELFNBRjBCLEdBakIxQjtBQXFCQyw2REFBVyxhQUFjLGNBQXpCO0FBQ0Qsb0JBQ0Msb0JBQUNVLEtBQUQsRUFBVztBQUNWWixnQkFBT0MsUUFBUCxDQUFnQmlCLElBQWhCLEdBQXVCLGdCQUF2QjtBQUNBO0FBSkQ7QUFyQkQ7QUFMQTtBQXRCTyxNQUFUO0FBMkRBLElBckVEOztBQXVFQSxVQUVDO0FBQUE7QUFBQSxNQUFLLFdBQVUsVUFBZjtBQUNFLFNBQUt2RCxLQUFMLENBQVcrRixVQUFYLENBQXNCeEUsWUFBdEIsSUFBc0MsOEJBQUMsU0FBRCxPQUR4QztBQUVDO0FBQUE7QUFBQSxPQUFRLE1BQU0sS0FBS3ZCLEtBQUwsQ0FBV21CLFdBQVgsQ0FBdUJJLFlBQXJDLEVBQW1ELE9BQU8sR0FBMUQsRUFBK0QsZ0JBQWdCLEVBQUMwRCxXQUFVLEVBQVgsRUFBY2UsV0FBVSw4REFBeEIsRUFBdUZwQixRQUFPLEVBQTlGLEVBQWlHcUIsWUFBVyxTQUE1RyxFQUEvRTtBQUNDLDJEQUFZLE9BQU8sS0FBS2pHLEtBQUwsQ0FBV2tHLGtCQUE5QixFQUFrRCxnQkFBZ0IsS0FBS2xHLEtBQUwsQ0FBV21HLGNBQTdFLEVBQTZGLGdCQUFnQixLQUFLbkcsS0FBTCxDQUFXb0csY0FBeEgsRUFBd0ksZUFBZSxLQUFLcEcsS0FBTCxDQUFXcUcsYUFBbEs7QUFERCxLQUZEO0FBS0M7QUFBQTtBQUFBLE9BQVEsTUFBTSxLQUFLckcsS0FBTCxDQUFXcUIsU0FBWCxDQUFxQkUsWUFBbkMsRUFBaUQsT0FBT3FDLEtBQXhELEVBQStELGVBQWUsSUFBOUUsRUFBb0YsZ0JBQWdCLEVBQUNxQixXQUFVLEVBQVgsRUFBY2UsV0FBVSw4REFBeEIsRUFBdUZwQixRQUFPLEVBQTlGLEVBQXBHO0FBQ0MseURBQVUsU0FBUyxLQUFLcEQsT0FBeEIsRUFBaUMsU0FBU2dCLE9BQTFDLEVBQW1ELGFBQWEsS0FBS2QsV0FBckU7QUFERDtBQUxELElBRkQ7QUFZQTs7Ozs7O0FBaFNJM0IsTSxDQUdFdUcsWSxHQUFlO0FBQ3JCcEMsU0FBUSxpQkFBVXFDLE1BQVYsQ0FBaUJDO0FBREosQzs7O0FBbVN2QixTQUFTQyxlQUFULENBQXlCaEYsS0FBekIsRUFBZ0M7O0FBRS9CLFFBQU87QUFDTnNFLGNBQVl0RSxNQUFNc0UsVUFEWjtBQUVONUUsZUFBYU0sTUFBTU4sV0FGYjtBQUdORSxhQUFVSSxNQUFNSixTQUhWO0FBSU42RCxjQUFZekQsTUFBTWlGLElBQU4sQ0FBV0MsS0FKakI7QUFLTlQsc0JBQW9CekUsTUFBTWlGLElBQU4sQ0FBV0UsYUFMekI7QUFNTnpELGNBQVkxQixNQUFNMEIsVUFOWjtBQU9OZ0Qsa0JBQWdCMUUsTUFBTWlGLElBQU4sQ0FBV1AsY0FQckI7QUFRTkMsa0JBQWdCM0UsTUFBTWlGLElBQU4sQ0FBV04sY0FSckI7QUFTTkMsaUJBQWU1RSxNQUFNaUYsSUFBTixDQUFXTCxhQVRwQjtBQVVOUixRQUFNcEUsTUFBTW9FO0FBVk4sRUFBUDtBQVlBOztBQUVELFNBQVNnQixrQkFBVCxDQUE0QnpHLFFBQTVCLEVBQXNDO0FBQ3JDLFFBQU87QUFDTmMsV0FBUywrQkFBbUIsNEJBQWMsRUFBZCxFQUFrQnBCLGNBQWxCLENBQW5CLEVBQXNETSxRQUF0RDtBQURILEVBQVA7QUFHQTs7ZUFFYyx5QkFBUXFHLGVBQVIsRUFBeUJJLGtCQUF6QixFQUE2QzlHLE1BQTdDLEM7Ozs7Ozs7Ozs7K0JBNVRUQSxNOzsrQkFzU0cwRyxlOzsrQkFnQkFJLGtCIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy90bWFjX3pjL0NvZGUva3ItYWRtaW4iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50LCBQcm9wVHlwZXMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBiaW5kQWN0aW9uQ3JlYXRvcnMgfSBmcm9tICdyZWR1eCc7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgeyBBY3Rpb25zLCBTdG9yZSB9IGZyb20gJ2tyL1JlZHV4JztcbmltcG9ydCAqIGFzIGFjdGlvbkNyZWF0b3JzIGZyb20gJy4uLy4uLy4uL1JlZHV4L0FjdGlvbnMnO1xuXG5pbXBvcnQgeyBBcHBCYXIsIE1lbnUsIE1lbnVJdGVtLEljb25NZW51LCBJY29uQnV0dG9uLCBEcmF3ZXIsIERpdmlkZXIsIEZvbnRJY29uLCBGbGF0QnV0dG9uLCBMaXN0LCBMaXN0SXRlbSwgRmlsZUZvbGRlciwgQXZhdGFyLCBGbG9hdGluZ0FjdGlvbkJ1dHRvbiB9IGZyb20gJ21hdGVyaWFsLXVpJztcblxuXG5cbmltcG9ydCBNb3JlVmVydEljb24gZnJvbSAnbWF0ZXJpYWwtdWkvc3ZnLWljb25zL25hdmlnYXRpb24vbW9yZS12ZXJ0JztcblxuaW1wb3J0ICcuL2luZGV4Lmxlc3MnO1xuXG5cbmltcG9ydCBTaWRlYmFyTmF2IGZyb20gJy4uL1NpZGViYXJOYXYnO1xuaW1wb3J0IEluZm9MaXN0IGZyb20gJy4uL0luZm9MaXN0JztcblxuXG5jbGFzcyBIZWFkZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuXG5cblx0c3RhdGljIGNvbnRleHRUeXBlcyA9IHtcblx0XHRyb3V0ZXI6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcblx0fTtcblxuXHRjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xuXHRcdHN1cGVyKHByb3BzLCBjb250ZXh0KTtcblxuXHRcdHRoaXMuaGFuZGxlVG9nZ2xlID0gdGhpcy5oYW5kbGVUb2dnbGUuYmluZCh0aGlzKTtcblx0XHR0aGlzLnNob3dCb3R0b21OYXYgPSB0aGlzLnNob3dCb3R0b21OYXYuYmluZCh0aGlzKTtcblx0XHR0aGlzLmhhbmRsZVJlcXVlc3RDbG9zZSA9IHRoaXMuaGFuZGxlUmVxdWVzdENsb3NlLmJpbmQodGhpcyk7XG5cdFx0dGhpcy50b3VjaFRpdGxlID0gdGhpcy50b3VjaFRpdGxlLmJpbmQodGhpcyk7XG5cdFx0dGhpcy5pbmZvclNob3dMaXN0ID0gdGhpcy5pbmZvclNob3dMaXN0LmJpbmQodGhpcyk7XG5cdFx0dGhpcy5zdGF0ZSA9IHtcblx0XHRcdGJvdHRvbU5hdjogZmFsc2UsXG5cdFx0XHR0b2dnbGU6IHRydWUsXG5cdFx0XHRyaWdodF9iYXI6e3N3aXRjaF92YWx1ZTpmYWxzZX0sXG5cdFx0XHRpbmZvckxvZ29TaG93OmZhbHNlLFxuXHRcdFx0dXJsOndpbmRvdy5sb2NhdGlvbi5oYXNoLFxuXHRcdFx0aW5mb1RhYjonJyxcblx0XHRcdGhhc1VuUmVhZDowXG5cdFx0fVxuXHRcdHRoaXMuaGFzSW5mb0xpc3RUYWIgPSBbXG5cdFx0XHR7dXJsOidjb21tdW5pdHknLGNvZGU6JzExMSd9XG5cdFx0XVxuXHRcdC8vIHRoaXMuaW5mb3JTaG93TGlzdCgpO1xuXG5cdH1cblx0Y29tcG9uZW50V2lsbE1vdW50KCkge1xuXHRcdHRoaXMuaW5mb3JTaG93TGlzdCgpO1xuICBcdH1cbiAgXHRjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHQsc3RhdGUpe1xuICBcdFx0dGhpcy5pbmZvclNob3dMaXN0KCk7XG4gIFx0fVxuXG5cdGluZm9yU2hvd0xpc3QoKXtcblx0XHRsZXQgdXJsID0gd2luZG93LmxvY2F0aW9uLmhhc2g7XG5cdFx0dXJsID0gdXJsLnNwbGl0KCcvJylbMV07XG5cdFx0bGV0IF90aGlzID0gdGhpcztcblx0XHRsZXQgY3VycmVudFRhYiA9IGZhbHNlO1xuXHRcdHRoaXMuaGFzSW5mb0xpc3RUYWIubWFwKChpdGVtKT0+e1xuXHRcdFx0aWYoaXRlbS51cmwgPT0gdXJsKXtcblx0XHRcdFx0Y3VycmVudFRhYiA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fSlcblx0XHRpZihjdXJyZW50VGFiKXtcblx0XHRcdF90aGlzLmdldFVuUmVhZEluZm8oKTtcblx0XHRcdF90aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0aW5mb3JMb2dvU2hvdzp0cnVlLFxuXHRcdFx0XHRpbmZvVGFiOnVybCxcblx0XHRcdFx0cmlnaHRfYmFyOntzd2l0Y2hfdmFsdWU6ZmFsc2V9XG5cdFx0XHR9KVxuXHRcdH1lbHNle1xuXHRcdFx0X3RoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRpbmZvckxvZ29TaG93OmZhbHNlLFxuXHRcdFx0XHRyaWdodF9iYXI6e3N3aXRjaF92YWx1ZTpmYWxzZX0sXG5cdFx0XHRcdGluZm9UYWI6J2xvY2FsJyxcblx0XHRcdH0pXG5cdFx0fVxuXHR9XG5cdC8v6I635Y+W5pyq6K+75raI5oGv5pWwXG5cdGdldFVuUmVhZEluZm89KCk9Pntcblx0XHRsZXQgX3RoaXMgPSB0aGlzO1xuXHRcdFN0b3JlLmRpc3BhdGNoKEFjdGlvbnMuY2FsbEFQSSgnZ2V0VW5SZWFkSW5mbycsIHtcbiAgICAgICAgICAgIHN0YXJ0VGltZTogJycsZW5kVGltZTonJ1xuICAgICAgICB9KSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYocmVzcG9uc2UubXNnQ291bnQpe1xuICAgICAgICAgICAgXHRfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBcdFx0aGFzVW5SZWFkOnJlc3BvbnNlLm1zZ0NvdW50XG4gICAgICAgICAgICBcdH0pXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIFx0X3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgXHRcdGhhc1VuUmVhZDowXG4gICAgICAgICAgICBcdH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG5cdH1cblxuXG5cdGhhbmRsZVRvZ2dsZSgpIHtcblxuXHRcdHZhciB7XG5cdFx0XHRhY3Rpb25zLFxuXHRcdFx0c2lkZWJhcl9uYXYsXG5cdFx0XHRmbGFnXG5cdFx0fSA9IHRoaXMucHJvcHM7XG5cblx0XHRhY3Rpb25zLnN3aXRjaFNpZGViYXJOYXYoISEhc2lkZWJhcl9uYXYuc3dpdGNoX3ZhbHVlKTtcblxuXHR9XG5cblx0c2hvd0JvdHRvbU5hdihldmVudCkge1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIge1xuXHRcdFx0YWN0aW9ucyxcblx0XHRcdGJvdHRvbV9uYXZcblx0XHR9ID0gdGhpcy5wcm9wcztcblx0XHRhY3Rpb25zLnN3aXRjaEJvdHRvbU5hdih7XG5cdFx0XHRzd2l0Y2hfdmFsdWU6ICEhIWJvdHRvbV9uYXYuc3dpdGNoX3ZhbHVlLFxuXHRcdFx0YW5jaG9yX2VsOiBldmVudC5jdXJyZW50VGFyZ2V0XG5cdFx0fSk7XG5cblxuXHR9XG5cblx0aGFuZGxlUmVxdWVzdENsb3NlKCkge1xuXG5cdFx0dmFyIHtcblx0XHRcdGFjdGlvbnMsXG5cdFx0XHRib3R0b21fbmF2XG5cdFx0fSA9IHRoaXMucHJvcHM7XG5cdFx0YWN0aW9ucy5zd2l0Y2hCb3R0b21OYXYoe1xuXHRcdFx0c3dpdGNoX3ZhbHVlOiAhISFib3R0b21fbmF2LnN3aXRjaF92YWx1ZSxcblx0XHRcdGFuY2hvcl9lbDogZXZlbnQuY3VycmVudFRhcmdldFxuXHRcdH0pO1xuXHR9O1xuXG5cdHRvdWNoVGl0bGUoKSB7XG5cdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cDovL2tyc3BhY2UuY24nO1xuXHR9XG5cblx0cmVuZGVySGVhZGVyTmF2KGl0ZW0sIGluZGV4KSB7XG5cblx0XHRpZighaXRlbS5wZXJtaXNzaW9uKXtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRcblx0XHRsZXQgc3R5bGVzID0ge1xuXHRcdFx0Y29sb3I6ICcjNjY2NjY2Jyxcblx0XHRcdHdpZHRoOiAnYXV0bycsXG5cdFx0XHRoZWlnaHQ6IDYwLFxuXHRcdH1cblxuXHRcdGlmKCFpdGVtKXtcblx0XHRcdHJldHVybiA7XG5cdFx0fVxuXG5cdFx0aWYgKGl0ZW0uYWN0aXZlKSB7XG5cdFx0XHRzdHlsZXMuY29sb3IgPSAnIzM5NDQ1Nyc7XG5cdFx0XHRzdHlsZXMuZm9udFdlaWdodD0nNjAwJztcblx0XHR9XG5cblxuXHRcdGxldCBqdW1wVXJsID0gJyc7XG5cblx0XHRpZiAoaXRlbS5vcmlnaW5VcmwpIHtcblx0XHRcdGp1bXBVcmwgPSBpdGVtLm9yaWdpblVybDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anVtcFVybCA9ICcuLyMnICsgaXRlbS5yb3V0ZXI7XG5cdFx0fVxuXG5cblx0XHRyZXR1cm4gKFxuXHRcdFx0PEZsYXRCdXR0b24gbGFiZWw9e2l0ZW0ucHJpbWFyeVRleHR9IGtleT17aW5kZXh9IHN0eWxlPXtzdHlsZXN9IGhyZWY9e2p1bXBVcmx9IGxhYmVsU3R5bGU9e3tsaW5lSGVpZ2h0Oic2MHB4Jyxmb250U2l6ZTpcIjE2cHhcIixmb250V2VpZ2h0OjB9fSAvPlxuXHRcdCk7XG5cblx0fVxuXG5cdHNob3dJbmZvPSgpPT57XG5cdFx0dmFyIHtcblx0XHRcdGFjdGlvbnMsXG5cdFx0XHRzaWRlYmFyX25hdixcblx0XHRcdGZsYWcsXG5cdFx0XHRyaWdodF9iYXJcblx0XHR9ID0gdGhpcy5wcm9wcztcblx0XHRhY3Rpb25zLnN3aXRjaFJpZ2h0QmFyKCEhIXJpZ2h0X2Jhci5zd2l0Y2hfdmFsdWUpO1xuXHR9XG5cdG9uQ2xvc2U9KCk9Pntcblx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdHJpZ2h0X2JhcjohdGhpcy5zdGF0ZS5yaWdodF9iYXIuc3dpdGNoX3ZhbHVlXG5cdFx0fSlcblx0fVxuXHRjaGFuZ2VDb3VudD0oKT0+e1xuXHRcdGxldCBoYXNVblJlYWQgPSAtLXRoaXMuc3RhdGUuaGFzVW5SZWFkO1xuXHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0aGFzVW5SZWFkOmhhc1VuUmVhZFxuXHRcdH0pXG5cdH1cblxuXHRyZW5kZXIoKSB7XG5cblx0XHR2YXIgc3R5bGVzID0ge1xuXHRcdFx0cGFkZGluZ0xlZnQ6IDAsXG5cdFx0XHRwb3NpdGlvbjogJ2ZpeGVkJyxcblx0XHRcdHRvcDogMCxcblx0XHRcdGxlZnQ6IDAsXG5cdFx0XHRyaWdodDogMCxcblx0XHRcdGJhY2tncm91bmRDb2xvcjogJyNGRkZGRkYnLFxuXHRcdFx0aGVpZ2h0OiBcIjYwcHhcIixcblx0XHRcdHpJbmRleDogMTBcblx0XHR9O1xuXG5cdFx0bGV0IHdpZHRoID0gNTcwO1xuXG5cdFx0dmFyIHtcblx0XHRcdHN3aXRjaF92YWx1ZVxuXHRcdH0gPSB0aGlzLnByb3BzLnNpZGViYXJfbmF2O1xuXG5cdFx0bGV0IHtpbmZvckxvZ29TaG93LGluZm9UYWIsaGFzVW5SZWFkfSA9IHRoaXMuc3RhdGU7XG5cdFx0bGV0IHNob3dJbmZvTG9nbyA9IGluZm9yTG9nb1Nob3c/J2lubGluZS1ibG9jayc6J25vbmUnO1xuXHRcdGNvbnN0IEhlYWRlckJhciA9IChwcm9wcykgPT4ge1xuXG5cdFx0XHR2YXIgaWNvbkNsYXNzTmFtZSA9ICcnO1xuXHRcdFx0bGV0IHNpZGViYXJOYXZTd2l0Y2ggPSB0aGlzLnByb3BzLnNpZGViYXJfbmF2LnN3aXRjaF92YWx1ZTtcblx0XHRcdGlmIChzaWRlYmFyTmF2U3dpdGNoKSB7XG5cdFx0XHRcdGljb25DbGFzc05hbWUgPSBcImhpZGUtaGVuZ1wiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWNvbkNsYXNzTmFtZSA9IFwiaGlkZS1zaHVcIjtcblxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuICggPCBBcHBCYXIgc3R5bGUgPSB7XG5cdFx0XHRcdFx0c3R5bGVzXG5cdFx0XHRcdH1cblx0XHRcdFx0b25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwID0ge1xuXHRcdFx0XHRcdHRoaXMuaGFuZGxlVG9nZ2xlXG5cdFx0XHRcdH1cblx0XHRcdFx0aWNvblN0eWxlTGVmdCA9IHtcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRtYXJnaW5Ub3A6IDBcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpY29uRWxlbWVudExlZnQgPSB7XG5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cIm1haW4tbmF2c1wiID5cblx0XHRcdFx0XHRcdCA8RmxhdEJ1dHRvbiBvblRvdWNoVGFwPXt0aGlzLmhhbmRsZVRvZ2dsZX0gaWNvbj17PEZvbnRJY29uIGNsYXNzTmFtZT17aWNvbkNsYXNzTmFtZX0gLz59IHN0eWxlPXt7Y29sb3I6JyNmZmYnLGhlaWdodDo2MCx3aWR0aDoyMDB9fSAvPlxuXHRcdFx0XHRcdFx0IDxGbGF0QnV0dG9uIG9uVG91Y2hUYXA9e3RoaXMudG91Y2hUaXRsZX0gIGljb249ezxGb250SWNvbiBjbGFzc05hbWU9XCJuZXctbG9nb1wiLz4gfSBzdHlsZT17e2hlaWdodDpcIjYwcHhcIn19Lz5cblx0XHRcdFx0XHRcdHt0aGlzLnByb3BzLm5hdnNfaXRlbXMubWFwKChpdGVtLGluZGV4KT0+dGhpcy5yZW5kZXJIZWFkZXJOYXYoaXRlbSxpbmRleCkpfVxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWNvbkVsZW1lbnRSaWdodCA9IHtcblx0XHRcdFx0XHQ8ZGl2IHN0eWxlPXt7bWluV2lkdGg6NzAsdGV4dEFsaWduOidyaWdodCd9fT5cblx0XHRcdFx0XHQ8ZGl2IHN0eWxlPXt7ZGlzcGxheTpzaG93SW5mb0xvZ28scG9zaXRpb246J3JlbGF0aXZlJyxtYXJnaW5SaWdodDoxMCxjdXJzb3I6ICdwb2ludGVyJ319IG9uQ2xpY2s9e3RoaXMuc2hvd0luZm99PlxuXHRcdFx0XHRcdFx0PHNwYW4gY2xhc3NOYW1lPVwiaWNvbi1pbmZvIGluZm9ybWF0aW9uLWxvZ29cIiAgPjwvc3Bhbj5cblx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzTmFtZT1cInVpLXVuLXJlYWQtY291bnRcIiBzdHlsZT17e3Zpc2liaWxpdHk6aGFzVW5SZWFkPjA/J3Zpc2libGUnOidoaWRkZW4nfX0+e2hhc1VuUmVhZH08L3NwYW4+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PCBJY29uTWVudVxuXHRcdFx0XHRcdGljb25TdHlsZT17e2ZpbGw6JyMzOTQ0NTcnfX1cblx0XHRcdFx0XHRpY29uQnV0dG9uRWxlbWVudCA9IHtcblx0XHRcdFx0XHRcdDxJY29uQnV0dG9uID48TW9yZVZlcnRJY29uIGNvbG9yPVwiI2ZmZlwiLz48L0ljb25CdXR0b24+XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRhcmdldE9yaWdpbiA9IHtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0aG9yaXpvbnRhbDogJ3JpZ2h0Jyxcblx0XHRcdFx0XHRcdFx0dmVydGljYWw6ICd0b3AnXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGFuY2hvck9yaWdpbiA9IHtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0aG9yaXpvbnRhbDogJ3JpZ2h0Jyxcblx0XHRcdFx0XHRcdFx0dmVydGljYWw6ICd0b3AnXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSA+XG5cdFx0XHRcdFx0e3RoaXMucHJvcHMudXNlci5uaWNrICYmIFx0PE1lbnVJdGVtIHByaW1hcnlUZXh0PXt0aGlzLnByb3BzLnVzZXIubmlja30gb25Ub3VjaFRhcD17KGV2ZW50KT0+e1xuXHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSAncGVybWlzc2lvbi9wZXJzb25hbENlbnRlcic7XG5cdFx0XHRcdH19IC8+fVxuXG5cdFx0XHRcdFx0IDwgTWVudUl0ZW0gcHJpbWFyeVRleHQgPSBcIumAgOWHulwiXG5cdFx0XHRcdFx0b25Ub3VjaFRhcCA9IHtcblx0XHRcdFx0XHRcdChldmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvbG9nb3V0L2xvZ291dCc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8+XG5cdFx0XHRcdFx0PCAvSWNvbk1lbnUgPjwvZGl2PlxuXHRcdFx0XHR9XG5cdFx0XHRcdC8+XG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHJldHVybiAoXG5cblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwibm8tcHJpbnRcIj5cblx0XHRcdFx0e3RoaXMucHJvcHMuaGVhZGVyX25hdi5zd2l0Y2hfdmFsdWUgJiYgPEhlYWRlckJhci8+fVxuXHRcdFx0XHQ8RHJhd2VyIG9wZW49e3RoaXMucHJvcHMuc2lkZWJhcl9uYXYuc3dpdGNoX3ZhbHVlfSB3aWR0aD17MTgwfSBjb250YWluZXJTdHlsZT17e21hcmdpblRvcDo2MCxib3hTaGFkb3c6JzAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMTYpLCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjIzKScsekluZGV4OjEwLGJhY2tncm91bmQ6JyMzOTQ0NTcnfX0+XG5cdFx0XHRcdFx0PFNpZGViYXJOYXYgaXRlbXM9e3RoaXMucHJvcHMubmF2c19jdXJyZW50X2l0ZW1zfSBjdXJyZW50X3JvdXRlcj17dGhpcy5wcm9wcy5jdXJyZW50X3JvdXRlcn0gY3VycmVudF9wYXJlbnQ9e3RoaXMucHJvcHMuY3VycmVudF9wYXJlbnR9IGN1cnJlbnRfY2hpbGQ9e3RoaXMucHJvcHMuY3VycmVudF9jaGlsZH0vPlxuXHRcdFx0XHQ8L0RyYXdlcj5cblx0XHRcdFx0PERyYXdlciBvcGVuPXt0aGlzLnByb3BzLnJpZ2h0X2Jhci5zd2l0Y2hfdmFsdWV9IHdpZHRoPXt3aWR0aH0gb3BlblNlY29uZGFyeT17dHJ1ZX0gY29udGFpbmVyU3R5bGU9e3ttYXJnaW5Ub3A6NjAsYm94U2hhZG93OicwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjE2KSwgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4yMyknLHpJbmRleDoxMH19PlxuXHRcdFx0XHRcdDxJbmZvTGlzdCBvbkNsb3NlPXt0aGlzLm9uQ2xvc2V9IGluZm9UYWI9e2luZm9UYWJ9IGNoYW5nZUNvdW50PXt0aGlzLmNoYW5nZUNvdW50fS8+XG5cdFx0XHRcdDwvRHJhd2VyPlxuXHRcdFx0PC9kaXY+XG5cdFx0KTtcblx0fVxuXG59XG5cblxuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHtcblxuXHRyZXR1cm4ge1xuXHRcdGhlYWRlcl9uYXY6IHN0YXRlLmhlYWRlcl9uYXYsXG5cdFx0c2lkZWJhcl9uYXY6IHN0YXRlLnNpZGViYXJfbmF2LFxuXHRcdHJpZ2h0X2JhcjpzdGF0ZS5yaWdodF9iYXIsXG5cdFx0bmF2c19pdGVtczogc3RhdGUubmF2cy5pdGVtcyxcblx0XHRuYXZzX2N1cnJlbnRfaXRlbXM6IHN0YXRlLm5hdnMuY3VycmVudF9pdGVtcyxcblx0XHRib3R0b21fbmF2OiBzdGF0ZS5ib3R0b21fbmF2LFxuXHRcdGN1cnJlbnRfcm91dGVyOiBzdGF0ZS5uYXZzLmN1cnJlbnRfcm91dGVyLFxuXHRcdGN1cnJlbnRfcGFyZW50OiBzdGF0ZS5uYXZzLmN1cnJlbnRfcGFyZW50LFxuXHRcdGN1cnJlbnRfY2hpbGQ6IHN0YXRlLm5hdnMuY3VycmVudF9jaGlsZCxcblx0XHR1c2VyOiBzdGF0ZS51c2VyXG5cdH07XG59XG5cbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkge1xuXHRyZXR1cm4ge1xuXHRcdGFjdGlvbnM6IGJpbmRBY3Rpb25DcmVhdG9ycyhPYmplY3QuYXNzaWduKHt9LCBhY3Rpb25DcmVhdG9ycyksIGRpc3BhdGNoKVxuXHR9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShIZWFkZXIpO1xuIl19