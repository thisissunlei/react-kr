{"version":3,"sources":["src/Containers/Operation/CustomerManage/AgreementList/Reduce/Edit/AllStation.js"],"names":["SelectStationForm","props","context","onSubmit","bind","onCancel","onSelect","getLoadData","onChangeRentBeginDate","state","stationVos","selected","value","leaseEnddate","changeValues","endDate","rentBeginDate","Date","parse","show","message","type","length","concat","isOK","map","item","index","stationStartDate","leaseBeginDate","indexOf","setState","_this","params","dispatch","callAPI","mainBillid","orderId","page","pagesize","contractId","id","then","response","items","lastEditDate","catch","err","selectedStationVos","filter","someStartDate","forEach","some","sort","pre","next","preDate","leaseEndDate","nextDate","resultStationVos","obj","stationId","stationName","unitprice","stationType","stationBeginDate","stationEndDate","push","console","log","error","handleSubmit","pristine","reset","submitting","overfolw","maxHeight","height","marginTop","paddingBottom","PropTypes","searchParams","object","func","contextTypes","isRequired","form","enableReinitialize","keepDirtyOnReinitialize"],"mappings":"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","file":"AllStation.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import React, {\n\tComponent,\n\tPropTypes\n} from 'react';\nimport {\n\tconnect\n} from 'kr/Redux';\nimport {\n\tBinder\n} from 'react-binding';\nimport dateFormat from 'dateformat';\nimport {\n\treduxForm,\n\tformValueSelector,\n\tchange,\n\tinitialize,\n\tarrayPush,\n\tarrayInsert,\n\tFieldArray\n} from 'redux-form';\n\nimport {\n\tActions,\n\tStore\n} from 'kr/Redux';\n\nimport {\n\tForm,\n\tTable,\n\tTableBody,\n\tTableHeader,\n\tTableHeaderColumn,\n\tTableRow,\n\tTableRowColumn,\n\tTableFooter,\n\tKrField,\n\tGrid,\n\tRow,\n\tCol,\n\tButton,\n\tNotify,\n\tKrDate,\n} from 'kr-ui';\n\nclass SelectStationForm extends Component {\n\n\tstatic PropTypes = {\n\t\tsearchParams: React.PropTypes.object,\n\t\tonSubmit: React.PropTypes.func,\n\t\tonCancel: React.PropTypes.func,\n\t}\n\tstatic contextTypes = {\n\t\tparams: React.PropTypes.object.isRequired\n\t}\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\n\n\t\tthis.onSubmit = this.onSubmit.bind(this);\n\t\tthis.onCancel = this.onCancel.bind(this);\n\t\tthis.onSelect = this.onSelect.bind(this);\n\t\tthis.getLoadData = this.getLoadData.bind(this);\n\t\tthis.onChangeRentBeginDate = this.onChangeRentBeginDate.bind(this);\n\n\t\tthis.state = {\n\t\t\tstationVos: [],\n\t\t\tselected: [],\n\t\t}\n\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getLoadData();\n\t}\n\n\n\tonChangeRentBeginDate(value) {\n\t\tvalue = dateFormat(value, 'yyyy-mm-dd') + ' 00:00:00';\n\t\tlet {\n\t\t\tstationVos,\n\t\t\tselected\n\t\t} = this.state;\n\n\n\t\tlet {\n\t\t\tleaseEnddate\n\t\t} = this.props.changeValues;\n\t\t//判断选择的时间是否大于租赁起始时间\n\t\tlet endDate = leaseEnddate;\n\t\tlet rentBeginDate = Date.parse(dateFormat(value, 'yyyy-mm-dd') + ' 00:00:00');\n\n\t\tif (endDate < rentBeginDate) {\n\t\t\tNotify.show([{\n\t\t\t\tmessage: '选择的减租开始时间不能大于租赁期限的终止时间',\n\t\t\t\ttype: 'danger',\n\t\t\t}]);\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!selected.length) {\n\t\t\tNotify.show([{\n\t\t\t\tmessage: '未选择减租工位',\n\t\t\t\ttype: 'danger',\n\t\t\t}]);\n\t\t\treturn;\n\t\t}\n\t\tstationVos = [].concat(stationVos);\n\t\t//比较减租开始日期不能小于工位起始日期\n\t\tlet isOK = true;\n\t\tstationVos.map(function(item, index) {\n\t\t\tlet stationStartDate = Date.parse(dateFormat(item.leaseBeginDate, 'yyyy-mm-dd'));\n\t\t\tif (rentBeginDate < stationStartDate) {\n\t\t\t\tisOK = false;\n\t\t\t}\n\t\t});\n\n\t\tif (!isOK) {\n\t\t\tNotify.show([{\n\t\t\t\tmessage: '减租开始日期不能小于工位开始的时间',\n\t\t\t\ttype: 'danger',\n\t\t\t}]);\n\t\t\treturn;\n\t\t}\n\n\t\tstationVos.map(function(item, index) {\n\t\t\tif (selected.indexOf(index) !== -1) {\n\t\t\t\titem.rentBeginDate = value;\n\t\t\t} else {\n\t\t\t\titem.rentBeginDate = '';\n\t\t\t}\n\t\t\treturn item;\n\t\t});\n\n\t\tthis.setState({\n\t\t\tstationVos\n\t\t});\n\n\t}\n\n\n\tgetLoadData() {\n\t\tvar _this = this;\n\t\tlet {\n\t\t\tparams\n\t\t} = this.context;\n\t\tStore.dispatch(Actions.callAPI('getStationOrSettingList', {\n\t\t\tmainBillid: params.orderId,\n\t\t\tpage: 1,\n\t\t\tpagesize: 100,\n\t\t\tcontractId: params.id\n\t\t})).then(function(response) {\n\t\t\tresponse.items = response.items.map((item)=>{\n\t\t\t\tif(item.show){\n\t\t\t\t\titem.rentBeginDate = item.lastEditDate;\n\t\t\t\t}\n\t\t\t\treturn item;\n\t\t\t})\n\t\t\t_this.setState({\n\t\t\t\tstationVos: response.items\n\t\t\t});\n\t\t}).catch(function(err) {\n\t\t\tNotify.show([{\n\t\t\t\tmessage: '后台出错请联系管理员',\n\t\t\t\ttype: 'danger',\n\t\t\t}]);\n\t\t});\n\t}\n\n\tonSelect(selected) {\n\t\tthis.setState({\n\t\t\tselected\n\t\t}, function() {\n\n\t\t});\n\t}\n\n\tonSubmit() {\n\n\t\tlet {\n\t\t\tstationVos,\n\t\t\tselected\n\t\t} = this.state;\n\t\tlet selectedStationVos = [];\n\n\t\tselectedStationVos = stationVos.filter(function(item, index) {\n\t\t\tif (selected.indexOf(index) !== -1) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\n\t\tif (!selectedStationVos.length) {\n\t\t\tNotify.show([{\n\t\t\t\tmessage: '请选择工位',\n\t\t\t\ttype: 'danger',\n\t\t\t}]);\n\n\t\t\treturn;\n\t\t}\n\n\t\t//选中的必须要有租赁结束日期\n\t\tvar someStartDate = true;\n\n\t\tselectedStationVos.forEach(function(item, index) {\n\t\t\tif (!item.rentBeginDate) {\n\t\t\t\tsomeStartDate = false;\n\t\t\t}\n\t\t});\n\n\t\tif (!someStartDate) {\n\t\t\tNotify.show([{\n\t\t\t\tmessage: '选择的工位必须要有租赁开始时间',\n\t\t\t\ttype: 'danger',\n\t\t\t}]);\n\t\t\treturn;\n\t\t}\n\n\t\t//工位结束时间相同\n\t\tvar some = true;\n\t\tselectedStationVos.sort(function(pre, next) {\n\t\t\tvar preDate = dateFormat(pre.leaseEndDate, 'yyyy-mm-dd');\n\t\t\tvar nextDate = dateFormat(next.leaseEndDate, 'yyyy-mm-dd');\n\t\t\tif (preDate != nextDate) {\n\t\t\t\tsome = false;\n\t\t\t}\n\t\t\treturn -1;\n\t\t});\n\n\t\tif (!some) {\n\t\t\tNotify.show([{\n\t\t\t\tmessage: '请选择相同日期',\n\t\t\t\ttype: 'danger',\n\t\t\t}]);\n\t\t\treturn false;\n\t\t}\n\n\t\t//修改日期\n\t\tvar resultStationVos = [];\n\t\tselectedStationVos.forEach(function(item, index) {\n\t\t\tvar obj = {};\n\t\t\tobj.id = item.id;\n\t\t\tobj.stationId = item.stationId;\n\t\t\tobj.stationName = item.stationName;\n\t\t\tobj.unitprice = item.unitprice;\n\t\t\tobj.stationType = item.stationType;\n\t\t\tobj.stationBeginDate = dateFormat(item.leaseBeginDate, 'yyyy-mm-dd');\n\t\t\tobj.stationEndDate = dateFormat(item.leaseEndDate, 'yyyy-mm-dd');\n\n\t\t\tobj.leaseBeginDate = dateFormat(item.rentBeginDate, 'yyyy-mm-dd');\n\t\t\tobj.leaseEndDate = dateFormat(item.leaseEndDate, 'yyyy-mm-dd');\n\t\t\tobj.rentBeginDate = dateFormat(item.rentBeginDate, 'yyyy-mm-dd');\n\n\t\t\tresultStationVos.push(obj);\n\t\t});\n\n\t\tselectedStationVos = resultStationVos;\n\n\t\t//选择的减租开始日期必须要在工位的起始日期和结束日期范围内\n\t\tvar isOK = 1;\n\t\tselectedStationVos.map(function(item, index) {\n\t\t\tvar stationBeginDate = Date.parse(dateFormat(item.stationBeginDate, 'yyyy-mm-dd') + ' 00:00:00');\n\t\t\tvar stationEndDate = Date.parse(dateFormat(item.stationEndDate, 'yyyy-mm-dd') + ' 00:00:00');\n\t\t\tvar rentBeginDate = Date.parse(dateFormat(item.rentBeginDate, 'yyyy-mm-dd') + ' 00:00:00');\n\n\t\t\tif (stationBeginDate >= rentBeginDate || rentBeginDate >= stationEndDate) {\n\t\t\t\tisOK = 0;\n\t\t\t}\n\t\t});\n\n\t\tif (!isOK) {\n\t\t\tNotify.show([{\n\t\t\t\tmessage: '减租开始时间必须要在选择工位的租赁开始日期和结束日期之内',\n\t\t\t\ttype: 'danger',\n\t\t\t}]);\n\t\t\treturn false;\n\t\t}\n\t\tconsole.log('---->>>>', selectedStationVos)\n\n\t\tStore.dispatch(change('reduceCreateForm', 'leaseBegindate', selectedStationVos[0].leaseEndDate));\n\n\t\tconst {\n\t\t\tonSubmit\n\t\t} = this.props;\n\t\tonSubmit && onSubmit(selectedStationVos);\n\t}\n\n\n\n\tonCancel() {\n\t\tconst {\n\t\t\tonCancel\n\t\t} = this.props;\n\t\tonCancel && onCancel();\n\t}\n\n\trender() {\n\n\t\tlet {\n\t\t\terror,\n\t\t\thandleSubmit,\n\t\t\tpristine,\n\t\t\treset,\n\t\t\tsubmitting,\n\t\t\tchangeValues\n\t\t} = this.props;\n\t\tlet {\n\t\t\tstationVos\n\t\t} = this.state;\n\t\tconst overfolw = {\n\t\t\t'overflow': 'hidden',\n\t\t\tmaxHeight: 510,\n\t\t}\n\t\tconst height = {\n\t\t\theight: stationVos.length * 45,\n\t\t\tmaxHeight: 667,\n\t\t}\n\t\treturn (\n\t\t\t<div style={{height:667,marginTop:20}}>\n<form onSubmit={handleSubmit(this.onSubmit)}>\n\t\t\t<KrField grid={1/2}  name=\"rentBeginDate\" component=\"date\" label=\"减租开始时间：\" onChange={this.onChangeRentBeginDate} inline={true}/>\n\n      <Table onSelect={this.onSelect} style={overfolw}>\n        <TableHeader>\n          <TableHeaderColumn>类别</TableHeaderColumn>\n          <TableHeaderColumn>编号／名称</TableHeaderColumn>\n          <TableHeaderColumn>单价（元／月）</TableHeaderColumn>\n          <TableHeaderColumn>起始日期</TableHeaderColumn>\n          <TableHeaderColumn>结束日期</TableHeaderColumn>\n          <TableHeaderColumn>减租开始日期</TableHeaderColumn>\n      </TableHeader>\n      <TableBody>\n      {stationVos && stationVos.map((item,index)=>{\n        return (\n          <TableRow key={index}>\n          <TableRowColumn >{(item.stationType == 1) ?'工位':'会议室'}</TableRowColumn>\n          <TableRowColumn >{item.stationName}</TableRowColumn>\n          <TableRowColumn >{item.unitprice}</TableRowColumn>\n          <TableRowColumn ><KrDate value={item.leaseBeginDate}/></TableRowColumn>\n          <TableRowColumn ><KrDate value={item.leaseEndDate}/></TableRowColumn>\n          <TableRowColumn>\n\t\t\t\t{item.rentBeginDate&& dateFormat(item.rentBeginDate,'yyyy-mm-dd')}\n          </TableRowColumn>\n         </TableRow>\n        );\n      })}\n      </TableBody>\n      </Table>\n      <Grid>\n      <Row style={{marginTop:30,paddingBottom:24}}>\n      <Col md={4}></Col>\n      <Col md={2} align=\"center\"> <Button  label=\"确定\" type=\"submit\" /> </Col>\n      <Col md={2} align=\"center\"> <Button  label=\"取消\" cancle={true} type=\"button\"  onTouchTap={this.onCancel}/> </Col>\n      <Col md={4}></Col>\n      </Row>\n      </Grid>\n</form>\n\t\t\t</div>);\n\t}\n}\n\nexport default reduxForm({\n\tform: 'selectStationForm',\n\tenableReinitialize: true,\n\tkeepDirtyOnReinitialize: true\n})(SelectStationForm);"]}