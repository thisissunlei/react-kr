{"version":3,"sources":["src/Containers/Member/MemberManage/Setting/HeavilyActivation.js"],"names":["HeavilyActivation","props","detail","startNum","endNum","cardNum","path","state","error","handleSubmit","pristine","reset","onSubmit","marginTop","handleStartBlur","handleEndBlur","height","marginBottom","marginLeft","defaultProps","stage","PropTypes","func","onCancel","object","string","values","event","_this","isCard","setState","calCard","value","card","isNaN","length","validate","errors","selector","form"],"mappings":"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","file":"HeavilyActivation.js","sourceRoot":"/Users/liuyihao/Code/kr-admin","sourcesContent":["import React, {Component, PropTypes} from 'react';\nimport {connect} from 'kr/Redux';\n\nimport {reduxForm,formValueSelector,initialize,change} from 'redux-form';\nimport {Actions,Store} from 'kr/Redux';\nimport {\n\tKrField,\n\tGrid,\n\tRow,\n\tCol,\n\tButton,\n\tNotify,\n\tButtonGroup,\n\tMessage\n} from 'kr-ui';\nimport './index.less';\n\n class HeavilyActivation extends Component{\n\n\t static defaultProps = {\n\t \t\tstage:'importNum'\n\t \t}\n\t //节点的暴露\n\t static PropTypes = {\n\t\t onSubmit:React.PropTypes.func,\n\t\t onCancel:React.PropTypes.func,\n\t\t detail:React.PropTypes.object,\n\t\t /**\n\t\t  * stage表示批量修改所处的阶段\n\t\t  * 允许填入的值为 importNum|| activeCard\n\t\t  */\n\t\t stage:React.PropTypes.string,\n\t }\n\t//数据的初始化设定\n\tconstructor(props){\n\t\tsuper(props);\n\t\tvar detail= props.detail;\n\t\tvar startNum = props.detail.startNum||'';\n\t\tvar endNum = props.detail.endNum||'';\n\n\t\tvar cardNum=0;\n\n\t\tif(startNum&&endNum){\n\t\t\tcardNum=endNum-startNum;\n\t\t}\n\t\tif(props.path==\"index\"){\n\t\t\tstartNum='';\n\t\t\tendNum='';\n\t\t\tendNum=0;\n\n\t\t}\n\t\tthis.state={\n\t\t\tstartNum:startNum,\n\t\t\tendNum:endNum,\n\t\t\tcardNum:cardNum\n\t\t}\n\t}\n\t\n\n\t onSubmit=(values)=>{\n\t\tconst {onSubmit} = this.props;\n\t\tonSubmit && onSubmit(values);\n\t }\n\n\t onCancel=()=>{\n\t\t const {onCancel} = this.props;\n\t\tonCancel && onCancel();\n\t }\n\n\n\t handleStartBlur=(event)=>{\n\n\t\t var _this=this;\n\t\t\n\t\t if(this.isCard(event)){\n\n\t\t\t this.setState({\n\t\t\t\t\tstartNum:event,\n\t\t\t\t\t endNum:this.state.endNum,\n\t\t\t\t\t cardNum:this.state.cardNum\n\t\t\t\t },function(){\n\t\t\t\t\t _this.calCard();\n\t\t\t\t })\n\t\t }\n\n\t }\n\t handleEndBlur=(value)=>{\n\n\t\t var _this=this;\n\t\t if(this.isCard(value)){\n\t\t\t this.setState({\n\t\t\t\t\t startNum:this.state.startNum,\n\t\t\t\t\t endNum:value,\n\t\t\t\t\t cardNum:this.state.cardNum\n\t\t\t\t },function(){\n\n\t\t\t\t\t _this.calCard();\n\t\t\t\t })\n\t\t }\n\t }\n\t //计算卡的多少\n\t calCard=()=>{\n\n\t \tvar {startNum,endNum} = this.state;\n\n\t \t \n\t\t if(startNum&&endNum){\n\t\t \tif(endNum-startNum<0){\n\t\t \t\tMessage.error('起始号码不能大于终止号码！');\n\t\t \t\treturn;\n\t\t \t}\n\n\t\t\t\n\n\t\t\t this.setState({\n\t\t\t\t\t cardNum:endNum-startNum\n\t\t\t\t })\n\t\t }\n\t }\n\t isCard=(card)=>{\n\t \n\t\t if(!card){\n\t\t\treturn false;\n\t\t }\n\t\t if(isNaN(card)){\n\n\t\t\t return false;\n\t\t }\n\t\t if(card.length!=10){\n\t\t\t return false;\n\t\t }\n\t\t \n\t\t return true;\n\t }\n\n\trender(){\n\t\tconst {\n\t\t\terror,\n\t\t\thandleSubmit,\n\t\t\tpristine,\n\t\t\treset\n\t\t} = this.props;\n\t\tvar cardNum=this.state.cardNum+1;\n\t\tif(!this.state.startNum||!this.state.endNum){\n\t\t\tcardNum=0;\n\t\t}\n\t\tif(this.state.startNum-this.state.endNum>0){\n\t\t\tcardNum=0;\n\t\t}\n\n\t\treturn (\n\t\t\t<form className=\"HeavilyActivation\" onSubmit={handleSubmit(this.onSubmit)}>\n\t\t\t\t<div className=\"stageImg\" ></div>\n\t\t\t\t<KrField style={{marginTop:20}} left={71} right={71} name=\"startNum\" component=\"input\" type=\"text\" label=\"起始号码\" onChange={this.handleStartBlur} />\n\t\t\t\t<KrField style={{marginTop:5}} left={71} right={71} name=\"endNum\" component=\"input\" type=\"text\" label=\"终止号码\" onChange={this.handleEndBlur} />\n\t\t\t\t<KrField style={{height:36,marginTop:-5}} left={71} right={71} component=\"labelText\" label=\"会员卡数量:\" value={cardNum+\"张\"}/>\n\t\t\t\t<Grid style={{marginTop:15,marginBottom:5}}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col md={12} align=\"center\">\n\t\t\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t\t\t<div style={{marginLeft:\"30\"}} className='ui-btn-center'><Button  label=\"开始激活\" type=\"submit\" joinEditForm /></div>\n\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t);\n\t}\n}\nconst validate = values =>{\n\n\t\tconst errors = {}\n\n\t\tif(!values.startNum){\n\t\t\terrors.startNum = '请输入起始号码';\n\t\t}\n\t\tif(!isNaN(+values.startNum)&&values.startNum&&values.startNum.length!=10){\n\t\t\terrors.startNum='请输入10位会员卡号'\n\t\t}\n\t\tif(values.startNum&&isNaN(+values.startNum)){\n\n\t\t\terrors.startNum = '卡号由十位数字的卡号组成';\n\t\t}\n\t\tif (!values.endNum) {\n\t\t\terrors.endNum = '请输入终止号码';\n\t\t}\n\t\tif(!isNaN(+values.endNum)&&values.endNum&&values.endNum.length!=10){\n\t\t\terrors.endNum='请输入10位会员卡号'\n\t\t}\n\t\tif(values.endNum&&isNaN(+values.endNum)){\n\t\t\terrors.endNum = '卡号由十位数字的卡号组成';\n\t\t}\n\t\treturn errors\n\t}\nconst selector = formValueSelector('HeavilyActivation');\n\n\n\nexport default reduxForm({ form: 'HeavilyActivation', validate})(HeavilyActivation);\n"]}