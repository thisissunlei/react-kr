'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _Redux = require('kr/Redux');

var _reduxForm = require('redux-form');

var _isRight = require('./images/isRight.svg');

var _isRight2 = _interopRequireDefault(_isRight);

var _happy = require('./images/happy.svg');

var _happy2 = _interopRequireDefault(_happy);

var _sad = require('./images/sad.svg');

var _sad2 = _interopRequireDefault(_sad);

require('./index.less');

var _Tabs = require('material-ui/Tabs');

var _krUi = require('kr-ui');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FinishUploadImgForm = function (_Component) {
	_inherits(FinishUploadImgForm, _Component);

	function FinishUploadImgForm(props) {
		_classCallCheck(this, FinishUploadImgForm);

		var _this2 = _possibleConstructorReturn(this, (FinishUploadImgForm.__proto__ || Object.getPrototypeOf(FinishUploadImgForm)).call(this, props));

		_this2.closeUploadImg = function () {
			var closeUploadImg = _this2.props.closeUploadImg;

			closeUploadImg && closeUploadImg();
		};

		_this2.onActive = function () {
			_this2.setState({
				leftfontColor: !_this2.state.leftfontColor,
				rightfontColor: !_this2.state.rightfontColor
			});
		};

		_this2.exportData = function () {
			window.location.href = '/api/krspace-finance-web/community/sysDeviceDefinition/upload-data-excel';
		};

		_this2.state = {
			value: 'a',
			sucNum: 0,
			errNum: 0,
			success: '',
			failed: '',
			rightfontColor: false,
			leftfontColor: true,
			successZero: false,
			failedZero: false
		};
		return _this2;
	}

	_createClass(FinishUploadImgForm, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this = this;
			_Redux.Store.dispatch(_Redux.Actions.callAPI('getSuccedOrErrData', "")).then(function (response) {
				if (response.success.length < 1) {
					_this.setState({
						successZero: true
					});
				}
				if (response.failed.length < 1) {
					_this.setState({
						failedZero: true
					});
				}
				_this.setState({
					success: response.success,
					failed: response.failed,
					sucNum: response.success.length,
					errNum: response.failed.length
				});
			}).catch(function (err) {
				_krUi.Notify.show([{
					message: err.message,
					type: 'danger'
				}]);
			});
		}
		// 导出excle表格

	}, {
		key: 'render',
		value: function render() {
			var _state = this.state,
			    sucNum = _state.sucNum,
			    errNum = _state.errNum,
			    success = _state.success,
			    failed = _state.failed,
			    rightfontColor = _state.rightfontColor,
			    leftfontColor = _state.leftfontColor;

			return _react2.default.createElement(
				'div',
				{ className: 'upload-img-outer-box' },
				_react2.default.createElement(
					'div',
					{ className: 'upload-img-box' },
					_react2.default.createElement(
						'div',
						{ className: 'upload-img-title' },
						_react2.default.createElement('img', { className: 'upload-img-right', src: _isRight2.default }),
						_react2.default.createElement(
							'span',
							{ className: 'upload-img-tip' },
							sucNum + errNum,
							'\u53F0\u8BBE\u5907\u56FE\u7247\u4E0A\u4F20\u5B8C\u6210'
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'upload-img-body' },
						_react2.default.createElement(
							_Tabs.Tabs,
							{
								failed: this.state.failed,

								inkBarStyle: { background: "#499ef1" }
							},
							_react2.default.createElement(
								_Tabs.Tab,
								{ className: 'upload-img-tab', label: '\u6210\u529F\u8BBE\u5907\uFF08 ' + sucNum + ' \uFF09', value: 'a', style: { fontSize: 14, fontWeight: "normal", color: leftfontColor ? "#499ef1" : "#333333", background: "#fff" }, onActive: this.onActive },
								_react2.default.createElement(
									'div',
									{ style: { height: 328, marginTop: 20, border: " solid 1px #dfdfdf" }, className: 'upload-img-victory' },
									_react2.default.createElement(
										'div',
										{ style: { height: 328, overflow: "scroll" } },
										_react2.default.createElement(
											_krUi.Table,
											{
												onProcessData: function onProcessData(state) {
													return state;
												},
												pagination: false,
												displayCheckbox: false,
												style: { margin: 0 }
											},
											_react2.default.createElement(
												_krUi.TableHeader,
												{ style: { borderTop: "none" } },
												_react2.default.createElement(
													_krUi.TableHeaderColumn,
													{ style: { fontSize: 14 } },
													'\u793E\u533A'
												),
												_react2.default.createElement(
													_krUi.TableHeaderColumn,
													{ style: { fontSize: 14 } },
													'\u95E8\u7F16\u53F7'
												),
												_react2.default.createElement(
													_krUi.TableHeaderColumn,
													{ style: { fontSize: 14 } },
													'\u667A\u80FD\u786C\u4EF6ID'
												)
											),
											_react2.default.createElement(
												_krUi.TableBody,
												{ style: { position: 'inherit' }
												},
												success && success.map(function (item, index) {
													return _react2.default.createElement(
														_krUi.TableRow,
														{ displayCheckbox: false, key: index },
														_react2.default.createElement(
															_krUi.TableRowColumn,
															null,
															_react2.default.createElement(
																'span',
																null,
																item.communityName
															)
														),
														_react2.default.createElement(
															_krUi.TableRowColumn,
															null,
															_react2.default.createElement(
																'span',
																null,
																item.deviceCode
															)
														),
														_react2.default.createElement(
															_krUi.TableRowColumn,
															null,
															_react2.default.createElement(
																'span',
																null,
																item.hardwareId
															)
														)
													);
												})
											),
											_react2.default.createElement(_krUi.TableFooter, null)
										),
										_react2.default.createElement(
											'div',
											{
												style: { display: this.state.successZero ? "block" : "none", textAlign: "center", height: 137, paddingTop: 120 }
											},
											_react2.default.createElement('img', { className: 'upload-img-right', src: _sad2.default, style: { width: 20, verticalAlign: "top" } }),
											_react2.default.createElement(
												'span',
												{ style: { color: "#333" } },
												'\u5F88\u9057\u61BE,\u4E00\u5F20\u7167\u7247\u4E5F\u6CA1\u4F20\u4E0A\u2026\u2026'
											)
										)
									),
									_react2.default.createElement(
										'div',
										{ onClick: this.exportData, style: { fontSize: 14, color: "#499ef1", marginTop: 10, width: 56, cursor: "pointer" } },
										'\u5BFC\u51FA\u6570\u636E'
									)
								),
								_react2.default.createElement(
									_krUi.Grid,
									{ style: { marginTop: 30, marginBottom: '4px' } },
									_react2.default.createElement(
										_krUi.Row,
										null,
										_react2.default.createElement(
											_krUi.ListGroup,
											null,
											_react2.default.createElement(
												_krUi.ListGroupItem,
												{ style: { width: 255, textAlign: 'right', padding: 0, paddingRight: 15 } },
												_react2.default.createElement(_krUi.Button, { label: '\u786E\u5B9A', type: 'submit', onClick: this.closeUploadImg })
											),
											_react2.default.createElement(
												_krUi.ListGroupItem,
												{ style: { width: '171px', textAlign: 'left', padding: 0, paddingLeft: 15 } },
												_react2.default.createElement(_krUi.Button, { label: '\u53D6\u6D88', type: 'button', cancle: true, onTouchTap: this.closeUploadImg })
											)
										)
									)
								)
							),
							_react2.default.createElement(
								_Tabs.Tab,
								{ label: '\u5931\u8D25\u8BBE\u5907\uFF08 ' + errNum + ' \uFF09', value: 'b', style: { fontSize: 14, fontWeight: "normal", color: rightfontColor ? "#499ef1" : "#333333", background: "#fff" }, onActive: this.onActive },
								_react2.default.createElement(
									'div',
									{ style: { height: 334, marginTop: 20, border: " solid 1px #dfdfdf" }, className: 'upload-img-victory' },
									_react2.default.createElement(
										'div',
										{ style: { height: 334, overflow: "scroll" } },
										_react2.default.createElement(
											_krUi.Table,
											{
												exportSwitch: true,
												pagination: false,
												displayCheckbox: false,
												style: { margin: 0 }
											},
											_react2.default.createElement(
												_krUi.TableHeader,
												{ style: { borderTop: "none" } },
												_react2.default.createElement(
													_krUi.TableHeaderColumn,
													{ style: { fontSize: 14 } },
													'\u793E\u533A\u95E8\u7F16\u53F7'
												),
												_react2.default.createElement(
													_krUi.TableHeaderColumn,
													{ style: { fontSize: 14 } },
													'\u95E8\u7F16\u53F7'
												),
												_react2.default.createElement(
													_krUi.TableHeaderColumn,
													{ style: { fontSize: 14 } },
													'\u667A\u80FD\u786C\u4EF6ID'
												)
											),
											_react2.default.createElement(
												_krUi.TableBody,
												{ style: { position: 'inherit' } },
												failed && failed.map(function (item, index) {
													return _react2.default.createElement(
														_krUi.TableRow,
														{ displayCheckbox: false, key: index },
														_react2.default.createElement(
															_krUi.TableRowColumn,
															null,
															_react2.default.createElement(
																'span',
																null,
																item.communityName
															)
														),
														_react2.default.createElement(
															_krUi.TableRowColumn,
															null,
															_react2.default.createElement(
																'span',
																null,
																item.deviceCode
															)
														),
														_react2.default.createElement(
															_krUi.TableRowColumn,
															null,
															_react2.default.createElement(
																'span',
																null,
																item.hardwareId
															)
														)
													);
												})
											),
											_react2.default.createElement(_krUi.TableFooter, null)
										),
										_react2.default.createElement(
											'div',
											{
												style: { display: this.state.failedZero ? "block" : "none", textAlign: "center", height: 137, paddingTop: 120 }
											},
											_react2.default.createElement('img', { className: 'upload-img-right', src: _happy2.default, style: { width: 20, verticalAlign: "top" } }),
											_react2.default.createElement(
												'span',
												{ style: { color: "#333" } },
												'\u606D\u559C\u60A8\uFF0C\u6240\u6709\u7167\u7247\u90FD\u4E0A\u4F20\u6210\u529F\u4E86'
											)
										)
									),
									_react2.default.createElement(
										'div',
										{ onClick: this.exportData, style: { fontSize: 14, color: "#499ef1", marginTop: 10, width: 56, cursor: "pointer" } },
										'\u5BFC\u51FA\u6570\u636E'
									)
								),
								_react2.default.createElement(
									_krUi.Grid,
									{ style: { marginTop: 30, marginBottom: '4px' } },
									_react2.default.createElement(
										_krUi.Row,
										null,
										_react2.default.createElement(
											_krUi.ListGroup,
											null,
											_react2.default.createElement(
												_krUi.ListGroupItem,
												{ style: { width: 255, textAlign: 'right', padding: 0, paddingRight: 15 } },
												_react2.default.createElement(_krUi.Button, { label: '\u786E\u5B9A', type: 'submit', onClick: this.closeUploadImg })
											),
											_react2.default.createElement(
												_krUi.ListGroupItem,
												{ style: { width: '171px', textAlign: 'left', padding: 0, paddingLeft: 15 } },
												_react2.default.createElement(_krUi.Button, { label: '\u53D6\u6D88', type: 'button', cancle: true, onTouchTap: this.closeUploadImg })
											)
										)
									)
								)
							)
						)
					),
					_react2.default.createElement('div', { className: 'upload-img-footer' })
				)
			);
		}
	}]);

	return FinishUploadImgForm;
}(_react.Component);

exports.default = FinishUploadImgForm;
;

var _temp = function () {
	if (typeof __REACT_HOT_LOADER__ === 'undefined') {
		return;
	}

	__REACT_HOT_LOADER__.register(FinishUploadImgForm, 'FinishUploadImgForm', '/Users/dongfanai/Desktop/project/kr-admin/src/Containers/Operation/BasicConfig/EquipmentDefinition/FinishUploadImgForm.js');
}();

;