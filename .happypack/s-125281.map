{"version":3,"sources":["src/Containers/Member/MemberManage/Detail/UpdateLog/index.js"],"names":["UpdateLog","props","context","onStartChange","startTime","searchParams","state","start","Date","parse","end","endTime","error","setState","onEndChange","onLoaded","bind","item","list","page","pageSize","memberId","router","params","response","totalCount","height","float","color","marginTop","position","label","value","oldValue","contextTypes","PropTypes","object","isRequired","propTypes","number"],"mappings":"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","file":"index.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["import React, {\n\tComponent\n} from 'react';\nimport {\n\tTable,\n\tTableBody,\n\tTableHeader,\n\tTableHeaderColumn,\n\tTableRow,\n\tTableRowColumn,\n\tTableFooter,\n  Message,\n} from 'kr-ui';\nimport dateFormat from 'dateformat';\nimport SearchUpdateLog from './SearchUpdateLog';\nexport default class UpdateLog extends Component {\n\tstatic contextTypes = {\n\t\trouter: React.PropTypes.object.isRequired\n\t}\n\n\tstatic propTypes = {\n\t memberId:React.PropTypes.number\n\t}\n  constructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.onLoaded = this.onLoaded.bind(this);\n\t\tthis.state = {\n\t\t\titem: {},\n\t\t\tlist: {},\n\t\t\tsearchParams: {\n\t\t\t\tpage: 1,\n\t\t\t\tpageSize: 15,\n\t\t\t\tmemberId:this.context.router.params.memberId,\n\t\t\t\tendTime:'',\n\t\t\t\tstartTime:''\n\t\t\t}\n\t\t}\n\t}\n  onLoaded(response) {\n\t\tlet list = response;\n\t\tthis.setState({\n\t\t\tlist\n\t\t})\n\t}\n  onStartChange=(startTime)=>{\n    let {searchParams}=this.state;\n    let start=Date.parse(dateFormat(startTime,\"yyyy-mm-dd hh:MM:ss\"));\n    let end=Date.parse(dateFormat(searchParams.endTime,\"yyyy-mm-dd hh:MM:ss\"))\n    if(searchParams.endTime && start>end ){\n      Message.error(\"结束时间要小于开始时间\");\n      return ;\n    }\n    searchParams = Object.assign({}, searchParams, {startTime});\n    this.setState({\n    \tsearchParams\n  \t});\n  }\n  onEndChange=(endTime)=>{\n    let {searchParams}=this.state;\n    let start=Date.parse(dateFormat(searchParams.startTime,\"yyyy-mm-dd hh:MM:ss\"));\n    let end=Date.parse(dateFormat(endTime,\"yyyy-mm-dd hh:MM:ss\"));\n    if(searchParams.startTime && start>end){\n      Message.error(\"结束时间要小于开始时间\");\n\t\t\treturn ;\n    }\n    searchParams = Object.assign({}, searchParams, {endTime});\n    this.setState({\n    \tsearchParams\n  \t});\n  }\n  render(){\n    let {\n\t\t\tlist,\n      searchParams,\n\t\t} = this.state;\n\t\tif (!list.totalCount) {\n\t\t\tlist.totalCount = 0;\n\t\t}\n\n    return (\n      <div style={{height:'860'}}>\n        <div>\n          <span style={{float:'left',color:'#499df1',marginTop:'30'}}>Krspace轨迹</span>\n          <SearchUpdateLog  onStartChange={this.onStartChange} onEndChange={this.onEndChange}/>\n        </div>\n      <Table\n          style={{}}\n          displayCheckbox={false}\n          onLoaded={this.onLoaded}\n          ajax={true}\n          ajaxFieldListName='items'\n          ajaxUrlName='getUpdateLog'\n          ajaxParams={this.state.searchParams}\n        >\n        <TableHeader>\n          <TableHeaderColumn>会员ID</TableHeaderColumn>\n          <TableHeaderColumn>操作类型</TableHeaderColumn>\n          <TableHeaderColumn>操作结果</TableHeaderColumn>\n          <TableHeaderColumn>操作记录</TableHeaderColumn>\n          <TableHeaderColumn>操作人</TableHeaderColumn>\n          <TableHeaderColumn>操作时间</TableHeaderColumn>\n          <TableHeaderColumn>操作人IP</TableHeaderColumn>\n      </TableHeader>\n\n      <TableBody style={{position:'inherit'}}>\n          <TableRow displayCheckbox={true}>\n              <TableRowColumn name=\"memberId\" ></TableRowColumn>\n\t\t\t\t\t\t\t<TableRowColumn name=\"businessObj\" options={[{label:'更新',value:'UPDATE'},{label:'新增',value:'ADD'}]}\n\t\t\t\t\t\t\tcomponent={(value,oldValue)=>{\n\t\t\t\t\t\t\t\treturn (<span>{value}</span>)}}>\n\t\t\t\t\t\t\t</TableRowColumn>\n\t\t\t\t\t\t\t<TableRowColumn name=\"operationResult\" options={[{label:'成功',value:''},{label:'成功',value:''}]}\n\t\t\t\t\t\t\tcomponent={(value,oldValue)=>{\n\t\t\t\t\t\t\t\treturn (<span>{value}</span>)}}></TableRowColumn>\n              <TableRowColumn name=\"operateRecord\" ></TableRowColumn>\n              <TableRowColumn name=\"operaterName\" ></TableRowColumn>\n              <TableRowColumn name=\"operateDate\" type=\"date\" format=\"yyyy-mm-dd HH:MM:ss\"></TableRowColumn>\n              <TableRowColumn name=\"operateIp\" ></TableRowColumn>\n         </TableRow>\n      </TableBody>\n\n      <TableFooter></TableFooter>\n\n      </Table>\n\n      </div>\n    )\n  }\n}\n"]}