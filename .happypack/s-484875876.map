{"version":3,"sources":["src/Components/SearchForm/index.js"],"names":["SearchForm","props","context","hasClass","obj","cls","className","match","RegExp","onBlur","event","onSubmit","searchFilter","value","state","type","map","item","label","setState","content","target","search","removeClass","reg","replace","toggleClass","selectShow","list","findDOMNode","selectList","ul","getElementsByTagName","selectHidden","getValue","aa","document","getElementsByClassName","innerHTML","renderFilter","defaultFilter","select","div","li","index","num","nextProps","isInit","left","right","grid","style","defaultContent","WrapStyles","width","paddingLeft","paddingRight","form","PropTypes","array","object","func","number","oneOfType","string"],"mappings":"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","file":"index.js","sourceRoot":"/Users/tmac_zc/Code/kr-admin","sourcesContent":["import React,{Component} from 'react';\nimport './index.less';\nimport $ from 'jquery';\nimport {\n\tFontIcon,\n} from 'kr-ui';\nimport ReactDOM from 'react-dom';\n\nexport default class SearchForm extends Component{\n\t// var aa = document.getElementById(\"keywords\").value;\n\tstatic PropTypes = {\n\t\tsearchFilter:React.PropTypes.array,\n\t\tstyle: React.PropTypes.object,\n\t\t//事件\n\t\tonSubmit: React.PropTypes.func,\n\t\tgrid: React.PropTypes.number,\n\t\tleft: React.PropTypes.oneOfType([React.PropTypes.string, React.PropTypes.number]),\n\t\tright: React.PropTypes.oneOfType([React.PropTypes.string, React.PropTypes.number]),\n\t}\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\tnum : 0,\n\t\t\tvalue:'',\n\t\t\tcontent:''\n\t\t};\n\n\t}\n\tcomponentDidMount() {\n\n\t}\n\tcomponentWillReceiveProps(nextProps){\n\t\tif (!this.isInit && nextProps.value) {\n\t\t\tlet value = nextProps.value;\n\t\t\tthis.setState({\n\t\t\t\tvalue\n\t\t\t});\n\t\t\tthis.isInit = true;\n\t\t}\n\n\t}\n\thasClass=(obj, cls)=> {\n\t    return obj.className.match(new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)'));\n\t}\n\tonBlur=(event)=>{\n\t\tlet {onSubmit,searchFilter} = this.props;\n\t\tlet {value} = this.state;\n\t\tlet type = '';\n\t\tsearchFilter.map((item)=>{\n\t\t\tif(item.label == value){\n\t\t\t\ttype = item.value;\n\t\t\t}\n\t\t})\n\t\tthis.setState({\n\t\t\tcontent:event.target.value\n\t\t})\n\t\tlet search =  {\n\t\t\tvalue:type,\n\t\t\tcontent:event.target.value\n\t\t}\n\n\t\tonSubmit && onSubmit(search);\n\n\n\n\t}\n\n\tremoveClass=(obj, cls)=> {\n\t    if (this.hasClass(obj, cls)) {\n\t        var reg = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)');\n\t        obj.className = obj.className.replace(reg, '');\n\t    }\n\t}\n\n\ttoggleClass=(obj,cls)=>{\n\t    if(hasClass(obj,cls)){\n\t        removeClass(obj, cls);\n\t    } else {\n\t        obj.className += ' '+cls;\n\t    }\n\t}\n\n\tselectShow=()=>{\n\t\tconst list = ReactDOM.findDOMNode(this.selectList);\n\t\tlet ul = list.getElementsByTagName('ul')[0];\n\t\tif (!this.hasClass(ul, 'show-li')) {\n\t        ul.className += ' show-li';\n\t    }\n\n\n\t}\n\tselectHidden=()=>{\n\t\tconst list = ReactDOM.findDOMNode(this.selectList);\n\t\tlet ul = list.getElementsByTagName('ul')[0];\n\t\tthis.removeClass(ul,'show-li');\n\t}\n\tgetValue=(event)=>{\n\t\t// console.log('getvalue',event);\n\t\tlet {onSubmit,searchFilter}= this.props;\n\t\tlet {content,value} = this.state;\n\t\tconst list = ReactDOM.findDOMNode(this.selectList);\n\t\tlet ul = list.getElementsByTagName('ul')[0];\n\t\tlet className = event.target.className;\n\t\tvar aa = document.getElementsByClassName(className)[0].innerHTML;\n\t\tdocument.getElementsByClassName('search-name')[0].innerHTML = aa;\n\t\tthis.removeClass(ul,'show-li');\n\t\tthis.setState({\n\t\t\tvalue:aa\n\t\t});\n\t\tsearchFilter.map((item)=>{\n\t\t\tif(item.label == aa){\n\t\t\t\tvalue = item.value;\n\t\t\t}\n\t\t})\n\t\tlet search =  {\n\t\t\tvalue:value,\n\t\t\tcontent:content\n\t\t}\n\n\t\tonSubmit && onSubmit(search);\n\n\t}\n\trenderFilter=()=>{\n\t\tlet {searchFilter,defaultFilter} = this.props;\n\t\tlet {value} = this.state;\n\t\t// console.log('ddddd',defaultFilter);\n\t\tlet select ='请选择';\n\t\tif(searchFilter && !value){\n\t\t\tselect = searchFilter[0].label;\n\t\t}\n\t\tif(value){\n\t\t\tselect = value;\n\t\t}\n\t\tif(defaultFilter && !value){\n\t\t\tsearchFilter.map((item)=>{\n\t\t\t\t// console.log(item.label);\n\t\t\t\tif(item.value == defaultFilter){\n\t\t\t\t\tselect = item.label;\n\t\t\t\t}\n\t\t\t})\n\t\t\t// select = defaultFilter;\n\t\t}\n\t\t// console.log(value);\n\n\t\t// console.log('searchFilter',searchFilter);\n\t\tif(searchFilter){\n\t\t\treturn(\n\t\t\t\t<div className=\"search-filter\" ref={div=>{this.selectList = div}}>\n\t\t\t\t\t<span className=\"filter-container\" onMouseOver={this.selectShow} onMouseOut={this.selectHidden}>\n\t\t\t\t\t\t<span className=\"search-name\" >{select}</span>\n\t\t\t\t\t\t<em className=\"icon-return\"></em>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<ul onMouseOver={this.selectShow} onMouseOut={this.selectHidden} ref={li=>{this.li = li}}>\n\t\t\t\t\t\t{searchFilter && searchFilter.map((item,index)=>{\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li className={`${index}`} onClick={this.getValue} key={index}>\n\t\t\t\t\t\t\t\t\t\t{item.label}\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t)\n\t\t}\n\t}\n\trender(){\n\t\tlet {\n\t\t\tleft,\n\t\t\tright,\n\t\t\tgrid =1,\n\t\t\tstyle,\n\t\t\tdefaultFilter,\n\t\t\tdefaultContent\n\t\t}= this.props;\n\t\tlet WrapStyles = Object.assign({}, {\n\t\t\twidth: (grid * 100) + '%',\n\t\t\tpaddingLeft: left,\n\t\t\tpaddingRight: right\n\t\t}, style);\n\n\t\treturn (\n\t\t\t<div className='search-form-member' ref={div=>{this.form = div}} name=\"search-form\" style={WrapStyles}>\n\t\t\t\t<div className=\"search-status\" >\n\t\t\t\t\t{this.renderFilter()}\n\n\t\t\t\t\t<div className=\"search-content\">\n\t\t\t\t\t\t<input type=\"text\" defaultValue={defaultContent} className=\"search-val\" placeholder=\"请输入查找内容\" onBlur={this.onBlur} name=\"keywords\" id=\"keywords\" autoComplete=\"off\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t)\n\t}\n}\n"]}